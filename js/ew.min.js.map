{"version":3,"names":["ew$1","$$1","luxon","DateTime$1","DateTime","Validators","__proto__","between","el","x","z","id","startsWith","document","getElementById","replace","endsWith","ew","hasValue","val","toUpperCase","language","phrase","captcha","creditCard","value","getValue","checkCreditCard","custom","fn","_len","arguments","length","args","Array","_key","datetime","format","checkDate","email","checkEmail","emails","cnt","err","checkEmails","fileRequired","fieldName","elFn","float","checkNumber","guid","checkGuid","integer","checkInteger","max","maxValue","parseNumber","HTMLElement","maxDate","maxDateTime","dataset","formatPattern","maxFormat","parseDate","Date","fromJSDate","zone","formatDateTime","DATE_FORMAT","TIME_FORMAT","min","minValue","minDate","minDateTime","minFormat","mismatchPassword","elPwd","password","raw","ENCRYPTED_PASSWORD","match","RegExp","escapeRegExChars","INVALID_PASSWORD_CHARACTERS","passwordStrength","$el","isMaskedPassword","hasClass","data","phone","checkPhone","range","checkRange","recaptcha","_grecaptcha","grecaptcha","getResponse","regex","pattern","checkByRegEx","required","_$el$data","$p","closest","substring","css","ssn","checkSsn","time","checkTime","url","checkUrl","userLevelId","parseInt","userLevelName","elId","name","trim","level","sameText","includes","toLowerCase","username","INVALID_USERNAME_CHARACTERS","zip","checkZip","_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","TypeError","String","Number","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","setPrototypeOf","bind","_inheritsLoose","subClass","superClass","create","_defineProperty","obj","batchSettings","type","contentType","processData","dataType","toJSON","JSON","stringify","parse","batchSetup","options","extend","Batch","batch","func","this","undefined","parent","ajaxSetup","_batch","requests","add","_func$name","clear","send","instance","success","parentSuccess","status","xhr","map","request","settings","childSuccess","statusText","_deliver","ajax","_addRequest","push","_responses$error","_responses$error2","responses","error","description","alert","each","response","_request$settings$com","_request$settings$suc","complete","$ajax","FormBase","pageId","$self","_initiated","element","$element","htmlForm","initSearchPanel","modified","emptyRow","multiPage","autoSuggests","lists","formKeyCountName","submitWithFetch","enableOnInit","filterList","disableForm","body","style","cursor","form","getForm","elements","filter","prop","addClass","trigger","enableForm","$elements","removeClass","not","appendHidden","$form","$dp","attr","find","ar","serializeArray","forEach","appendTo","canSubmit","async","_await$this$validate","_this$validate","updateTextArea","validate","$dps","dp","j","test","$els","result","evt","Event","originalEvent","isDefaultPrevented","isObject","submit","_e$originalEvent","formAction","submitter","parseUrl","pathname","setAttribute","getAttribute","method","serialize","fetch","finally","getList","_this$getElement","field","getElement","compileTemplates","values","list","template","isString","templates","getOptionTemplate","_this$element","_this$element2","tagName","getElements","fixId","multiple","rowindex","split","prefix","isNumber","updateList","immediate","_Object$entries$find","entries","entry","parents","parentFields","slice","lookupOptions","updateOptions","getOptionValues","updateLists","_form$querySelector","isUndefined","querySelector","selector","_ref","join","_ref2","isArray","deferreds","batchSize","ajaxBatchSize","b","splice","getApiUrl","API_LOOKUP_ACTION","when","then","source","fail","console","log","always","createAutoSuggest","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","AJAX_DELAY","upload","setupFilters","filters","$sf","toggleClass","$df","$delete","$save","saveFilters","CLIENT_SEARCH_FILTER","localStorage","setItem","PROJECT_NAME","SERVER_SEARCH_FILTER","currentPage","done","_result$","off","on","prompt","input","html","sanitize","prevAll","remove","next","$submenu","insertBefore","currentPageID","action","append","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","cmd","refresh","setLayout","one","init","hasFormData","text","hide","render","loadjs","ready","setTimeout","is","$tab","$panel","$container","width","CONFIRM_CANCEL","href","window","location","from","matches","forms","beforeSend","before","Field","fldvar","validators","invalid","validator","addValidator","_proto","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","resetInvalid","_this$_element","_this$_element$closes","classList","contains","server","fieldContainerSelector","innerHTML","errorMessage","_this$_element$closes2","feedback","setInvalid","focus","setFocus","canFocus","_el$style","_el$classList","hidden","readonly","disabled","display","get","_checkbox","checked","set","_this$_element2","activeElement","Form","_FormBase","_this","tryFocus","addField","fields","getField","addFields","apply","addCustomError","rowIndex","setFieldElement","delay","makeVisible","focusDelay","preventScroll","autoFocusPreventScroll","_focused","_this$_error2","getFocusable","getFieldElements","autoFocus","detailpage","querySelectorAll","_ew$forms$get","TABLE_BASIC_SEARCH","gotoPageByElement","$pane","validateFields","getCurrentRowIndex","row","_form$querySelector2","_e$currentTarget","validateRequired","updateSelected","addcnt","inlineAdd","currentTarget","keycnt","keyCount","gridinsert","rowcnt","_await$this$customVal","_this$customValidate","customValidate","returnFocus","detailpages","_await$frm$validate","frm","_this$getForm$dataset","getFieldValue","_ew$forms$get2","some","_this$getForm$querySe","FormBuilder","setId","setPageId","setLists","setQueryBuilderLists","autoFillTargetFields","childFields","filterFieldVars","filterFields","addList","setFields","setValidate","setCustomValidate","setValidateRequired","setSubmit","setFormKeyCountName","setEmptyRow","setMultiPage","setSubmitWithFetch","setFilterList","setInitSearchPanel","setEnableOnInit","build","MultiPage","context","AjaxLookup","_this$list$parentFiel","_this$list$parentFiel2","elementId","formElement","m","pf","debounce","recordCount","formatResult","opt","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","getOptionValue","getUrl","query","start","params","URLSearchParams","q","n","rnd","random","toString","prepare","transform","results","totalRecordCount","records","toSelect2Data","every","item","hasOwnProperty","Set","gf","group","children","lf","df","df2","df3","df4","_isAutoSuggest","_AjaxLookup","$input","minWidth","maxHeight","highlight","hint","minLength","classNames","forceSelection","forceSelect","lineHeight","paddingY","lookupAllDisplayFields","d","setValue","ta","isOpen","menu","empty","$item","getActiveSelectable","typeahead","close","timer","loadingMore","tpl","suggestion","footer","syncResults","asyncResults","cancel","getSyncResults","Infinity","$menu","$node","$dataset","suggestionHeight","outerHeight","suggestions","rendered","count","h","scrollTop","toggle","loadingMoreTimer","_loadingMoreTimer","$footer","_loadingMoreTimer2","offset","top","getMore","v","findIndex","option","selected","SelectionListOption","datasets","_append","Forms","_ew$getForm","_forms","f","ids","keys","lang","Select2Language","errorLoading","inputTooLong","overChars","maximum","inputTooShort","remainingChars","minimum","maximumSelected","noResults","searching","removeAllItems","removeItem","search","Utils$3","select2","amd","require","_defined","Select2ResultsDecorator","decorated","$results","displayMessage","escapeMarkup","hideLoading","$message","message","className","sort","cols","len","$row","last","$option","pagination","more","createElement","c","attrs","role","Element","msMatchesSelector","webkitMatchesSelector","_resultId","title","StoreData","Utils$2","ModalResults","container","_container$listeners$","listeners","pop","$highlighted","getHighlightedResults","GetData","_mousedown","$this","ModalSearch","$search","removeAttr","KEYS","$","PRINT_SCREEN","DropdownSearchDecorator","handleSearch","which","TAB","SHIFT","CTRL","ALT","_keyUpPrevented","term","Select2AttachBody","_AttachBody","_attachPositioningHandler","events","handler","_positionDropdown","_resizeDropdown","_detachPositioningHandler","_showDropdown","$dropdownContainer","$dropdownParent","_popper","Popper","createPopper","placement","IS_RTL","modifiers","enabled","_this$_popper2","update","_this$_popper3","ModalAttachBody","_bindContainerResultHandlers","stopPropagation","position","$dropdown","_containerResultsHandlersBound","$modal","_self$$search$","_updateDropdown","_e$originalEvent2","detach","end","oldValue","modal","event","draggable","FilterAttachBody","_hideDropdown","_this$_popper","outerWidth","_dropdownButton$close","contents","clone","triggerHandler","selection","_handleClear","$filterDropdown","dropdownButton","reference","DropdownAttachBody","_defined$1","AllowClear$1","Utils$1","FilterAllowClear","_AllowClear","_","isDisabled","$clear","$selection","previousVal","placeholder","unselectData","prevented","Select2MultipleSelectionDecorator","Select2DataAdapterDecorator","_data$element","ResultsList","SingleSelection","MultipleSelection","Placeholder","AllowClear","SelectionSearch","EventRelay","Utils","Translation","SelectData","ArrayData","AjaxData","Tags","Tokenizer","MinimumInputLength","MaximumInputLength","MaximumSelectionLength","Dropdown","DropdownSearch","HidePlaceholder","InfiniteScroll","MinimumResultsForSearch","SelectOnClose","CloseOnSelect","DropdownCSS","TagsSearchHighlight","Defaults","defaults","dataAdapter","Decorate","minimumInputLength","maximumInputLength","maximumSelectionLength","tags","tokenSeparators","tokenizer","resultsAdapter","columns","customOption","iconClass","templateResult","selectOptions","_templateResult","loading","selectOnClose","dropdownAdapter","minimumResultsForSearch","closeOnSelect","dropdownCssClass","dropdown","selectionAdapter","allowClear","translations","dir","currentUrl","URL","$document$1","$body","initIcons","_e$target","tooltipOptions","IS_MOBILE","tooltip","_bootstrap$Tooltip$ge","bootstrap","Tooltip","getInstance","initPasswordOptions","_e$target2","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","pct","valid","setValid","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","PATH_BASE","API_URL","qs","route","encodeURIComponent","_pathname","_hash","hash","searchParams","createSearchParams","getSearchParams","setSearchParams","mergeSearchParams","buildUrl","_len2","_key2","has","setSearchParam","deleteSearchParam","_len3","names","_key3","delete","PAGE_LAYOUT","sanitizeUrl","decodeURIComponent","initExportLinks","_e$target3","fileDownload","getchartParams","preventDefault","initMultiSelectCheckboxes","_e$target4","$cbs","_update","getError","_result$error","_result$error2","failureMessage","isHtml","API_EXPORT_ACTION","swal","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","_fetch","ct","headers","_getError","json","blob","createObjectURL","Blob","a","cd","download","appendChild","click","objectUrl","revokeObjectURL","catch","lazyLoad","_e$target5","LAZY_LOAD","img","LAZY_LOAD_DELAY","src","initLightboxes","_e$target6","USE_COLORBOX","lightboxSettings","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","_e$target7","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","_e$target8","popover","popoverOptions","tippy","content","tippyOptions","parseJson","searchOperatorChange","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isEmptyOpr","isEmptyOpr2","hideOpr2","hideX","hideY","initForms","_e$target9","isFunction$2","_alert","cb","config","confirmButtonText","customClass","htmlContainer","show","isConfirmed","_prompt","cfg","_config","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","_obj","_batch$send","els","getId","isTextbox","isFilter","$elf","typ","elf","_updateOptions","autoFill","fo","frmo","arp","$obj","clearOptions","addOpt","newOption","selectOption","_updateSibling","isBoolean","ds","isNativeSelectOne","isModalLookup","MULTIPLE_OPTION_SEPARATOR","jqXHR","textStatus","errorThrown","root","exportCustom","divId","exportType","tblVar","_div$children$","div","customexport","exportEmail","convertToBool","charts","exportCharts","chart","chartEngine","streamType","stream","toBase64Image","fileName","_export","export","exportSelected","emailForm","keySelected","postParams","_document$querySelect","$iframe","isHiddenTextArea","_el$dataset","modalLookup","_el$dataset2","isSelect2","isBooleanCheckbox","isHidden","reset","once","MOBILE_DETECT","version","scrollIntoView","selectAll","clearSelected","tbl","rowIndexes","rows","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","HTMLTableElement","$tbl","$rows","isset","tBodies","$target","cells","parentsUntil","RESPONSIVE_TABLE_CLASS","cell","rowSpan","clientHeight","offsetHeight","attach","$r","setupGrid","grid","$grid","$cells","htmlDecode","$root","selectors","getFieldSelector","table","s1","s2","flatMap","tag","sel","eq","getAncestorBy","node","parentNode","_node","nodeType","o1","o2","headerCase","str","charAt","samePath","p1","p2","ar1","ar2","LIST_ACTION","VIEW_ACTION","EDIT_ACTION","isValue","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","reduce","addOption","_obj$querySelector","optGroup","g","label","_obj$dataset","_forms$get$getList","_obj$options$","selectedIndex","opts","autoselect","_init$headers","Headers","API_JWT_TOKEN","API_JWT_AUTHORIZATION_HEADER","FormData","executeScript","replaceAll","matchAll","createRange","createContextualFragment","s","addScript","stripScript","scr","HTMLScriptElement","removeScript","getContent","keepScripts","_m$","$content","getOptions","modalDialogHide","$dlg","removeData","showing","reload","dest_array","destEl","v0","pid","post","$tt","trig","Popover","wd","_getTipElement","initSearchFilters","_e$target11","btn","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","_frm$filterList$filte","_frm$filterList","formId","getItem","_ref3","_ref4","copyToClipboard","_source","_source2","innerText","left","select","execCommand","removeChild","object_value","showMessage","arg","_arg$target","doc","$div","$alert","$heading","w","$toast","Math","floor","Pace","_forms$get","jqxhr","isApi","allowed","hostname","setRequestHeader","lastPageSubmit","Interval","dt","fromSQL","fromSeconds","toFormat","locale","numberingSystem","getNumberingSystem","parseDateTime","fromFormat","redirect","_ew$vars","newUrl","vars","login","protocol","host","isMediumScreen","matchMedia","screenMediaQuery","promise","dashboard","$overlay","overlayTemplate","Response","validation","CardRefresh","warningMessage","successMessage","$html","unshift","history","pushState","$old","$new","$tmpl","$searchType","TABLE_BASIC_SEARCH_TYPE","replaceWith","initPage","_bootstrap$Tooltip$ge7","_fixLayoutHeightTimer","functions","Select2Defaults","Select2Utils","addEventHandlers","fldVar","addGridRow","_bootstrap$Tooltip$ge2","$tpl","$lastrow","suffix","$keycnt","FORM_KEY_COUNT_NAME","FORM_ROW_ACTION_NAME","attributes","$btn","dispose","after","scrollHeight","addOptionDialogShow","_args$evt2","lnk","addOptionDialog","_submitSuccess","_results","objName","API_OBJECT_NAME","re","linkField","dfs","displayFields","ffs","pfs","lfv","ff","txt","obj2","_results2","_results3","_fail","_submit","API_ADD_ACTION","nodeName","callback","_convert","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","applyTemplate","tmplId","classId","isModal","_parent$querySelector","subtmpl","rowspan","childNodes","cloneNode","views","textContent","hasTag","jsRenderAttributes","scripts","tmpl","creditcard_string","tempdigit","doubledigit","checkdigit","isValid","email_cnt","arEmails","DECIMAL_SEPARATOR","min_value","max_value","clearError","jquery","confirmDelete","modalDialogShow","createFilter","selectId","lookup","processResults","_data$records$length3","_data$records3","transport","failure","$select","_$$data$$dropdown$fin3","createModalLookup","_data$records$length2","_data$records2","_$$data$$dropdown$fin2","createSelect","_data$records$length","_data$records","_$$data$$dropdown$fin","deleteGridRow","infix","_bootstrap$Tooltip$ge3","rowidx","_delete","$keyact","disable2FA","preConfirm","API_2FA_ACTION","API_2FA_RESET","_result$error8","_result$error9","emailDialogShow","emailDialog","_e$target$querySelect","_$$closest$find$data","MAX_EMAIL_RECIPIENT","hdr","enable2FA","TWO_FACTOR_AUTHENTICATION_TYPE","API_2FA_SHOW","_result$error4","imageUrl","showLoaderOnConfirm","isLoading","getConfirmButton","disableInput","getImage","onload","enableInput","getInput","API_2FA_VERIFY","Error","showValidationMessage","_result$error3","_result$error7","inputValue","account","API_2FA_SEND_OTP","_result$error5","_result$error6","fixLayoutHeight","layout","formatCurrency","CURRENCY_FORMAT","formats","getLocaleFromPlatform","NUMBERING_SYSTEM","numeralSystem","delimiters","thousands","GROUPING_SEPARATOR","decimal","currency","CURRENCY_SYMBOL","formatNumber","NUMBER_FORMAT","formatPercent","PERCENT_FORMAT","formatTimeSpan","allDay","to","equals","startOf","minus","interval","days","isInteger","Intl","NumberFormat","resolvedOptions","getQueryBuilderFilterInput","rule","_document$getElementB","_span$innerHTML$repla","span","queryBuilderErrorClass","$0","$1","$2","getQueryBuilderFilterValidation","$value","errors","operator","nb_inputs","$invalid","getQueryBuilderValueSetter","getSearchParam","htmlEncode","importDialogShow","_args$evt6","_bootstrap$Tooltip$ge5","importDialog","sse","$dropzone","$bd","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","scnt","successCount","fcnt","failCount","filename","file","addRow","_index","_success","initialized","Tabulator","autoColumns","autoColumnsDefinitions","definitions","column","headerSort","resizable","visible","headerSortTristate","formatter","textOverflow","getRow","getData","importTabulatorOptions","importComplete","_sse","fileResults","files","fileResult","rollbacked","IMPORT_MAX_FAILURES","saveImport","importFail","_sse2","_table2","clearData","API_ACTION_NAME","API_IMPORT_ACTION","API_FILE_TOKEN_NAME","EventSource","addEventListener","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXTENSIONS","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","dropZone","messages","maxFileSize","maxNumberOfFiles","minFileSize","SESSION_ID","_data$result","importfiles","filetoken","_table","importFiles","processfail","progressall","loaded","total","uploadProgress","_this$querySelector","_table3","_table4","removeAttribute","_e$target12","$tables","initPanels","renderJsTemplates","_localStorage$getItem","inputs","$rpt","mh","toggleGroup","USE_JAVASCRIPT_MESSAGE","inlineAction","_args$evt","$detached","ewAction","$record","curindex","_always","_deleted","_disableInlineButtons","_enableInlineButtons","_getTable","_updateRowIndexes","inline","rowtype","Promise","resolve","prepend","$main","ROWTYPE_VIEW","ROWTYPE_ADD","returnUrl","_$grid$data","isFunction","isMobile","_args$evt3","_bootstrap$Tooltip$ge4","_args$evt4","_args$evt5","_$dlg$data","_$dlg$data2","modalDialog","size","_caption","$lnk","caption","_hide","handleResult","_lnk$closest","_lnk$closest2","_tabPane$parentNode","btnId","tabPane","navItem","_current","view","_createButtons","_button","_return","_resp$headers$get","resp","isJson","hasErrors","lnkData","$dlglnk","stopImmediatePropagation","Modal","_focustrap","__handleFocusin","_handleFocusin","_e$target10","Accept","parseTime","removeSpaces","sameString","selectAllKeys","selectKey","chk","sendOTP","_result$error11","_result$error12","setActiveUser","setLanguage","setSearchType","searchType","phraseId","setSessionTimer","timeoutTime","keepAliveTimer","counter","keepAlive","API_SESSION_ACTION","token","setTimer","resetTimer","_timer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","doTimeout","TIMEOUT_URL","timeout","_keepAliveTimer","timerInterval","timerProgressBar","setInterval","getHtmlContainer","sec","timeleft","round","getTimerLeft","willClose","clearInterval","dismiss","DismissReason","_ew$vars$login","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAliveInterval","MIN_SESSION_KEEP_ALIVE_INTERVAL","showBackupCodes","showDenyButton","showLoaderOnDeny","denyButtonText","denyButton","disableButtons","API_2FA_BACKUP_CODES","codes","enableButtons","preDeny","getDenyButton","API_2FA_NEW_BACKUP_CODES","showDrillDown","ctrlKey","spinnerTemplate","draggableOptions","boundary","cache","$tip","responseText","_result$error13","_result$error14","setContent","sortUrl","sortType","shiftKey","ctrl","submitAction","_window$msg","isPostBack","isMultiple","isDismissed","toggleChat","API_CHAT_ACTION","_result$error10","idx","toggleLayout","_bootstrap$Tooltip$ge6","togglePassword","$i","toggleSearchOperator","updateChart","$debug","updateDropdownPosition","prev","nid","$ft","$fn","$fa","$label","_confirmDelete","confirm","uploadUrl","API_JQUERY_UPLOAD_ACTION","_downloadTemplate","_uploadTemplate","formData","session","deepAssign","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","uploadOptions","MULTIPLE_UPLOAD_SEPARATOR","fid","indexOf","_data$files","l","_data$files2","_data$result2","_data$files3","valueChanged","fobj","fld","bool","oldEl","fnEl","fullCalendar$1","fullCalendar","calendar","updateTable","eventFields","addUrl","viewUrl","editUrl","deleteUrl","copyUrl","fullCalendarOptions","eventPopoverOptions","processJson","convertValue","_calendar$getEventByI","getEventById","addEvent","curEvent","groupId","setStart","setEnd","setAllDay","setExtendedProp","setProp","processEvent","info","relatedEvents","apiAction","API_EDIT_ACTION","processRequest","revert","reject","toPlainObject","collapseExtendedProps","toISOString","apiUrl","getFldParm","currentTable","urlAddId","addEventDialogShow","startStr","endStr","startFld","endFld","viewEventDialogShow","customButtons","headerToolbar","bsDropdown","getOrCreatePopover","Default","getOrCreateInstance","seq","shift","_Array$from$find$repl","_Array$from$find","popoverClass","_templateFactory","generateGetBoundingClientRect","y","rect","getBoundingClientRect","jsEvent","offsetX","offsetY","height","right","bottom","virtualElement","useContextMenu","bsToggle","clearMenus","_menu","eventId","editEventDialogShow","deleteEvent","drop","draggedEl","eventReceive","eventDragStart","_bootstrap$Popover$ge","eventDrop","eventResize","eventClick","button","extendedProps","_bootstrap$Popover$ge2","open","usePopover","_getOrCreatePopover","showViewPageOnEventClick","eventMouseEnter","_bsDropdown","_getOrCreatePopover2","_isShown","popoverViews","eventMouseLeave","_bsDropdown2","_bootstrap$Popover$ge3","FullCalendar","Calendar","isPushNotificationSupported","navigator","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","sendSubscriptionToServer","subscription","getKey","contentEncoding","PushManager","supportedContentEncodings","endpoint","btoa","fromCharCode","createSubscription","API_PUSH_NOTIFICATION_ACTION","API_PUSH_NOTIFICATION_SUBSCRIBE","serviceWorkerReg","serviceWorker","pushManager","subscribe","userVisibleOnly","applicationServerKey","PUSH_SERVER_PUBLIC_KEY","getSubscription","setSubscription","inst","subscribeNotification","Notification","permission","_await$getSubscriptio","requestPermission","_document$getElementB2","checkSubscription","unsubscribeNotification","res","unsubscribe","API_PUSH_NOTIFICATION_DELETE","register","SERVICE_WORKER","scope","webpush","pushNotificationDialogShow","pushDialog","successes","acc","cur","failures","inited","latlng","useSingleMap","showAllMarkers","useMarkerClusterer","ext","maps","singleMapHeight","singleMapWidth","showMapOnTop","createMap","createBounds","createMarkerClusterer","marker","createMarker","fitBounds","promises","address","geocodingDelay","geocode","latitude","longitude","coordinate","parseFloat","isNaN","createLatLng","all","MobileDetect","userAgent","mobile","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","pageShow","gotoPage","$page","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","google","setCenter","$bodies","$document","_$$offset","debugMode","DEBUG","animate","panel","Collapse","actions","_this$form","pageSize","zIndex","blueimp","processQueue","fileTypes","cropperOptions","cropperCanvasOptions","widget","processActions","cropImage","dfd","Deferred","that","cropperDialog","Cropper","getCroppedCanvas","toBlob","File","resolveWith","rejectWith","isFinite","isDate","periodic","clearTimeout","rec","_this$data$substring","_this$data","_this$data$substring2","_this$data2","toNumber","toDate","_ew$vars$tables","tables","clientFormatPattern","toJsDate","toJSDate","mutationList","mutation","MutationObserver","observe","_parent","attributeFilter","attributeOldValue","subtree","$chatWrapper","$chatCheck","$chatBtn","$chatClose","$chatComment","$chatCard","$chatHeader","$chatCollapse","$chatBody","$chatIframe","_Pace","running","iframe","queue","dequeue","contentDocument","isNil$1","isFunction$1","isNaNNumber$1","isFiniteNumber$1","multiplyByPowerOfTen$1","number","powerOfTenExponent","NaN","numAsString","indexOfE","log10$1","numberThatIsPowerOfTen","LOG10E","toObject$1","arr","entriesResolver","object","escapeRegexString$1","string","memoize$1","cacheKey","powerOf10LookupObject","currentValue","additionalZeros","isPowerOfTen$1","toBase","valueUnit","unitScale","base","scale","toBaseMultiplier","convertUnit","originUnit","targetUnit","valueAsBase","resolvedScale","conversionFactorFromBase","unitScaleDefinition","unit","convert","toBest","exclude","cutOffNumber","best","scaleUnit","absoluteResult","abs","scaleDefinition","stringRepeat$1","createUnitScaleFromLocaleAbbreviations$1","scaleItem","scaleItemIndex","formattedStringToNumber$1","inputString","_a","stringOriginal","stringWithLatinDigits","numericStringWithExtraInfo","numeralSystemMap","numericStringLength","numeralSystemToLatinSystemMap","digit","digitIndex","output","numericStringIndex","char","replaceNumeralSystemWithLatinNumbers","zeroFormat","nullFormat","decimalDelimiterFromLocale","stringWithDotDecimalDelimiter","abbreviationScalingFactor","abbreviations","abbreviationsSortedByLengthDesc","abbreviation","scapedAbbreviationForRegex","regexp","getScalingFactorFromAbbreviations","negativeFactor","numberAsString","locale$1","code","ordinal","merge","newObject","argsLength","isObject$1","isString$1","truncateNumber$1","ceil","getPatternParts","patternMask","isInEscapedPart","currentEscapedWord","parts","escaped","patternIncludes","patternRemoveEscapedText","patternReplace","searchValue","replaceValue","stringIncludes$1","signRule$1","patternWithoutEscapedText","negativeParentheses","forceSign","outputPatternMask","abbreviationRule$1","compactUnit","compact","abbreviationRegExpResult","compactAuto","splitStringInTwoParts$1","separator","indexOfSearchChar","countChars","stringChar","decimalPlacesRule$1","patternPrecisionPart","minimumFractionDigits","maximumFractionDigits","trimmedPatternPrecisionPart","patternPrecisionPartWithoutClosingBracket","precisionSplitted","fractionDigits","optionalDecimalPlacesRule$1","optionalFractionDigits","parsePattern$1","inputPattern","resolvedInputPattern","patternMaskAfterSignRule","signRules","patternMaskAfterAbbreviationRule","abbreviationRules","patternMaskAfterOptionalDecimalPlacesRule","optionalDecimalPlacesRules","outputPatternMaskWithoutEscapedText","decimalPlacesRules","minimumIntegerDigits","patternMaskIntegerPart","minimumIntegerDigitsRule","grouping","patternMaskAfterHandlingNumberPosition","numberPositionRule","patternMaskWithEnsuredSignPosition","addSignPositionIfItDoesNotExists","removeSignIfExists$1","valueAsString","rescaleRoundedValue$1","currentAbbreviationScale","patternRules","newScaledValue","newScaledValueUnit","scaleValueWithAbbreviation$1","forcedAbbreviationUnit","abbreviationsFromLocale","targetPowerOfTenExponent","k","scaleDefinitionFromLocale","closestPowerOfTenWithAvailableAbbreviation","distanceFromTarget","resolveForcedAbbreviationUnit","scaledValue","localizedUnit","roundNumber$1","precision","roundingFunction","resolvedPrecision","roundedScaledValue","numberToNonExponentialString$1","significand","exponent","exponentAsNumber","integerPartOfSignificand","fractionalPartOfSignificand","numberOfZerosToAdd","formatPositiveExponentResult","significandAsString","negativeExponentAbsoluteValue","outputIntegerPartOfSignificand","outputFractionalPartOfSignificand","firstCharInIntegerPart","formatNegativeExponentResult","numberToFixed$1","finiteNumber","fractionalPartOfValueAsString","targetFractionDigitsAmount","roundedValue","integerPart","fractionalPart","addTrailingZerosInFractionalPart","roundValueAndAddTrailingZeros$1","rounding","resolvedRoundingFunction","replaceDigitsWithNumeralSystem$1","numericString","addOrRemoveLeadingZerosToValue$1","valueIntegerPartWithoutSign","addSignInfoToFullFormattedNumber$1","fullFormattedValueWithoutSign","isValueNegative","isValueZero","splitNumberIntegerAndDecimalParts$1","decimalPart","addThousandsSeparatorToValueIntegerPart$1","valueIntegerPartWithLeadingZerosAndWithoutSign","digitGroupingStyle","thousandsSeparator","restDigitGrouping","groupingSubIteration","applyAbbreviationLocalizedUnitToPatternMask$1","abbreviationLocalizedUnit","hasAbbreviationInPatternMask","numberToFormattedNumber$1","resolvedValue","localizedAbbreviationUnit","scaledValueLocalizedUnit","rescaledValue","rescaledValueLocalizedUnit","scaleAndRoundValue","signedZero","valueAsStringWithoutSign","valueIntegerPartWithLeadingZeros","valueIntegerPartWithThousandsSeparator","numeralSystemFromLocale","integerPartWithNumeralSystem","decimalPartWithNumeralSystem","fullNumberWithNumeralSystem","patternMaskWithNumber","cleanPatternMask","bpsFormatter$1","regexps","unformat","patternWithEscapedBPS","timeFormatter$1","absoluteValue","sign","hours","minutes","seconds","isNegative","timeArray","reverse","decimalSuffixes","binarySuffixes","unformatRegex","concat","bytesDecimalScale","unitIndex","pow","bytesBinaryScale","currencySymbolsMap","EUR","USD","XCD","AUD","INR","BRL","CAD","XAF","CNY","NZD","XPF","GBP","HKD","ILS","JPY","KRW","XOF","MXN","TWD","VND","BUILT_IN_FORMATTERS$1","hasNotScalePercentageSymbolInPattern","scalePercentage","patternWithEscapedPercentage","currencyFromOptions","localizedCurrencySymbol","patternWithEscapedCurrencySymbol","_b","localizedOrdinal","patternWithEscapedOrdinal","scaledValueUnit","patternWithEscapedBytes","exponential","toExponential","patternWithoutExponential","roundHalfAwayFromZero$1","resolveFormatOptions$1","formatOptions","_c","roundingOption","resolveRoundingOption","resolvedLocale","optionsLocale","defaultLocale","resolveOptionsLocale","resolvedFormatters","optionsFormatters","formatters","defaultPattern","nanFormat","nonBreakingSpace","parse$1$1","inputStringWithNormalSpaces","unformatFunctionFromFormatters","matcher","getUnformatFunctionIfMatch","parse$1","round$1","format$1$1","resolvedPattern","resolvedValueAsNumber","formatFunctionFromFormatters","getFormatFunctionIfMatch","_errorFormat","arg2","arg3","withOptions","baseOptions","optionsFromArguments","unique$1","rtlCharsRanges","rtlDirCheck","appendLeftToRightMarkIfIsRTL","isRTL","languagesWith4DigitsGroupingStyle","getAbbreviations","languageTag","digits","intlFormatOptions","notation","useGrouping","compactDisplay","digitOfZero","digitOfOne","digitOfTwo","abbreviationResultForOne","toLocaleString","abbreviationResultForTwo","abbreviationOne","abbreviationTwo","resultIndex","_err","getLocaleFromPlatform$1$1","resolvedLanguageTag","localizedNumber","lookupObject","repeatedChar","digitsAsArray","getNumeralSystemDigits","resolvedDigits","localizedNumberWithoutDigits","groupingDelimiter","fractionDelimiter","getGroupingAndFractionDelimiters","groupingStyle","subIterationIndex","digitOrGroupingDelimiter","getGroupingStyle","shortAbbreviations","_abbreviationsLong","numerable","jQuery"],"sources":["dist/js/ew.js"],"sourcesContent":["/*!\n * JavaScript for PHPMaker v24.13.0\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function (ew$1, $$1, luxon) {\n  'use strict';\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n    this.hideTabs = false; // Hide all tabs\r\n    this.showPagerTop = false; // Show pager at top\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><i class=\"fa-solid fa-angle-left\"></i> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <i class=\"fa-solid fa-angle-right\"></i></a></li></ul></nav>'; // Pager template\r\n\r\n    // \"show\" handler (for disabled tabs)\r\n    var _show = function (e) {\r\n      e.preventDefault();\r\n    };\r\n\r\n    // Set properties\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $$1.isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substring(1); // Camel case\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    };\r\n\r\n    // DOM loaded\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".ew-nav\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".ew-nav\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .ew-nav > .nav\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").prev(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").next(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n      this.pageShow();\r\n    };\r\n\r\n    // Page show\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $$1(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".accordion-item\").each(function () {\r\n          var $this = $$1(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $$1(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    };\r\n\r\n    // Go to page by index\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-bs-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".accordion-item\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-bs-toggle=collapse]):not(.d-none)\").find(\"[data-bs-toggle=collapse]\").click();\r\n        }\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n    this.gotoPageByIndex = this.gotoPage;\r\n\r\n    // Go to page by element\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($$1(el).data(\"page\"), 10) || -1);\r\n    };\r\n\r\n    // Go to page by element's id or name or data-field attribute\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    };\r\n\r\n    // Toggle page\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".accordion-item\").toggle(\"d-none\", !show);\r\n      }\r\n    };\r\n\r\n    // Render\r\n    this.render = function () {\r\n      this.$form = $$1(\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt(this.dataset.page, 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-bs-toggle=tab]\");\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $$1($$1(this).attr(\"href\")).find(\".ew-map\").each(function () {\r\n            var m = ew.maps[this.id];\r\n            if (m != null && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-bs-toggle=collapse]\");\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses;\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $$1(this).find(\".ew-map\").each(function () {\r\n              var m = ew.maps[this.id];\r\n              if (m != null && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n      $$1(function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  let DateTime$1 = luxon.DateTime;\r\n\r\n  /**\r\n   * User level ID validator\r\n   */\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    let level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      let elId = document.getElementById(\"x_\" + id);\r\n      if (elId && el) {\r\n        let name = el.value.trim(),\r\n          level = parseInt(elId.value.trim(), 10);\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Required validator\r\n   */\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n      let $el = $$1(el),\r\n        $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) == null ? void 0 : _$el$data.substring(2))); // Find the row\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * File required validator\r\n   */\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      let elFn = document.getElementById(\"fn_\" + el.id);\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n  function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\"))\r\n      // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\")\r\n      // Change Password page\r\n      id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Between validator\r\n   */\r\n  function between(el) {\r\n    let x, z;\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    } else if (el.id.endsWith(\"_value_1\")) {\r\n      // QueryBuilder\r\n      x = document.getElementById(el.id.replace(/_value_1$/, \"_value_0\"));\r\n      z = document.getElementById(el.id.replace(/_value_1$/, \"_operator\"));\r\n    }\r\n    if (ew.hasValue(x) && $$1(z).val().toUpperCase() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Password strength validator\r\n   */\r\n  function passwordStrength(el) {\r\n    let $el = $$1(el);\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User name validator\r\n   */\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Password validator\r\n   */\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Email validator\r\n   */\r\n  function email(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Emails validator\r\n   */\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          emails: err\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * DateTime validator\r\n   * @param {string} format DateTime format\r\n   */\r\n  function datetime(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkDate(value, format)) {\r\n        return {\r\n          datetime: ew.language.phrase(\"IncorrectDate\").replace(/%s/g, format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Time validator\r\n   * @param {string} format Time format\r\n   */\r\n  function time(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkTime(value, format)) {\r\n        return {\r\n          time: ew.language.phrase(\"IncorrectTime\").replace(/%s/g, format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Float validator\r\n   */\r\n  function float(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        float: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n  function range(min, max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Integer validator\r\n   */\r\n  function integer(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US phone validator\r\n   */\r\n  function phone(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n  function zip(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Credit card validator\r\n   */\r\n  function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US SSN validator\r\n   */\r\n  function ssn(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * GUID validator\r\n   */\r\n  function guid(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectRegExp\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * URL validator\r\n   */\r\n  function url(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkUrl(value)) {\r\n      return {\r\n        url: ew.language.phrase(\"IncorrectUrl\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n    * Custom validator\r\n    * @param {Function} fn Function(value, ...args)\r\n    * @param {...any} args Additional arguments for the function\r\n    */\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        let value = ew.getValue(el);\r\n        if (fn(value, ...args)) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Captcha validator\r\n   */\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * reCaptcha validator\r\n   */\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) == null ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Min date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} min Min date\r\n   */\r\n  function minDate(min) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        minDateTime;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        let minValue = min.value,\r\n          minFormat = min.dataset.formatPattern;\r\n        if (min.value && min.dataset.formatPattern) minDateTime = ew.parseDate(minValue, minFormat);\r\n      } else if (min instanceof Date) {\r\n        minDateTime = DateTime$1.fromJSDate(min, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (min instanceof DateTime$1) {\r\n        minDateTime = min;\r\n      }\r\n      if (value && format && minDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime < minDateTime) return {\r\n          minDate: ew.language.phrase(\"IncorrectMinDate\").replace(\"%s\", ew.formatDateTime(minDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} max Max date\r\n   */\r\n  function maxDate(max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        maxDateTime;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        let maxValue = max.value,\r\n          maxFormat = max.dataset.formatPattern;\r\n        if (max.value && max.dataset.formatPattern) maxDateTime = ew.parseDate(maxValue, maxFormat);\r\n      } else if (max instanceof Date) {\r\n        maxDateTime = DateTime$1.fromJSDate(max, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (max instanceof DateTime$1) {\r\n        maxDateTime = max;\r\n      }\r\n      if (value && format && maxDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime > maxDateTime) return {\r\n          maxDate: ew.language.phrase(\"IncorrectMaxDate\").replace(\"%s\", ew.formatDateTime(maxDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Min validator\r\n   * @param {Function|HTMLElement|String|Number} min Min value\r\n   */\r\n  function min(min) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        minValue;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        minValue = ew.parseNumber(ew.getValue(min));\r\n      } else if (typeof min == \"string\") {\r\n        minValue = ew.parseNumber(min);\r\n      } else if (typeof min == \"number\") {\r\n        minValue = min;\r\n      }\r\n      if (typeof value == \"number\" && typeof minValue == \"number\") {\r\n        if (value < minValue) return {\r\n          min: ew.language.phrase(\"IncorrectMin\").replace(\"%s\", minValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max validator\r\n   * @param {Function|HTMLElement|String|Number} max Max value\r\n   */\r\n  function max(max) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        maxValue;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        maxValue = ew.parseNumber(ew.getValue(max));\r\n      } else if (typeof max == \"string\") {\r\n        maxValue = ew.parseNumber(max);\r\n      } else if (typeof max == \"number\") {\r\n        maxValue = max;\r\n      }\r\n      if (typeof value == \"number\" && typeof maxValue == \"number\") {\r\n        if (value > maxValue) return {\r\n          max: ew.language.phrase(\"IncorrectMax\").replace(\"%s\", maxValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    between,\n    captcha,\n    creditCard,\n    custom,\n    datetime,\n    email,\n    emails,\n    fileRequired,\n    float,\n    guid,\n    integer,\n    max,\n    maxDate,\n    min,\n    minDate,\n    mismatchPassword,\n    password,\n    passwordStrength,\n    phone,\n    range,\n    recaptcha,\n    regex,\n    required,\n    ssn,\n    time,\n    url,\n    userLevelId,\n    userLevelName,\n    username,\n    zip\n  };\n\n  function _typeof(o) {\r\n    \"@babel/helpers - typeof\";\r\n\r\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\r\n      return typeof o;\r\n    } : function (o) {\r\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\r\n    }, _typeof(o);\r\n  }\n\n  function toPrimitive(t, r) {\r\n    if (\"object\" != _typeof(t) || !t) return t;\r\n    var e = t[Symbol.toPrimitive];\r\n    if (void 0 !== e) {\r\n      var i = e.call(t, r || \"default\");\r\n      if (\"object\" != _typeof(i)) return i;\r\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\r\n    }\r\n    return (\"string\" === r ? String : Number)(t);\r\n  }\n\n  function toPropertyKey(t) {\r\n    var i = toPrimitive(t, \"string\");\r\n    return \"symbol\" == _typeof(i) ? i : String(i);\r\n  }\n\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\r\n    }\r\n  }\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    Object.defineProperty(Constructor, \"prototype\", {\r\n      writable: false\r\n    });\r\n    return Constructor;\r\n  }\n\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n    return self;\r\n  }\n\n  function _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n    return _setPrototypeOf(o, p);\r\n  }\n\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass);\r\n  }\n\n  function _defineProperty(obj, key, value) {\r\n    key = toPropertyKey(key);\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n    return obj;\r\n  }\n\n  /*\r\n   * Based on: jquery.batch v0.1.0\r\n   * Copyright 2013, Matt Morgan (@mlmorg)\r\n   * MIT license\r\n   */\r\n\r\n  // Global batch settings\r\n  $$1.batchSettings = {\r\n    type: 'POST',\r\n    contentType: 'application/json',\r\n    processData: false,\r\n    dataType: 'json',\r\n    toJSON: JSON.stringify,\r\n    parse: data => data\r\n  };\r\n\r\n  // Setup method\r\n  $$1.batchSetup = function (options) {\r\n    return $$1.extend($$1.batchSettings, options);\r\n  };\r\n\r\n  // $.batch class\r\n  // -------------\r\n\r\n  var Batch = $$1.batch = function (func, options) {\r\n    // Always instantiate a Batch class even if called without \"new\"\r\n    if (!(this instanceof Batch)) {\r\n      return new Batch(func, options);\r\n    }\r\n\r\n    // Shift arguments if func is an object\r\n    if (typeof func === 'object') {\r\n      options = func;\r\n      func = undefined;\r\n    }\r\n\r\n    // Default options\r\n    this.options = $$1.extend({}, $$1.batchSettings, options);\r\n\r\n    // Find a parent batch object, if we're nested\r\n    this.parent = $$1.ajaxSetup()._batch;\r\n\r\n    // Requests storage\r\n    this.requests = [];\r\n\r\n    // Add any requests\r\n    if (func) {\r\n      this.add(func);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Our methods\r\n  $$1.extend(Batch.prototype, {\r\n    // Method for adding requests to the batch\r\n    add: function (func) {\r\n      var _func$name;\r\n      // Set global _batch variable in jQuery.ajaxSettings\r\n      $$1.ajaxSetup({\r\n        _batch: this.parent || this\r\n      });\r\n\r\n      // Call the user's function\r\n      if ((_func$name = func.name) != null && _func$name.startsWith('bound ')) {\r\n        // Bound function\r\n        func();\r\n      } else {\r\n        func.call($$1.ajaxSetup()._batch);\r\n      }\r\n\r\n      // Remove the global _batch variable when we're not nested\r\n      if (!this.parent) {\r\n        $$1.ajaxSetup({\r\n          _batch: null\r\n        });\r\n      }\r\n      return this;\r\n    },\r\n    // Clear requests storage\r\n    clear: function () {\r\n      this.requests = [];\r\n    },\r\n    // Method for running the batch request\r\n    send: function (options) {\r\n      options = options || {};\r\n      var instance = this;\r\n\r\n      // When we're handling a child batch object, wrap any success functions\r\n      // and add them to the parent batch success\r\n      if (this.parent && options.success) {\r\n        var parentSuccess = this.parent.options.success;\r\n        this.parent.options.success = function (data, status, xhr) {\r\n          options.success(data, status, xhr);\r\n          if (parentSuccess) {\r\n            parentSuccess(data, status, xhr);\r\n          }\r\n        };\r\n      }\r\n\r\n      // When we're handling the top-most batch, send the request\r\n      else if (this.requests.length) {\r\n        // Map an array of requests\r\n        var requests = $$1.map(this.requests, function (request) {\r\n          return request.settings.data;\r\n        });\r\n\r\n        // Override the success callback\r\n        var success = options.success;\r\n        var childSuccess = this.options.success;\r\n        options.success = function (data, statusText, xhr) {\r\n          // Call our _deliver method to handle each individual batch request response\r\n          instance._deliver.call(instance, data, statusText);\r\n\r\n          // Child batch success functions\r\n          if (childSuccess) {\r\n            childSuccess(data, statusText, xhr);\r\n          }\r\n\r\n          // User's success function\r\n          if (success) {\r\n            success(data, statusText, xhr);\r\n          }\r\n        };\r\n\r\n        // Build the Ajax request options\r\n        options = $$1.extend({}, this.options, options);\r\n\r\n        // Create hash of requests to pass as the data in the Ajax request\r\n        if (!options.data) {\r\n          options.data = $$1.batchSettings.toJSON(requests);\r\n        }\r\n\r\n        // Call the request\r\n        return $$1.ajax(options);\r\n      }\r\n    },\r\n    // Private method to add a request to the batch requests array\r\n    _addRequest: function (xhr, settings) {\r\n      this.requests.push({\r\n        xhr: xhr,\r\n        settings: settings\r\n      });\r\n    },\r\n    // Delivers each batch request response to its intended xhr success/complete function\r\n    _deliver: function (data, statusText) {\r\n      var _responses$error;\r\n      var instance = this;\r\n\r\n      // Pass the response off to the user to parse out the responses\r\n      var responses = $$1.batchSettings.parse(data);\r\n      if (responses != null && (_responses$error = responses.error) != null && _responses$error.description) {\r\n        var _responses$error2;\r\n        ew$1.alert(responses == null || (_responses$error2 = responses.error) == null ? void 0 : _responses$error2.description);\r\n        return;\r\n      }\r\n\r\n      // Loop through the responses\r\n      $$1.each(responses, function (i, response) {\r\n        var _request$settings$com;\r\n        // Only work with batch requests that we have stored\r\n        if (!instance.requests[i]) {\r\n          return;\r\n        }\r\n\r\n        // Grab the stored request data\r\n        var request = instance.requests[i];\r\n\r\n        // Build statusText a la jQuery based on status code\r\n        request.xhr.statusText = statusText;\r\n\r\n        // Call the user/success function, if it exists. Pass the response body, status text and xhr.\r\n        if (statusText === 'success') {\r\n          var _request$settings$suc;\r\n          (_request$settings$suc = request.settings.success) == null || _request$settings$suc.call(request.xhr, response, statusText);\r\n        }\r\n\r\n        // Call complete\r\n        (_request$settings$com = request.settings.complete) == null || _request$settings$com.call(request.xhr, statusText);\r\n      });\r\n    }\r\n  });\r\n\r\n  // $.ajax override\r\n  // ---------------\r\n\r\n  // Override jQuery.ajax to cancel any outgoing requests called within\r\n  // a $.batch() function and add them to the batch requests array for\r\n  // that batch instance\r\n  var $ajax = $$1.ajax;\r\n  $$1.ajax = function (url, options) {\r\n    // Shift arguments when options are passed as first argument\r\n    if (typeof url === 'object') {\r\n      options = url;\r\n      url = undefined;\r\n    }\r\n\r\n    // Set options object\r\n    options = options || {};\r\n\r\n    // Override the jQuery beforeSend method\r\n    var beforeSend = options.beforeSend;\r\n    options.beforeSend = function (xhr, settings) {\r\n      // Call the user's beforeSend function, if passed\r\n      if (beforeSend) {\r\n        var before = beforeSend(xhr, settings);\r\n\r\n        // Cancel request if user's beforeSend function returns false\r\n        if (before === false) {\r\n          return before;\r\n        }\r\n      }\r\n\r\n      // We're only worried about requests made within a $.batch function\r\n      // (aka they have a _batch object)\r\n      if (settings._batch) {\r\n        // Add request to batch\r\n        settings._batch._addRequest(xhr, settings);\r\n\r\n        // Cancel this request\r\n        return false;\r\n      }\r\n    };\r\n\r\n    // Run original $.ajax method for all other requests\r\n    return $ajax.call(this, url, options);\r\n  };\n\n  // Form class\r\n  function FormBase(id, pageId) {\r\n    let self = this,\r\n      $self = $$1(self);\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n    this.element = document.getElementById(id); // HTML form or div\r\n    this.$element = $$1(this.element); // jQuery object of the form or div\r\n    this.pageId = pageId;\r\n    this.htmlForm = null; // HTML form element\r\n    this.initSearchPanel = false; // Expanded by default\r\n    this.modified = false;\r\n    this.emptyRow = null; // Check empty row\r\n    this.multiPage = null; // Multi-page\r\n    this.autoSuggests = {}; // AutoSuggests\r\n    this.lists = {}; // Dynamic selection lists\r\n    this.batch = new Batch(); // For batch lookup\r\n    this.formKeyCountName = \"\"; // For list/grid pages\r\n    this.submitWithFetch = false; // Submit form with Fetch API and returns Promise\r\n    this.enableOnInit = false; // Disable form during init\r\n    this.filterList = null;\r\n\r\n    // Disable form\r\n    this.disableForm = function () {\r\n      document.body.style.cursor = \"wait\";\r\n      let form = this.getForm();\r\n      $$1(form.elements).filter(\":submit:not(.dropdown-toggle), .ew-submit\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    };\r\n\r\n    // Enable form\r\n    this.enableForm = function () {\r\n      let form = this.getForm(),\r\n        $elements = $$1(form.elements);\r\n      $elements.filter(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $elements.filter(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $elements.filter(\":submit:not(.dropdown-toggle), .ew-submit\").not(\".ew-disabled\") // Exclude submit buttons with .ew-disabled (disabled purposely)\r\n      .prop(\"disabled\", false).removeClass(\"disabled\");\r\n      this.trigger(\"enabled\");\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Append hidden element with form name\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n        $form = $$1(form),\r\n        $dp = $$1(el).closest(\".ew-form\"),\r\n        name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0])\r\n        // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $$1('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $$1('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    };\r\n\r\n    // Can submit\r\n    this.canSubmit = async function (e) {\r\n      var _await$this$validate, _this$validate;\r\n      var form = this.getForm(),\r\n        $form = $$1(form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n      if (((_await$this$validate = await ((_this$validate = this.validate) == null ? void 0 : _this$validate.call(this, e))) != null ? _await$this$validate : true) && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], [name*=_query_builder_rule_], .ew-template input, .ew-custom-option\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n        var $dps = $form.find(\"input[name=detailpage]\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value)[0];\r\n        });\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $$1(dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n        let args = {\r\n            form: form,\r\n            result: true\r\n          },\r\n          evt = $$1.Event(\"beforesubmit\", {\r\n            originalEvent: e\r\n          });\r\n        $form.trigger(evt, [args]);\r\n        let result = await args.result; // Support Promise<boolean|Object>\r\n        if (!evt.isDefaultPrevented() && (result === true || $$1.isObject(result) && result.value))\r\n          // Support Swal.fire()\r\n          return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // Submit\r\n    this.submit = async function (e) {\r\n      var _e$originalEvent;\r\n      let form = this.getForm(),\r\n        formAction = e == null || (_e$originalEvent = e.originalEvent) == null || (_e$originalEvent = _e$originalEvent.submitter) == null ? void 0 : _e$originalEvent.formAction;\r\n      if (formAction) {\r\n        formAction = ew.parseUrl(formAction).pathname;\r\n        form.setAttribute(\"action\", formAction);\r\n      }\r\n      if (await this.canSubmit(e)) {\r\n        if (this.submitWithFetch) {\r\n          let url = form.getAttribute(\"action\"),\r\n            method = form.method.toUpperCase(),\r\n            body = $$1(form).serialize();\r\n          return ew.fetch(url, {\r\n            method,\r\n            body\r\n          }).finally(() => this.enableForm()); // Return Promise\r\n        } else {\r\n          form.submit();\r\n        }\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n    };\r\n\r\n    // Get dynamic selection list by element name or id\r\n    this.getList = function (name) {\r\n      var _this$getElement;\r\n      if ($$1.isObject(name)) {\r\n        // Object\r\n        let obj = name;\r\n        name = obj.name || obj.id || \"\";\r\n        if (name.includes(\"query_builder_rule\")) name = obj.dataset.field;\r\n      }\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      if (this.lists[name]) return this.lists[name];\r\n      let field = (_this$getElement = this.getElement(name)) == null || (_this$getElement = _this$getElement.dataset.field) == null ? void 0 : _this$getElement.replace(/^x_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      return field ? this.lists[field] : {};\r\n    };\r\n\r\n    // Compile templates\r\n    this.compileTemplates = function () {\r\n      let lists = Object.values(this.lists);\r\n      for (let list of lists) {\r\n        if (list.template && $$1.isString(list.template)) list.template = $$1.templates(list.template);\r\n      }\r\n    };\r\n\r\n    // Get option template of dynamic selection list\r\n    this.getOptionTemplate = function (list) {\r\n      if (list.template && $$1.isString(list.template)) list.template = $$1.templates(list.template);\r\n      return list.template;\r\n    };\r\n\r\n    // Get the HTML form element\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        var _this$element, _this$element2;\r\n        if (((_this$element = this.element) == null ? void 0 : _this$element.tagName) == \"FORM\") {\r\n          // HTML form\r\n          this.htmlForm = this.element;\r\n        } else if (((_this$element2 = this.element) == null ? void 0 : _this$element2.tagName) == \"DIV\") {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.element.closest(\"form\");\r\n        }\r\n      }\r\n      return this.htmlForm;\r\n    };\r\n\r\n    // Get form element as single element\r\n    this.getElement = function (name) {\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    };\r\n\r\n    // Get form element(s) as single element or array of radio/checkbox\r\n    this.getElements = function (name) {\r\n      return ew.getElements(name, this.$element);\r\n    };\r\n\r\n    // Fix ID\r\n    this.fixId = function (id, multiple, rowindex) {\r\n      let t = \"\",\r\n        ar = id.split(\" \");\r\n      if (ar.length > 1) {\r\n        t = ar[0];\r\n        rowindex = \"\";\r\n        id = ar[1];\r\n      }\r\n      let prefix = $$1.isNumber(rowindex) ? \"x\" + rowindex + \"_\" : \"x_\"; // Add row index\r\n      id = id.startsWith(\"x_\") ? id.replace(/^x_/, prefix) // Field element name\r\n      : prefix + id; // Field var\r\n      if (multiple && !id.endsWith(\"[]\"))\r\n        // Add [] if select-multiple\r\n        id += \"[]\";\r\n      return t ? t + \" \" + id : id;\r\n    };\r\n\r\n    /**\r\n     * Update a selection list\r\n     * @param {string|HTMLElement} id - ID (Field param) or HTML element\r\n     * @param {Object} list - List\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {boolean} immediate - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateList = function (id, list, rowindex, immediate) {\r\n      var _list, _Object$entries$find;\r\n      (_list = list) != null ? _list : list = $$1.isString(id) // Find the list if not provided\r\n      ? (_Object$entries$find = Object.entries(this.lists).find(entry => entry[0] == id.replace(/^x_/, \"\"))) == null ? void 0 : _Object$entries$find[1] // String\r\n      : this.getList(id); // HTMLElement\r\n      if (list.template && $$1.isString(list.template))\r\n        // Compile template in case updateLists() called before init()\r\n        list.template = $$1.templates(list.template);\r\n      let form = this.element,\r\n        parents = list.parentFields.slice().map(parent => this.fixId(parent, false, rowindex)),\r\n        // Clone and fix index\r\n        ajax = list.ajax && !list.lookupOptions.length; // Has link table and no lookup cache\r\n      id = $$1.isString(id) ? this.fixId(id, list.multiple, rowindex) : id;\r\n      return !ajax || immediate ? ew.updateOptions.call(this, id, parents, ajax, false) // Non-Ajax (lookup cache or user values) or update immediately\r\n      : [id, parents.map(parent => ew.getOptionValues(parent, form)), ajax, false]; // Ajax (async) => to be batch updated\r\n    };\r\n\r\n    /**\r\n     * Update selection lists\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {bool} [immediate] - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateLists = function (rowindex, immediate) {\r\n      var _form$querySelector;\r\n      if (rowindex === null)\r\n        // rowindex == $rowindex$ == null\r\n        return;\r\n      if (this.pageId == \"grid\" && !$$1.isNumber(rowindex) && !$$1.isUndefined(rowindex)) return;\r\n      let form = this.getForm(); // Set up $element and htmlForm\r\n      if ((form == null || (_form$querySelector = form.querySelector(\"input#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\")\r\n        // Confirm page\r\n        return;\r\n      let selector = Object.entries(this.lists).map(_ref => {\r\n        let [id, list] = _ref;\r\n        return \"[name='\" + this.fixId(id, list.multiple, rowindex) + \"']\";\r\n      }).join();\r\n      if (selector && this.element.querySelector(selector))\r\n        // List found\r\n        Object.entries(this.lists).map(_ref2 => {\r\n          let [id, list] = _ref2;\r\n          return this.updateList(id, list, rowindex);\r\n        }) // Update each list\r\n        .filter(result => Array.isArray(result)) // Get ajax requests for batch update\r\n        .forEach(request => this.batch.add(ew.updateOptions.bind(this, ...request))); // Batch update async requests\r\n      // Update the Ajax lists\r\n      if (this.batch.requests.length) {\r\n        if (rowindex === undefined || immediate) {\r\n          // Called by form or update immediately (add blank row)\r\n          let deferreds = [],\r\n            batchSize = ew.ajaxBatchSize > 0 ? ew.ajaxBatchSize : 1;\r\n          while (this.batch.requests.length > batchSize) {\r\n            let b = new Batch();\r\n            b.requests = this.batch.requests.splice(0, batchSize);\r\n            deferreds.push(b.send({\r\n              url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n            }));\r\n          }\r\n          if (this.batch.requests.length > 0) deferreds.push(this.batch.send({\r\n            url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n          }));\r\n          $$1.when(...deferreds).then(() => $$1(document).trigger(\"updatedone\", [{\r\n            source: self,\r\n            target: form\r\n          }])).fail(error => console.log(error)).always(() => this.batch.clear());\r\n        }\r\n      } else {\r\n        $$1(document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }\r\n    };\r\n\r\n    // Create AutoSuggest\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    };\r\n\r\n    // Init editors\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    };\r\n\r\n    // Update textareas\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Destroy editor(s)\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Show error message\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    };\r\n\r\n    // Init file upload\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"input:file:not([name*='$rowindex$'])\").each(function (index) {\r\n        $$1.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    };\r\n\r\n    // Set up filters\r\n    this.setupFilters = function (e, filters) {\r\n      let id = this.id,\r\n        data = this.filterList ? this.filterList.data : null,\r\n        $sf = $$1(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n        $df = $$1(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n        $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n        $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n      let saveFilters = function (id, filters) {\r\n        if (ew.CLIENT_SEARCH_FILTER) {\r\n          localStorage.setItem(ew.PROJECT_NAME + \"_\" + id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SERVER_SEARCH_FILTER) {\r\n          document.body.style.cursor = \"wait\";\r\n          $$1.ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            var _result$;\r\n            if ((_result$ = result[0]) != null && _result$.success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            document.body.style.cursor = \"default\";\r\n          });\r\n        }\r\n      };\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt({\r\n          input: \"text\",\r\n          html: ew.language.phrase(\"EnterFilterName\")\r\n        }, name => {\r\n          name = ew.sanitize(name);\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n      if (filters.length) {\r\n        let $submenu = $$1('<ul class=\"dropdown-menu\"></ul>');\r\n        filters.forEach((filter, i, ar) => {\r\n          $$1('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            let index = this.querySelector(\"a[data-index]\").dataset.index;\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filter[0]), result => {\r\n              if (result) {\r\n                ar.splice(index, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $$1('<li><a class=\"dropdown-item ew-reset-filter-list\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            if (currentPageID == \"calendar\") {\r\n              // Post back\r\n              $$1(\"<form>\").attr({\r\n                method: \"post\",\r\n                action: ew.currentPage()\r\n              }).append($$1(\"<input type='hidden'>\").attr({\r\n                name: \"cmd\",\r\n                value: \"resetfilter\"\r\n              }), $$1(\"<input type='hidden'>\").attr({\r\n                name: ew.TOKEN_NAME_KEY,\r\n                value: ew.TOKEN_NAME\r\n              }),\r\n              // PHP\r\n              $$1(\"<input type='hidden'>\").attr({\r\n                name: ew.ANTIFORGERY_TOKEN_KEY,\r\n                value: ew.ANTIFORGERY_TOKEN\r\n              }),\r\n              // PHP\r\n              $$1(\"<input type='hidden'>\").attr({\r\n                name: \"filter\",\r\n                value: JSON.stringify(filter[1])\r\n              })).appendTo(\"body\").trigger(\"submit\");\r\n            } else {\r\n              // Refresh\r\n              let body = {\r\n                cmd: \"resetfilter\",\r\n                filter: JSON.stringify(filter[1])\r\n              };\r\n              ew.refresh(ew.fetch(ew.setLayout(ew.currentPage(), false), {\r\n                method: \"POST\",\r\n                body\r\n              }));\r\n            }\r\n          });\r\n        });\r\n        $$1('<li class=\"dropdown-divider\"></li>').insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    };\r\n\r\n    // Add event handler\r\n    this.on = function () {\r\n      $self.on(...arguments);\r\n    };\r\n\r\n    // Add event handler\r\n    this.one = function () {\r\n      $self.one(...arguments);\r\n    };\r\n\r\n    // Remove event handler\r\n    this.off = function () {\r\n      $self.off(...arguments);\r\n    };\r\n\r\n    // Trigger event\r\n    this.trigger = function () {\r\n      $self.trigger(...arguments);\r\n    };\r\n\r\n    // Init form\r\n    this.init = function () {\r\n      if (this._initiated) return;\r\n\r\n      // Check form\r\n      var form = this.getForm();\r\n      if (!form) return;\r\n      var $form = $$1(form);\r\n\r\n      // Compile templates\r\n      this.compileTemplates();\r\n\r\n      // Search form\r\n      if (/s(ea)?rch$/.test(this.id)) {\r\n        // Search panel\r\n        if (this.initSearchPanel && !ew.hasFormData(form)) $$1(\"#\" + this.id + \"_search_panel\").removeClass(\"show\");\r\n\r\n        // Hide search operator column\r\n        if (!$$1(\".ew-table .ew-search-operator\").text().trim()) $$1(\".ew-table .ew-search-operator\").parent(\"td\").hide();\r\n\r\n        // Search operators\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $$1(this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substring(2)).trigger(\"change\");\r\n        });\r\n      }\r\n\r\n      // Multi-page\r\n      if (this.multiPage) this.multiPage.render();\r\n\r\n      // HTML editors\r\n      loadjs.ready([\"editor\"], () => setTimeout(this.initEditors.bind(this), 0)); // Delay for custom template to apply first\r\n\r\n      // Dynamic selection lists\r\n      this.updateLists();\r\n\r\n      // Init file upload\r\n      this.initUpload();\r\n\r\n      // Submit/Cancel\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav a[data-bs-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $$1(e.target.getAttribute(\"href\")),\r\n            $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n            $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.off(\"submit.ew\").on(\"submit.ew\", function (e) {\r\n          // Bind submit event\r\n          let args = {\r\n              form: form,\r\n              result: self.submit(e)\r\n            },\r\n            evt = $$1.Event(\"aftersubmit\", {\r\n              originalEvent: e\r\n            });\r\n          self.trigger(evt, [args]);\r\n          return false; // Disable normal submission\r\n        });\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = this.dataset.href;\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n      this._initiated = true;\r\n\r\n      // Store form object as data\r\n      this.$element.data(\"form\", this);\r\n\r\n      // Enable form\r\n      if (this.enableOnInit || Array.from(form.elements).find(el => el.matches(\"button.disabled.enable-on-init\"))) this.enableForm();\r\n\r\n      // Trigger listeners\r\n      this.trigger(\"initiated\");\r\n    };\r\n\r\n    // Add to the global forms object\r\n    ew.forms.add(this);\r\n  }\n\n  /**\r\n   * Class Field\r\n   */\r\n  let Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n      _defineProperty(this, \"validators\", []);\r\n      _defineProperty(this, \"_validate\", true);\r\n      this.name = fldvar;\r\n      if (Array.isArray(validators)) {\r\n        for (let validator of validators) this.addValidator(validator);\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n      this.invalid = invalid;\r\n    }\r\n\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n    var _proto = Field.prototype;\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */;\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        let error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error = {\r\n          ...error,\r\n          ...err\r\n        };\r\n        this.invalid = true;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Clear all errors\r\n     */;\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n\r\n    /**\r\n     * Clear all validators\r\n     */;\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */;\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      let result = true;\r\n      this.clearErrors(); // Reset error\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (let validator of this.validators) {\r\n            let err = validator(this._element);\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Reset invalid property (on page load for Grid-Add/Edit)\r\n     */;\r\n    _proto.resetInvalid = function resetInvalid() {\r\n      var _this$_element, _this$_element$closes;\r\n      this.clearErrors();\r\n      if ((_this$_element = this._element) != null && (_this$_element = _this$_element.classList) != null && _this$_element.contains(\"is-invalid\") && !this._error) this.addError({\r\n        server: (_this$_element$closes = this._element.closest(ew.fieldContainerSelector)) == null || (_this$_element$closes = _this$_element$closes.querySelector(\".invalid-feedback\")) == null ? void 0 : _this$_element$closes.innerHTML\r\n      }); // Server side error\r\n    }\r\n\r\n    /**\r\n     * Update the error message to feedback element\r\n     */;\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      let err = this.errorMessage;\r\n      if (this._element && err) {\r\n        var _this$_element$closes2;\r\n        let feedback = (_this$_element$closes2 = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : _this$_element$closes2.querySelector(\".invalid-feedback\");\r\n        if (feedback) feedback.innerHTML = err;\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set focus\r\n     * @param {Object} options - Focus options\r\n     */;\r\n    _proto.focus = function focus(options) {\r\n      if (this._element) ew.setFocus(this._element, options);\r\n    }\r\n\r\n    /**\r\n     * Check if the field can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this._element;\r\n      return el && !(el.hidden && !el.tagName == \"SELECTION-LIST\" || el.readonly || el.disabled || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Check if focused\r\n     */;\r\n    _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function () {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n        return \"\";\r\n      }\r\n\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function () {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n\r\n      /**\r\n       * Set form element\r\n       */\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function () {\r\n        return this._element;\r\n      }\r\n\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */,\r\n      set: function (el) {\r\n        var _this$_element2;\r\n        this._element = el;\r\n        this._checkbox = (_this$_element2 = this._element) != null && (_this$_element2 = _this$_element2.id) != null && _this$_element2.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\").replace(/\\[\\]$/, \"\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function () {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }, {\r\n      key: \"focused\",\r\n      get: function () {\r\n        return this._element && this._element == document.activeElement;\r\n      }\r\n    }]);\r\n    return Field;\r\n  }();\n\n  /**\r\n   * Class Form\r\n   */\r\n  let Form = /*#__PURE__*/function (_FormBase) {\r\n    _inheritsLoose(Form, _FormBase);\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n      _defineProperty(_assertThisInitialized(_this), \"row\", {});\r\n      _defineProperty(_assertThisInitialized(_this), \"fields\", {});\r\n      _defineProperty(_assertThisInitialized(_this), \"validateRequired\", true);\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocus\", true);\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocusPreventScroll\", true);\r\n      _this.on(\"initiated\", function () {\r\n        let form = this.getForm();\r\n        if (form.classList.contains(\"ew-wait\")) {\r\n          this.one(\"enabled\", function () {\r\n            this.setInvalid();\r\n            this.tryFocus();\r\n          });\r\n          return;\r\n        }\r\n        this.setInvalid();\r\n        this.tryFocus();\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n    var _proto = Form.prototype;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */;\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */;\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (let field of fields) {\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */;\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        this._error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.addCustomError = function addCustomError(fldvar, msg, rowIndex) {\r\n      if (fldvar in this.fields) {\r\n        let field = this.fields[fldvar],\r\n          err = {\r\n            custom: msg\r\n          };\r\n        field.addError(err);\r\n        this.setFieldElement(fldvar, rowIndex);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     */;\r\n    /**\r\n     * Set focus to a HTML element\r\n     * @param {HTMLElement} el - HTML element to be focused\r\n     */\r\n    _proto.setFocus = function setFocus(el) {\r\n      let delay = this.makeVisible(el) ? Form.focusDelay : 0;\r\n      if (el && el != document.activeElement && el.focus) {\r\n        let preventScroll = !el.closest(\".modal-body\") && Form.autoFocusPreventScroll && this.autoFocusPreventScroll;\r\n        setTimeout(() => {\r\n          el.focus({\r\n            preventScroll\r\n          });\r\n        }, delay); // Focus after tab transition\r\n        this._focused = true;\r\n        this.trigger(\"focused\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set focus to the first field with error\r\n     */;\r\n    _proto.focus = function focus() {\r\n      if (!this.canFocus()) return;\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        var _this$_error2;\r\n        if (field.invalid || (_this$_error2 = this._error) != null && _this$_error2[fldvar]) {\r\n          this.getFocusable(field);\r\n          if (field.canFocus()) {\r\n            this.setFocus(field.element);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Get focuable field element\r\n     * @param {Field} field - Field object\r\n     */;\r\n    _proto.getFocusable = function getFocusable(field) {\r\n      var _field$element;\r\n      (_field$element = field.element) != null ? _field$element : field.element = this.getFieldElements(field.name);\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 0); // Inline-Add\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 1); // Inline-Edit or Grid-Add/Edit\r\n    }\r\n\r\n    /**\r\n     * Try set focus to a field\r\n     * @param {string|undefined|true} fieldName [undefined] - Field variable name. If undefined, find the first field. If true, always try to focus.\r\n     */;\r\n    _proto.tryFocus = function tryFocus(fieldName) {\r\n      if (!this.canFocus()) return;\r\n      if (!fieldName && (!Form.autoFocus || !this.autoFocus || this._focused)) return;\r\n      if (!fieldName && this.invalid) {\r\n        // Has error\r\n        this.focus();\r\n        return;\r\n      }\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        // Process detail forms\r\n        let form = this.getForm(),\r\n          detailpage = Array.from(form.querySelectorAll(\"input[name=detailpage]\")).find(dp => {\r\n            var _ew$forms$get;\r\n            return (_ew$forms$get = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get.invalid;\r\n          });\r\n        if (detailpage) {\r\n          detailpage.focus();\r\n          return;\r\n        }\r\n      }\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        if (typeof fieldName == \"string\" && fieldName !== fldvar) continue;\r\n        field.element = null; // Reset field element first so that it will get the first element\r\n        this.getFocusable(field);\r\n        if (field.canFocus()) {\r\n          this.setFocus(field.element);\r\n          return;\r\n        }\r\n      }\r\n      let input = this.element[ew.TABLE_BASIC_SEARCH]; // Quick Search input\r\n      if (this.id.endsWith(\"srch\") && input && input != document.activeElement) {\r\n        // Extended Search\r\n        input.focus({\r\n          preventScroll: Form.autoFocusPreventScroll && this.autoFocusPreventScroll\r\n        }); // Focus the Quick Search input\r\n        this._focused = true;\r\n        this.trigger(\"focused\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Check if the form can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this.element;\r\n      return el && !(el.hidden || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el - Focused element\r\n     */;\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n        return true;\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        let $pane = this.$element.closest(\".tab-pane\");\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) {\r\n          $pane.closest(\".ew-nav\").find(\"a[data-bs-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").trigger(\"click\");\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      var _rowIndex;\r\n      (_rowIndex = rowIndex) != null ? _rowIndex : rowIndex = this.getCurrentRowIndex();\r\n      if (rowIndex < 2)\r\n        // Regular pages (\"\"), Inline-Add (\"0\") or first row (\"1\")\r\n        this.value = null; // Reset\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n      let result = true;\r\n      for (let field of Object.values(this.fields)) {\r\n        field.element = this.getFieldElements(field.name, rowIndex);\r\n        this.row[field.name] = field.value; // Get field value\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      }\r\n      // Save the field values of the row\r\n      if (!this.value) {\r\n        this.value = {\r\n          ...this.row\r\n        };\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        let index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = {\r\n          ...this.row\r\n        };\r\n      }\r\n      this.focus();\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Key count (number|NaN)\r\n     */;\r\n    /**\r\n     * Validate\r\n     * @param {Event} e - Event\r\n     * @returns {bool}\r\n     */\r\n    _proto.validate = async function validate(e) {\r\n      var _form$querySelector, _form$querySelector2, _ref, _e$currentTarget;\r\n      if (!this.validateRequired) return true; // Ignore validation\r\n\r\n      let form = this.getForm();\r\n      if (((_form$querySelector = form.querySelector(\"#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") return true;\r\n      if (this.pageId == \"update\" && !ew.updateSelected(form)) {\r\n        ew.alert(ew.language.phrase(\"NoFieldSelected\"));\r\n        return false;\r\n      }\r\n      let addcnt = 0,\r\n        inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n        // Inline-Add\r\n        action = ((_form$querySelector2 = form.querySelector(\"#action\")) == null ? void 0 : _form$querySelector2.value) || ((_ref = (_e$currentTarget = e == null ? void 0 : e.currentTarget) != null ? _e$currentTarget : inlineAdd) == null ? void 0 : _ref.dataset.action),\r\n        keycnt = inlineAdd ? 0 : this.keyCount,\r\n        gridinsert = action == \"gridinsert\" || [\"insert\", \"confirm\"].includes(action) && keycnt,\r\n        // Grid-Add or Master/Detail-Add\r\n        startcnt = inlineAdd ? 0 : 1,\r\n        rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n      for (let i = startcnt; i <= rowcnt; i++) {\r\n        var _await$this$customVal, _this$customValidate;\r\n        let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n        form.dataset.rowindex = rowIndex;\r\n        if ([\"list\", \"grid\"].includes(this.pageId)) {\r\n          if (gridinsert ? !this.emptyRow(rowIndex) : true) addcnt++;else continue;\r\n        }\r\n\r\n        // Validate fields\r\n        if (!this.validateFields(rowIndex)) return false;\r\n\r\n        // Call customValidate event\r\n        if (!((_await$this$customVal = await ((_this$customValidate = this.customValidate) == null ? void 0 : _this$customValidate.call(this, form))) != null ? _await$this$customVal : true)) {\r\n          this.focus();\r\n          return false;\r\n        }\r\n      }\r\n      delete form.dataset.rowindex; // Reset\r\n\r\n      if (this.pageId == \"list\" && gridinsert && addcnt == 0) {\r\n        // No row added\r\n        ew.alert({\r\n          html: ew.language.phrase(\"NoAddRecord\"),\r\n          returnFocus: false\r\n        }); // Do not return focus\r\n        this.tryFocus(true);\r\n        return false;\r\n      }\r\n\r\n      // Process detail forms\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        let detailpages = form.querySelectorAll(\"input[name=detailpage]\");\r\n        for (let dp of detailpages) {\r\n          var _await$frm$validate;\r\n          let frm = ew.forms.get(dp.value);\r\n          if (!((_await$frm$validate = await (frm == null || frm.validate == null ? void 0 : frm.validate(e))) != null ? _await$frm$validate : true)) return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n\r\n    /**\r\n     * Get current row index (during validation)\r\n     * @returns {string} Row index\r\n     */;\r\n    _proto.getCurrentRowIndex = function getCurrentRowIndex() {\r\n      var _this$getForm$dataset;\r\n      return (_this$getForm$dataset = this.getForm().dataset.rowindex) != null ? _this$getForm$dataset : \"\";\r\n    }\r\n\r\n    /**\r\n     * Get field values of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getValue = function getValue(rowIndex) {\r\n      var _rowIndex2;\r\n      (_rowIndex2 = rowIndex) != null ? _rowIndex2 : rowIndex = this.getCurrentRowIndex();\r\n      let value = {};\r\n      for (let field of Object.values(this.fields)) {\r\n        var _field$element2;\r\n        (_field$element2 = field.element) != null ? _field$element2 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        value[field.name] = field.value; // Get field value\r\n      }\r\n      return value;\r\n    }\r\n\r\n    /**\r\n     * Get a field value of the specified row\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getFieldValue = function getFieldValue(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) {\r\n        var _rowIndex3, _field$element3;\r\n        (_rowIndex3 = rowIndex) != null ? _rowIndex3 : rowIndex = this.getCurrentRowIndex();\r\n        (_field$element3 = field.element) != null ? _field$element3 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        return field.value;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Get HTML elements for a field\r\n     * @param {string} name - Field name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.getFieldElements = function getFieldElements(name, rowIndex) {\r\n      var _rowIndex4;\r\n      (_rowIndex4 = rowIndex) != null ? _rowIndex4 : rowIndex = this.getCurrentRowIndex();\r\n      return this.getElements(\"x\" + rowIndex + \"_\" + name) ||\r\n      // By name with prefix\r\n      this.getElements(\"x\" + rowIndex + \"_\" + name + \"[]\") ||\r\n      // By name with prefix and []\r\n      this.getElements(name); // By name directly (e.g. email form)\r\n    }\r\n\r\n    /**\r\n     * Set the element property of the field object and return the field elements\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.setFieldElement = function setFieldElement(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) field.element = this.getFieldElements(field.name, rowIndex);\r\n      return field == null ? void 0 : field.element;\r\n    }\r\n\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex - Row index. If undefined, set for the whole form.\r\n     */;\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      let form = this.getForm(); // Get HTML form\r\n      if (typeof rowIndex === \"undefined\" && this.formKeyCountName) {\r\n        let inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n          // Inline-Add\r\n          keycnt = inlineAdd ? 0 : this.keyCount,\r\n          startcnt = inlineAdd ? 0 : 1,\r\n          rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n        for (let i = startcnt; i <= rowcnt; i++) {\r\n          let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n          this.setInvalid(rowIndex);\r\n        }\r\n      } else {\r\n        var _rowIndex5;\r\n        (_rowIndex5 = rowIndex) != null ? _rowIndex5 : rowIndex = \"\";\r\n        for (let field of Object.values(this.fields)) {\r\n          field.element = this.getFieldElements(field.name, rowIndex); // Always get element in case Grid-Add/Edit\r\n          if (rowIndex) field.resetInvalid(); // For Grid-Add/Edit\r\n          if (field.invalid) {\r\n            this.addError(field.name, field.error);\r\n            if (!this._focused) this.focus(); // Focus at the current row\r\n          } else {\r\n            continue;\r\n          }\r\n          ew.setInvalid(field.element);\r\n        }\r\n        // Process detail forms\r\n        if ([\"add\", \"edit\"].includes(this.pageId)) form.querySelectorAll(\"input[name=detailpage]\").forEach(dp => {\r\n          var _ew$forms$get2;\r\n          return (_ew$forms$get2 = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get2.setInvalid();\r\n        });\r\n      }\r\n    };\r\n    _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n\r\n      /**\r\n       * Check if invalid\r\n       */\r\n    }, {\r\n      key: \"invalid\",\r\n      get: function () {\r\n        return this._error || Object.values(this.fields).some(field => field.invalid);\r\n      }\r\n    }, {\r\n      key: \"keyCount\",\r\n      get: function () {\r\n        var _this$getForm$querySe;\r\n        let keycnt = this.formKeyCountName ? (_this$getForm$querySe = this.getForm().querySelector(\"#\" + this.formKeyCountName)) == null ? void 0 : _this$getForm$querySe.value : undefined; // Get key_count\r\n        return parseInt(keycnt, 10);\r\n      }\r\n    }]);\r\n    return Form;\r\n  }(FormBase);\r\n  _defineProperty(Form, \"autoFocus\", true);\r\n  _defineProperty(Form, \"autoFocusPreventScroll\", true);\r\n  _defineProperty(Form, \"focusDelay\", 200);\n\n  /**\r\n   * Class FormBuilder\r\n   */\r\n  let FormBuilder = /*#__PURE__*/function () {\r\n    function FormBuilder() {\r\n      _defineProperty(this, \"lists\", {});\r\n      _defineProperty(this, \"fields\", []);\r\n      _defineProperty(this, \"validateRequired\", false);\r\n      _defineProperty(this, \"multiPage\", false);\r\n      _defineProperty(this, \"submitWithFetch\", false);\r\n      _defineProperty(this, \"initSearchPanel\", false);\r\n      _defineProperty(this, \"enableOnInit\", false);\r\n    }\r\n    var _proto = FormBuilder.prototype;\r\n    // Set ID\r\n    _proto.setId = function setId(value) {\r\n      this.id = value;\r\n      return this;\r\n    }\r\n\r\n    // Set page ID\r\n    ;\r\n    _proto.setPageId = function setPageId(value) {\r\n      this.pageId = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists\r\n    ;\r\n    _proto.setLists = function setLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) this.lists = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists for query builder (Dynamic Selection Lists and AutoFill not supported since there can be multiple inputs for the same field)\r\n    ;\r\n    _proto.setQueryBuilderLists = function setQueryBuilderLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) {\r\n        for (let [id, list] of Object.entries(value)) value[id] = {\r\n          ...list,\r\n          ...{\r\n            autoFillTargetFields: [],\r\n            childFields: [],\r\n            filterFieldVars: [],\r\n            filterFields: [],\r\n            parentFields: []\r\n          }\r\n        };\r\n        this.lists = value;\r\n      }\r\n      return this;\r\n    }\r\n\r\n    // Add list\r\n    ;\r\n    _proto.addList = function addList(name, value) {\r\n      this.lists[name] = value;\r\n      return this;\r\n    }\r\n\r\n    // Set fields\r\n    ;\r\n    _proto.setFields = function setFields(value) {\r\n      if (Array.isArray(value)) this.fields = value;\r\n      return this;\r\n    }\r\n\r\n    // Add field\r\n    ;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!this.fields.find(field => field[0] == fldvar)) this.fields.push([fldvar, validators, invalid]);\r\n      return this;\r\n    }\r\n\r\n    // Add fields\r\n    ;\r\n    _proto.addFields = function addFields(value) {\r\n      if (Array.isArray(value)) this.fields = [...this.fields, ...value];\r\n      return this;\r\n    }\r\n\r\n    // Set validate\r\n    ;\r\n    _proto.setValidate = function setValidate(value) {\r\n      this.validate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set custom validate\r\n    ;\r\n    _proto.setCustomValidate = function setCustomValidate(value) {\r\n      this.customValidate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set validate required\r\n    ;\r\n    _proto.setValidateRequired = function setValidateRequired(value) {\r\n      this.validateRequired = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit\r\n    ;\r\n    _proto.setSubmit = function setSubmit(value) {\r\n      this.submit = value;\r\n      return this;\r\n    }\r\n\r\n    // Set form KeyCount name\r\n    ;\r\n    _proto.setFormKeyCountName = function setFormKeyCountName(value) {\r\n      this.formKeyCountName = value;\r\n      return this;\r\n    }\r\n\r\n    // Set empty row\r\n    ;\r\n    _proto.setEmptyRow = function setEmptyRow(value) {\r\n      this.emptyRow = value;\r\n      return this;\r\n    }\r\n\r\n    // Set multi page\r\n    ;\r\n    _proto.setMultiPage = function setMultiPage(value) {\r\n      this.multiPage = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit with Fetch API\r\n    ;\r\n    _proto.setSubmitWithFetch = function setSubmitWithFetch(value) {\r\n      this.submitWithFetch = value;\r\n      return this;\r\n    }\r\n\r\n    // Set filter list\r\n    ;\r\n    _proto.setFilterList = function setFilterList(value) {\r\n      this.filterList = value;\r\n      return this;\r\n    }\r\n\r\n    // Set initSearchPanel\r\n    ;\r\n    _proto.setInitSearchPanel = function setInitSearchPanel(value) {\r\n      this.initSearchPanel = value;\r\n      return this;\r\n    }\r\n\r\n    // Set enableOnInit\r\n    ;\r\n    _proto.setEnableOnInit = function setEnableOnInit(value) {\r\n      this.enableOnInit = value;\r\n      return this;\r\n    }\r\n\r\n    // Build\r\n    ;\r\n    _proto.build = function build() {\r\n      let form = new ew.Form(this.id, this.pageId);\r\n      if (Array.isArray(this.fields)) form.addFields(this.fields);\r\n      if (typeof this.validate == 'function') form.validate = this.validate;\r\n      if (typeof this.customValidate == 'function') form.customValidate = this.customValidate;\r\n      if (typeof this.emptyRow == 'function') form.emptyRow = this.emptyRow;\r\n      if (typeof this.submit == 'function') form.submit = this.submit;\r\n      if (this.formKeyCountName) form.formKeyCountName = this.formKeyCountName;\r\n      if (this.multiPage) form.multiPage = new ew.MultiPage(this.id);\r\n      if (this.enableOnInit) form.enableOnInit = true;\r\n      if (this.submitWithFetch) {\r\n        form.submitWithFetch = true;\r\n        form.on(\"aftersubmit\", (e, args) => ew.refresh(args == null ? void 0 : args.result, args == null ? void 0 : args.context));\r\n      }\r\n      if (this.filterList) form.filterList = this.filterList;\r\n      if (this.lists) form.lists = this.lists;\r\n      form.validateRequired = !!this.validateRequired;\r\n      form.initSearchPanel = !!this.initSearchPanel;\r\n      form.lists = this.lists;\r\n      return form;\r\n    };\r\n    return FormBuilder;\r\n  }();\n\n  // AjaxLookup class\r\n  let AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     * @param {string} settings.action - Ajax action: \"autosuggest\" or \"modal\"\r\n     */\r\n    function AjaxLookup(settings) {\r\n      var _this$list$parentFiel, _this$list$parentFiel2;\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n      this.elementId = settings.id; // Id\r\n      this.form = settings.form; // Form\r\n      if ($$1.isString(this.form))\r\n        // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n      if (!this.element)\r\n        // Element not found\r\n        return;\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n      this.list = this.form.getList(this.element);\r\n      let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n        rowindex = m ? m[1] : \"\";\r\n      this.parentFields = (_this$list$parentFiel = (_this$list$parentFiel2 = this.list.parentFields) == null ? void 0 : _this$list$parentFiel2.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf)) != null ? _this$list$parentFiel : []; // Parent field in the same table, add row index\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n      this.action = settings.action || \"autosuggest\";\r\n    }\r\n\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n    var _proto = AjaxLookup.prototype;\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      this.form.compileTemplates();\r\n      return this.list.template && !this.isAutoSuggest ? this.list.template.render(opt, ew.jsRenderHelpers) : ew.displayValue(opt, this.element) || opt[0];\r\n    }\r\n\r\n    /**\r\n     * Generate request\r\n     */;\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _data$ajax;\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n      (_data$ajax = data.ajax) != null ? _data$ajax : data.ajax = this.action;\r\n      if (this.parentFields.length > 0) this.parentFields.forEach((pf, i) => data[\"v\" + (i + 1)] = ew.getOptionValue(pf, this.formElement));\r\n      return data;\r\n    }\r\n\r\n    /**\r\n     * Get URL\r\n     */;\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      let params = new URLSearchParams({\r\n        q: query || \"\",\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $$1.isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */;\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */;\r\n    _proto.transform = function transform(data) {\r\n      let results = [];\r\n      if ((data == null ? void 0 : data.result) == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n      return results;\r\n    }\r\n\r\n    /**\r\n     * Convert options to Select2 data format\r\n     * @param {Object[]} options Options\r\n     * @returns {Object[]}\r\n     */;\r\n    _proto.toSelect2Data = function toSelect2Data(options) {\r\n      if (Array.isArray(options)) {\r\n        if (options.every(item => item.hasOwnProperty(\"gf\"))) {\r\n          // Has group by field\r\n          let groups = [...new Set(options.map(item => item.gf))];\r\n          return groups.map(group => {\r\n            return {\r\n              text: group,\r\n              children: options.filter(item => item.gf == group).map(item => {\r\n                return {\r\n                  id: item.lf,\r\n                  text: this.formatResult({\r\n                    lf: item.lf,\r\n                    df: item.df,\r\n                    df2: item.df2,\r\n                    df3: item.df3,\r\n                    df4: item.df4\r\n                  })\r\n                };\r\n              })\r\n            };\r\n          });\r\n        } else {\r\n          return options.map(item => {\r\n            return {\r\n              id: item.lf,\r\n              text: this.formatResult({\r\n                lf: item.lf,\r\n                df: item.df,\r\n                df2: item.df2,\r\n                df3: item.df3,\r\n                df4: item.df4\r\n              })\r\n            };\r\n          });\r\n        }\r\n      }\r\n      return options;\r\n    };\r\n    _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function () {\r\n        var _this$_isAutoSuggest;\r\n        (_this$_isAutoSuggest = this._isAutoSuggest) != null ? _this$_isAutoSuggest : this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n\r\n      /**\r\n       * Lookup options\r\n       */\r\n    }, {\r\n      key: \"options\",\r\n      get: function () {\r\n        return this.list.lookupOptions;\r\n      }\r\n    }]);\r\n    return AjaxLookup;\r\n  }();\n\n  // AutoSuggest class\r\n  let AutoSuggest = /*#__PURE__*/function (_AjaxLookup) {\r\n    _inheritsLoose(AutoSuggest, _AjaxLookup);\r\n    function AutoSuggest(settings) {\r\n      var _this;\r\n      _this = _AjaxLookup.call(this, settings) || this;\r\n      if (!_this.element)\r\n        // Element not found\r\n        return _assertThisInitialized(_this);\r\n      _this.input = _this.form.getElement(\"sv_\" + _this.elementId); // User input\r\n      if (!_this.input || _this.elementId.includes(\"$rowindex$\")) return _assertThisInitialized(_this);\r\n      let self = _assertThisInitialized(_this),\r\n        $input = $$1(_this.input),\r\n        $element = $$1(_this.element);\r\n\r\n      // Properties\r\n      _this.minWidth = settings.minWidth;\r\n      _this.maxHeight = settings.maxHeight;\r\n      _this.highlight = settings.highlight;\r\n      _this.hint = settings.hint;\r\n      _this.minLength = settings.minLength;\r\n      _this.templates = Object.assign({}, settings.templates);\r\n      _this.classNames = Object.assign({}, settings.classNames);\r\n      _this.delay = settings.delay; // For loading more results\r\n      _this.debounce = settings.debounce;\r\n      _this.display = settings.display || \"text\";\r\n      _this.forceSelection = settings.forceSelect;\r\n      _this.lineHeight = settings.lineHeight;\r\n      _this.paddingY = settings.paddingY;\r\n      _this.lookupAllDisplayFields = settings.lookupAllDisplayFields;\r\n      _this.$input = $input;\r\n      _this.$element = $element;\r\n\r\n      // Save instance\r\n      $element.data(\"autosuggest\", _assertThisInitialized(_this));\r\n\r\n      // Save initial option\r\n      if ($input.val() && $element.val()) _this.element.add($element.val(), $input.val(), true);\r\n\r\n      // Add events\r\n      $input.on(\"typeahead:select\", (e, d) => {\r\n        self.setValue(d[self.display]);\r\n      }).on(\"change\", () => {\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen() && !ta.menu.empty()) {\r\n          let $item = ta.menu.getActiveSelectable();\r\n          if ($item) {\r\n            // A suggestion is highlighted\r\n            let i = $item.index(),\r\n              val = self.element.options[i].text;\r\n            $input.typeahead(\"val\", val);\r\n          }\r\n        }\r\n        self.setValue();\r\n      }).on(\"blur\", () => {\r\n        // \"change\" fires before blur\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen()) ta.menu.close();\r\n      }).on(\"focus\", () => {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n        $element.removeClass(\"is-invalid\");\r\n      });\r\n\r\n      // Get suggestions\r\n      let async = !_this.options.length,\r\n        loadingMore = false,\r\n        timer;\r\n\r\n      // Option template (\"suggestion\" template)\r\n      let tpl = self.list.template || self.templates.suggestion;\r\n      if (tpl && $$1.isString(tpl)) tpl = $$1.templates(tpl);\r\n      if (tpl) self.templates.suggestion = tpl.render.bind(tpl);\r\n      if (async && !self.templates.footer) self.templates.footer = '<div class=\"tt-footer dropdown-item\"><div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase(\"LoadingMore\") + '</span></div></div>'; // \"footer\" template\r\n\r\n      let source = (query, syncResults, asyncResults) => {\r\n        if (async) {\r\n          if (timer) timer.cancel();\r\n          timer = $$1.later(_this.debounce, null, () => {\r\n            _this.recordCount = 0; // Reset\r\n            $$1.ajax(_this.prepare(query)).done(data => asyncResults(_this.transform(data)));\r\n          });\r\n        } else {\r\n          let records = _this.getSyncResults(query);\r\n          syncResults(_this.transform({\r\n            result: \"OK\",\r\n            totalRecordCount: records.length,\r\n            records\r\n          }));\r\n        }\r\n      };\r\n\r\n      // Create Typeahead\r\n      $$1(function () {\r\n        // Typeahead options and dataset\r\n        let options = {\r\n          highlight: self.highlight,\r\n          minLength: self.minLength,\r\n          hint: self.hint,\r\n          classNames: self.classNames\r\n        };\r\n        let dataset = {\r\n          name: self.form.id + \"-\" + self.elementId,\r\n          source,\r\n          async,\r\n          templates: self.templates,\r\n          display: self.display,\r\n          limit: async ? self.limit : Infinity\r\n        };\r\n        let args = [options, dataset];\r\n        // Trigger \"typeahead\" event\r\n        $element.trigger(\"typeahead\", [args]);\r\n        // Create Typeahead\r\n        self.typeahead = $input.typeahead.apply($input, args).off(\"blur.tt\").data(\"tt-typeahead\");\r\n        let menu = self.typeahead.menu,\r\n          $menu = menu.$node,\r\n          $dataset = $menu.find(\".tt-dataset\"),\r\n          suggestionHeight = () => $menu.find(\".tt-suggestion\").outerHeight(false);\r\n        if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n        $input.on(\"typeahead:rendered\", (e, suggestions) => {\r\n          let rendered = suggestions.length,\r\n            count = self.count;\r\n          if (count >= self.limit) {\r\n            let h = suggestionHeight();\r\n            if (h) $dataset.css(\"max-height\", h * self.limit);\r\n          }\r\n          if (rendered > 0) $dataset.scrollTop(suggestionHeight() * (count - rendered)); // Scroll to the first suggestion\r\n          if (async) $menu.find(\".tt-footer\").toggle(self.recordCount > count);\r\n        });\r\n        if (async) {\r\n          let loadingMoreTimer;\r\n          $dataset.on(\"scroll\", () => {\r\n            var _loadingMoreTimer;\r\n            (_loadingMoreTimer = loadingMoreTimer) == null || _loadingMoreTimer.cancel();\r\n            loadingMoreTimer = $$1.later(self.delay, null, () => {\r\n              let $footer = $menu.find(\".tt-footer\");\r\n              if (!$footer.is(\":hidden\") && !loadingMore) {\r\n                let currentOffset = $dataset.offset().top + $dataset.outerHeight(false),\r\n                  loadingMoreOffset = $footer.offset().top + $footer.outerHeight(false);\r\n                if (currentOffset + 20 > loadingMoreOffset) {\r\n                  // $footer shows more than 20px\r\n                  loadingMore = true;\r\n                  self.getMore().always(() => loadingMore = false);\r\n                } else {\r\n                  var _loadingMoreTimer2;\r\n                  (_loadingMoreTimer2 = loadingMoreTimer) == null || _loadingMoreTimer2.cancel();\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    // Set the selected item to the actual field\r\n    var _proto = AutoSuggest.prototype;\r\n    _proto.setValue = function setValue(v) {\r\n      v || (v = this.$input.val());\r\n      let index = this.element.options.findIndex(option => option.text == v);\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          this.$input.typeahead(\"val\", \"\").addClass(\"is-invalid\");\r\n          this.$element.next(\".invalid-feedback\").html(ew.language.phrase(\"ValueNotExist\"));\r\n          this.$element.addClass(\"is-invalid\").val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection)\r\n          // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n      if (v !== this.$element.attr(\"value\")) this.$element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    }\r\n\r\n    // Transform suggestion\r\n    ;\r\n    _proto.transform = function transform(data) {\r\n      let results = _AjaxLookup.prototype.transform.call(this, data).map(item => Object.assign({}, item, {\r\n        text: _AjaxLookup.prototype.formatResult.call(this, item)\r\n      }));\r\n      this.element.options = results.map(item => new ew.SelectionListOption(item.text, item.lf || item[0]));\r\n      return results;\r\n    }\r\n\r\n    // Get current suggestion count\r\n    ;\r\n    // Get suggestions from lookup cache\r\n    _proto.getSyncResults = function getSyncResults(query) {\r\n      if (this.options.length) {\r\n        let results = this.options.filter(item => {\r\n          if (this.lookupAllDisplayFields) {\r\n            let v = [item.df, item.df2, item.df3, item.df4].map(df => String(df).toLowerCase()).join(\" \");\r\n            return query.toLowerCase().split(\" \").filter(q => q !== \"\").every(q => v.includes(q));\r\n          } else {\r\n            return String(item.df).toLowerCase().startsWith(query);\r\n          }\r\n        });\r\n        this.recordCount = results.length;\r\n        return results;\r\n      }\r\n      return [];\r\n    }\r\n\r\n    // Get more suggestions by Ajax\r\n    ;\r\n    _proto.getMore = function getMore() {\r\n      let menu = this.typeahead.menu,\r\n        start = this.count,\r\n        settings = this.prepare(menu.query, start);\r\n      return $$1.ajax(settings).done(data => menu.datasets[0]._append(menu.query, this.transform(data)));\r\n    };\r\n    _createClass(AutoSuggest, [{\r\n      key: \"count\",\r\n      get: function () {\r\n        return this.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length || 0;\r\n      }\r\n    }]);\r\n    return AutoSuggest;\r\n  }(AjaxLookup);\n\n  /**\r\n   * Class Forms\r\n   */\r\n  let Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n    var _proto = Forms.prototype;\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var _ew$getForm;\r\n      if (!el) return null;\r\n      let id = $$1.isString(el) ? el : (_ew$getForm = ew.getForm(el)) == null ? void 0 : _ew$getForm.id;\r\n      return this._forms[id];\r\n    }\r\n\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */;\r\n    _proto.add = function add(f) {\r\n      if (this._forms[f.id] && this._forms[f.id] !== f) delete this._forms[f.id];\r\n      this._forms[f.id] = f;\r\n    }\r\n\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */;\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n    return Forms;\r\n  }();\n\n  let lang = ew.language.phrase(\"select2\");\r\n  var Select2Language = {\r\n    errorLoading: function () {\r\n      return lang.errorLoading;\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n      return lang.inputTooLong.replace(\"%s\", overChars);\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n      return lang.inputTooShort.replace(\"%s\", remainingChars);\r\n    },\r\n    loadingMore: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.loadingMore + '</span></div>';\r\n    },\r\n    maximumSelected: function (args) {\r\n      return lang.maximumSelected.replace(\"%s\", args.maximum);\r\n    },\r\n    noResults: function () {\r\n      return lang.noResults;\r\n    },\r\n    searching: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.searching + '</span></div>';\r\n    },\r\n    removeAllItems: function () {\r\n      return lang.removeAllItems;\r\n    },\r\n    removeItem: function () {\r\n      return lang.removeItem;\r\n    },\r\n    search: function () {\r\n      return lang.search;\r\n    }\r\n  };\n\n  let _defined$3 = $$1.fn.select2.amd.require._defined,\r\n    Utils$3 = _defined$3['select2/utils'];\r\n\r\n  /**\r\n   * Select2 decorator for Results\r\n   */\r\n  let Select2ResultsDecorator = /*#__PURE__*/function () {\r\n    function Select2ResultsDecorator() {}\r\n    var _proto = Select2ResultsDecorator.prototype;\r\n    _proto.render = function render(decorated) {\r\n      var $results = $$1('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n      if (this.options.get('multiple')) {\r\n        $results.attr('aria-multiselectable', 'true');\r\n      }\r\n      this.$results = $results;\r\n      return $results;\r\n    };\r\n    _proto.displayMessage = function displayMessage(decorated, params) {\r\n      var escapeMarkup = this.options.get('escapeMarkup');\r\n      this.clear();\r\n      this.hideLoading();\r\n      var $message = $$1('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n      if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n        // HTML //***\r\n        $message.append(params.message);\r\n      } else {\r\n        var message = this.options.get('translations').get(params.message);\r\n        $message.append(escapeMarkup(message(params.args)));\r\n      }\r\n      $message[0].className += ' select2-results__message';\r\n      this.$results.append($message);\r\n    };\r\n    _proto.append = function append(decorated, data) {\r\n      this.hideLoading();\r\n      if (data.results == null || data.results.length === 0) {\r\n        if (this.$results.children().length === 0) {\r\n          if (this.$element.data(\"updating\") && data.pagination.more) {\r\n            this.trigger('results:message', {\r\n              message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n            });\r\n            this.$element.one(\"updated\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n          } else {\r\n            this.trigger('results:message', {\r\n              message: 'noResults'\r\n            });\r\n          }\r\n        }\r\n        return;\r\n      }\r\n      data.results = this.sort(data.results);\r\n\r\n      //***\r\n      var cols = this.options.get('columns'),\r\n        len = data.results.length,\r\n        $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n      for (var d = 0; d < data.results.length; d++) {\r\n        var item = data.results[d];\r\n        var $option = this.option(item);\r\n        if (!$row.length || $row.children().length == cols) {\r\n          // Add new row\r\n          $row = $$1('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n          this.$results.append($row);\r\n        }\r\n        $row.append($option);\r\n        if (d == len - 1) {\r\n          // Last\r\n          var cnt = cols - $row.children().length;\r\n          for (var i = 0; i < cnt; i++) $row.append('<div class=\"' + this.options.get('cellClass') + '\"></div>');\r\n        }\r\n      }\r\n    };\r\n    _proto.option = function option(decorated, data) {\r\n      // var option = document.createElement('li');\r\n      var option = document.createElement('div'); //***\r\n      option.classList.add('select2-results__option');\r\n      option.classList.add('select2-results__option--selectable');\r\n      this.options.get('cellClass').split(\" \").forEach(c => option.classList.add(c)); //***\r\n\r\n      var attrs = {\r\n        'role': 'option',\r\n        'aria-selected': 'false'\r\n      };\r\n      var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n      if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n        attrs['aria-disabled'] = 'true';\r\n        option.classList.remove('select2-results__option--selectable');\r\n        option.classList.add('select2-results__option--disabled');\r\n      }\r\n      if (data.id == null) {\r\n        option.classList.remove('select2-results__option--selectable');\r\n      }\r\n      if (data._resultId != null) {\r\n        option.id = data._resultId;\r\n      }\r\n      if (data.title) {\r\n        option.title = data.title;\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   attrs.role = 'group';\r\n      //   attrs['aria-label'] = data.text;\r\n      //   option.classList.remove('select2-results__option--selectable');\r\n      //   option.classList.add('select2-results__option--group');\r\n      // }\r\n\r\n      for (var attr in attrs) {\r\n        var val = attrs[attr];\r\n        option.setAttribute(attr, val);\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   var $option = $(option);\r\n\r\n      //   var label = document.createElement('strong');\r\n      //   label.className = 'select2-results__group';\r\n\r\n      //   this.template(data, label);\r\n\r\n      //   var $children = [];\r\n\r\n      //   for (var c = 0; c < data.children.length; c++) {\r\n      //     var child = data.children[c];\r\n\r\n      //     var $child = this.option(child);\r\n\r\n      //     $children.push($child);\r\n      //   }\r\n\r\n      //   var $childrenContainer = $('<ul></ul>', {\r\n      //     'class': 'select2-results__options select2-results__options--nested',\r\n      //     'role': 'none'\r\n      //   });\r\n\r\n      //   $childrenContainer.append($children);\r\n\r\n      //   $option.append(label);\r\n      //   $option.append($childrenContainer);\r\n      // } else {\r\n      this.template(data, option);\r\n      // }\r\n\r\n      Utils$3.StoreData(option, 'data', data);\r\n      return option;\r\n    };\r\n    return Select2ResultsDecorator;\r\n  }();\n\n  let _defined$2 = $$1.fn.select2.amd.require._defined,\r\n    Utils$2 = _defined$2['select2/utils'];\r\n\r\n  /**\r\n   * Results for modal lookup\r\n   */\r\n  let ModalResults = /*#__PURE__*/function () {\r\n    function ModalResults() {}\r\n    var _proto = ModalResults.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n\r\n      // Remove handlers\r\n      (_container$listeners$ = container.listeners['results:select']) == null || _container$listeners$.pop();\r\n      this.$results.off('mouseup');\r\n      container.on('results:select', function (evt) {\r\n        var $highlighted = self.getHighlightedResults();\r\n        if ($highlighted.length === 0) {\r\n          return;\r\n        }\r\n        var data = Utils$2.GetData($highlighted[0], 'data');\r\n        if ($highlighted.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('select', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        }\r\n      });\r\n      this.$results.on('mousedown', '.select2-results__option--selectable', function (evt) {\r\n        this._mousedown = true;\r\n      });\r\n      this.$results.on('mouseup', '.select2-results__option--selectable', function (evt) {\r\n        if (!this._mousedown) return;\r\n        var $this = $$1(this);\r\n        var data = Utils$2.GetData(this, 'data');\r\n        if ($this.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n          return;\r\n        }\r\n        self.trigger('select', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      });\r\n    };\r\n    return ModalResults;\r\n  }();\n\n  /**\r\n   * Search box for modal lookup\r\n   */\r\n  let ModalSearch = /*#__PURE__*/function () {\r\n    function ModalSearch() {}\r\n    var _proto = ModalSearch.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      (_container$listeners$ = container.listeners['close']) == null || _container$listeners$.pop(); // Remove handler from Search\r\n\r\n      container.on('close', function () {\r\n        self.$search.attr('tabindex', -1).removeAttr('aria-controls').removeAttr('aria-activedescendant');\r\n      });\r\n    };\r\n    return ModalSearch;\r\n  }();\n\n  /**\r\n   * Dropdown search decorator\r\n   */\r\n  let KEYS = $.fn.select2.amd.require._defined['select2/keys'];\r\n  KEYS.PRINT_SCREEN = 44;\r\n  let DropdownSearchDecorator = /*#__PURE__*/function () {\r\n    function DropdownSearchDecorator() {}\r\n    var _proto = DropdownSearchDecorator.prototype;\r\n    _proto.handleSearch = function handleSearch(decorated, evt) {\r\n      var key = evt.which;\r\n\r\n      // Ignore events from modifier keys\r\n      if ([KEYS.TAB, KEYS.SHIFT, KEYS.CTRL, KEYS.ALT, KEYS.PRINT_SCREEN].includes(key)) {\r\n        return;\r\n      }\r\n      if (!this._keyUpPrevented) {\r\n        var input = this.$search.val();\r\n        this.trigger('query', {\r\n          term: input\r\n        });\r\n      }\r\n      this._keyUpPrevented = false;\r\n    };\r\n    return DropdownSearchDecorator;\r\n  }();\n\n  let AttachBody$2 = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody with popper\r\n   */\r\n  let Select2AttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(Select2AttachBody, _AttachBody);\r\n    // Constructor\r\n    function Select2AttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override _attachPositioningHandler\r\n    var _proto = Select2AttachBody.prototype;\r\n    _proto._attachPositioningHandler = function _attachPositioningHandler(decorated, container) {\r\n      var self = this;\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      var handler = () => {\r\n        self._positionDropdown();\r\n        self._resizeDropdown();\r\n      };\r\n      $$1(window).on(events.join(' '), handler);\r\n      container.$element.closest('.modal').on('scroll.select2.' + container.id, handler);\r\n    };\r\n    // Override _detachPositioningHandler\r\n    _proto._detachPositioningHandler = function _detachPositioningHandler(decorated, container) {\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      $$1(window).off(events.join(' '));\r\n      container.$element.closest('.modal').off('scroll.select2.' + container.id);\r\n    };\r\n    // Override _showDropdown\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$container[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    };\r\n    // Override _positionDropdown()\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null || _this$_popper2.update();\r\n    }\r\n\r\n    // Override destroy()\r\n    ;\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null || _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return Select2AttachBody;\r\n  }(AttachBody$2);\n\n  /**\r\n   * Select2 AttachBody decorator for modal lookup\r\n   */\r\n  let ModalAttachBody = /*#__PURE__*/function () {\r\n    function ModalAttachBody(decorated, $element, options) {\r\n      _defineProperty(this, \"$modal\", null);\r\n      options.set('dropdownParent', $$1(document.body));\r\n      decorated.call(this, $element, options);\r\n    }\r\n    var _proto = ModalAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      let self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown.removeClass('select2');\r\n      this.$container = $container;\r\n    };\r\n    _proto.render = function render(decorated) {\r\n      let $container = $$1('<span></span>');\r\n      let $dropdown = decorated.call(this);\r\n      $container.append($dropdown);\r\n      this.$dropdownContainer = $container;\r\n      return $container;\r\n    };\r\n    _proto._bindContainerResultHandlers = function _bindContainerResultHandlers(decorated, container) {\r\n      // These should only be bound once\r\n      if (this._containerResultsHandlersBound) {\r\n        return;\r\n      }\r\n      let self = this;\r\n      container.$modal = this.$modal;\r\n      container.on('results:all', function () {\r\n        var _self$$search$;\r\n        self._updateDropdown();\r\n        (_self$$search$ = self.$search[0]) == null || _self$$search$.focus();\r\n      });\r\n      container.on('results:append', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('results:message', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('select', function (e) {\r\n        var _e$originalEvent;\r\n        let target = (_e$originalEvent = e.originalEvent) == null ? void 0 : _e$originalEvent.currentTarget;\r\n        target == null || target.classList.add('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      container.on('unselect', function (e) {\r\n        var _e$originalEvent2;\r\n        let target = (_e$originalEvent2 = e.originalEvent) == null ? void 0 : _e$originalEvent2.currentTarget;\r\n        target == null || target.classList.remove('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      this._containerResultsHandlersBound = true;\r\n    };\r\n    _proto._updateDropdown = function _updateDropdown() {\r\n      if (!this.$modal.find(this.$dropdownContainer)[0]) this.$modal.find('.modal-body').children().detach().end().append(this.$dropdownContainer);\r\n    };\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$$modal;\r\n      let self = this,\r\n        oldValue = this.$element.val();\r\n      this.$dropdownContainer.appendTo(this.options.get('dropdownParent'));\r\n      (_this$$modal = this.$modal) != null ? _this$$modal : this.$modal = $$1('#ew-modal-lookup-dialog');\r\n      this._updateDropdown();\r\n      this.$modal.find('.modal-title').empty().append(ew.language.phrase('LookupTitle').replace('%s', this.$element.data('caption')));\r\n      this.$modal.find('.modal-footer button[data-value]').off().on('click', function () {\r\n        if (!$$1(this).data('value'))\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n      });\r\n      this.$modal.modal('show').on('hidden.bs.modal', function (event) {\r\n        self.$container.removeClass('select2-container--open');\r\n      }).draggable(this.options.get('draggableOptions'));\r\n    };\r\n    return ModalAttachBody;\r\n  }();\n\n  let AttachBody$1 = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(FilterAttachBody, _AttachBody);\r\n    // Constructor\r\n    function FilterAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    var _proto = FilterAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper;\r\n      (_this$_popper = this._popper) == null || _this$_popper.update();\r\n    }\r\n\r\n    // Override _resizeDropdown()\r\n    ;\r\n    _proto._resizeDropdown = function _resizeDropdown() {\r\n      var css = {\r\n        width: this.$container.outerWidth(false) + 'px'\r\n      };\r\n      if (this.options.get('dropdownAutoWidth')) {\r\n        css.minWidth = css.width;\r\n        css.position = 'relative';\r\n        css.width = 'auto';\r\n      }\r\n      this.$dropdown.css(css);\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _dropdownButton$close, _this$_popper2;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n\r\n      // Footer\r\n      let self = this,\r\n        oldValue = this.$element.val(),\r\n        $footer = $$1('#ew-filter-dropdown-footer').contents().clone();\r\n      $footer.find('.ew-filter-btn[data-value]').off('click.ew').on('click.ew', function (e) {\r\n        let value = $$1(this).data('value');\r\n        if (value) {\r\n          // OK\r\n          $$1(self.$element[0].form).triggerHandler('submit');\r\n        } else {\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n        }\r\n        self.$element.select2('close');\r\n      });\r\n      $footer.find('.ew-filter-clear').off('click.ew').on('click.ew', e => self.$element.data('select2').selection._handleClear(e));\r\n      let $filterDropdown = this.$dropdownContainer.find('.ew-filter-dropdown');\r\n      if (!$filterDropdown.find('.ew-filter-btn')[0]) $filterDropdown.append($footer);\r\n\r\n      // Popper\r\n      var dropdownButton = document.querySelector('.ew-filter-dropdown-btn[data-table=' + this.$element.data('table') + '][data-field=' + this.$element.data('field') + ']'),\r\n        reference = (_dropdownButton$close = dropdownButton.closest(\".ew-table-header-cell\")) != null ? _dropdownButton$close : dropdownButton.closest(\".ew-table-header-btn\");\r\n      (_this$_popper2 = this._popper) != null ? _this$_popper2 : this._popper = Popper.createPopper(reference, this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null || _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return FilterAttachBody;\r\n  }(AttachBody$1);\n\n  let AttachBody = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for dropdown\r\n   */\r\n  let DropdownAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(DropdownAttachBody, _AttachBody);\r\n    // Constructor\r\n    function DropdownAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    var _proto = DropdownAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$element.parent().find('.select2-container')[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null || _this$_popper2.update();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null || _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return DropdownAttachBody;\r\n  }(AttachBody);\n\n  let _defined$1 = $$1.fn.select2.amd.require._defined,\r\n    AllowClear$1 = _defined$1['select2/selection/allowClear'],\r\n    Utils$1 = _defined$1['select2/utils'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAllowClear = /*#__PURE__*/function (_AllowClear) {\r\n    _inheritsLoose(FilterAllowClear, _AllowClear);\r\n    function FilterAllowClear() {\r\n      return _AllowClear.apply(this, arguments) || this;\r\n    }\r\n    var _proto = FilterAllowClear.prototype;\r\n    // Override _handleClear\r\n    _proto._handleClear = function _handleClear(_, evt) {\r\n      // Ignore the event if it is disabled\r\n      if (this.isDisabled()) {\r\n        return;\r\n      }\r\n      var $clear = this.$selection.find('.select2-selection__clear');\r\n\r\n      // Ignore the event if nothing has been selected\r\n      if ($clear.length === 0) {\r\n        return;\r\n      }\r\n      evt.stopPropagation();\r\n      var data = Utils$1.GetData($clear[0], 'data');\r\n      var previousVal = this.$element.val();\r\n      this.$element.val(this.placeholder.id);\r\n      var unselectData = {\r\n        data: data\r\n      };\r\n      this.trigger('clear', unselectData);\r\n      if (unselectData.prevented) {\r\n        this.$element.val(previousVal);\r\n        return;\r\n      }\r\n      for (var d = 0; d < data.length; d++) {\r\n        unselectData = {\r\n          data: data[d]\r\n        };\r\n\r\n        // Trigger the `unselect` event, so people can prevent it from being\r\n        // cleared.\r\n        this.trigger('unselect', unselectData);\r\n\r\n        // If the event was prevented, don't clear it out.\r\n        if (unselectData.prevented) {\r\n          this.$element.val(previousVal);\r\n          return;\r\n        }\r\n      }\r\n      this.$element.trigger('input').trigger('change');\r\n    };\r\n    return FilterAllowClear;\r\n  }(AllowClear$1);\n\n  /**\r\n   * Select2 decorator for MultipleSelection\r\n   */\r\n  let Select2MultipleSelectionDecorator = /*#__PURE__*/function () {\r\n    function Select2MultipleSelectionDecorator() {}\r\n    var _proto = Select2MultipleSelectionDecorator.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      decorated.call(this, container, $container);\r\n      this.$selection.on('click', '.select2-selection__choice__remove', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    return Select2MultipleSelectionDecorator;\r\n  }();\n\n  /**\r\n   * Select2 decorator for SelectAdapter\r\n   */\r\n  let Select2DataAdapterDecorator = /*#__PURE__*/function () {\r\n    function Select2DataAdapterDecorator() {}\r\n    var _proto = Select2DataAdapterDecorator.prototype;\r\n    _proto.option = function option(decorated, data) {\r\n      var _data$element;\r\n      var text = data.text,\r\n        html = (_data$element = data.element) == null ? void 0 : _data$element.innerHTML,\r\n        $option = decorated.call(this, data);\r\n\r\n      // Check HTML\r\n      if (text.startsWith('<') && text.endsWith('>')) $option.html(text);else if (html && html != text) $option.html(html);\r\n      return $option;\r\n    };\r\n    return Select2DataAdapterDecorator;\r\n  }();\n\n  // Defined classes from select2\r\n  let _defined = $.fn.select2.amd.require._defined,\r\n    ResultsList = _defined['select2/results'],\r\n    SingleSelection = _defined['select2/selection/single'],\r\n    MultipleSelection = _defined['select2/selection/multiple'],\r\n    Placeholder = _defined['select2/selection/placeholder'],\r\n    AllowClear = _defined['select2/selection/allowClear'],\r\n    SelectionSearch = _defined['select2/selection/search'],\r\n    EventRelay = _defined['select2/selection/eventRelay'],\r\n    Utils = _defined['select2/utils'],\r\n    Translation = _defined['select2/translation'],\r\n    SelectData = _defined['select2/data/select'],\r\n    ArrayData = _defined['select2/data/array'],\r\n    AjaxData = _defined['select2/data/ajax'],\r\n    Tags = _defined['select2/data/tags'],\r\n    Tokenizer = _defined['select2/data/tokenizer'],\r\n    MinimumInputLength = _defined['select2/data/minimumInputLength'],\r\n    MaximumInputLength = _defined['select2/data/maximumInputLength'],\r\n    MaximumSelectionLength = _defined['select2/data/maximumSelectionLength'],\r\n    Dropdown = _defined['select2/dropdown'],\r\n    DropdownSearch = _defined['select2/dropdown/search'],\r\n    HidePlaceholder = _defined['select2/dropdown/hidePlaceholder'],\r\n    InfiniteScroll = _defined['select2/dropdown/infiniteScroll'],\r\n    // AttachBody = _defined['select2/dropdown/attachBody'],\r\n    MinimumResultsForSearch = _defined['select2/dropdown/minimumResultsForSearch'],\r\n    SelectOnClose = _defined['select2/dropdown/selectOnClose'],\r\n    CloseOnSelect = _defined['select2/dropdown/closeOnSelect'],\r\n    DropdownCSS = _defined['select2/dropdown/dropdownCss'],\r\n    TagsSearchHighlight = _defined['select2/dropdown/tagsSearchHighlight'],\r\n    Defaults = _defined['select2/defaults'];\r\n\r\n  // Override select2 Defaults\r\n  Defaults.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n      options.dataAdapter = Utils.Decorate(\r\n      // Override\r\n      options.dataAdapter, Select2DataAdapterDecorator);\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength);\r\n      }\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength);\r\n      }\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength);\r\n      }\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer);\r\n      }\r\n    }\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList;\r\n\r\n      // Override\r\n      if (options.columns > 0 && options.customOption) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, Select2ResultsDecorator);\r\n        if (options.iconClass && options.multiple && options.templateResult == ew.selectOptions.templateResult) {\r\n          options._templateResult = options.templateResult;\r\n          options.templateResult = result => result.loading ? result.text : '<div class=\"form-check-input ew-dropdown-check-input\"></div><label class=\"' + options.iconClass + ' ew-dropdown-check-label\">' + options._templateResult(result) + '</label>';\r\n        }\r\n      } else if (options.modal || options.filter) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, ModalResults);\r\n      }\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n      }\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n      }\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n      }\r\n      if (options.tags) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, TagsSearchHighlight);\r\n      }\r\n    }\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.modal || options.filter) {\r\n        options.dropdownAdapter = Utils.Decorate(Dropdown, DropdownSearch);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, ModalSearch);\r\n      } else {\r\n        options.dropdownAdapter = Dropdown;\r\n        if (!options.multiple) {\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearch);\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        }\r\n      }\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch);\r\n      }\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect);\r\n      }\r\n      if (options.dropdownCssClass != null) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS);\r\n      }\r\n      options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, options.modal ? ModalAttachBody : options.filter ? FilterAttachBody : options.dropdown ? DropdownAttachBody : Select2AttachBody // Override\r\n      );\r\n    }\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n        options.selectionAdapter = Utils.Decorate(\r\n        // Override\r\n        options.selectionAdapter, Select2MultipleSelectionDecorator);\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      }\r\n\r\n      // Add the placeholder mixin if a placeholder was specified\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder);\r\n      }\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, options.filter ? FilterAllowClear : AllowClear);\r\n      }\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch);\r\n      }\r\n      options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay);\r\n    }\r\n    options.translations = new Translation(Select2Language);\r\n    options.dir = ew.IS_RTL ? \"rtl\" : \"ltr\";\r\n    return options;\r\n  };\n\n  let currentUrl = new URL(window.location);\r\n  let forms = new Forms();\r\n  let $document$1 = $$1(document),\r\n    $body = $$1(\"body\");\r\n  let fieldContainerSelector = \".row, [id^=el_], [class^=el_]\";\r\n\r\n  // Set focus\r\n  Pace.on(\"done\", () => {\r\n    var _forms$get;\r\n    let form = document.querySelector(\".modal.show form.ew-form\") || document.querySelector(\"form.ew-form\");\r\n    (_forms$get = forms.get(form == null ? void 0 : form.id)) == null || _forms$get.tryFocus();\r\n  });\r\n\r\n  // Create select2\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.toSelect2Data(lookup.options);\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length, _data$records;\r\n          let self = this;\r\n          return {\r\n            results: lookup.toSelect2Data(lookup.transform(data)),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length = (_data$records = data.records) == null ? void 0 : _data$records.length) != null ? _data$records$length : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let args = {\r\n      name: options.name,\r\n      options\r\n    };\r\n    $document$1.trigger(\"select2\", [args]);\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(args.options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin;\r\n      (_$$data$$dropdown$fin = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\")[0]) == null || _$$data$$dropdown$fin.focus();\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n    if (options.minimumResultsForSearch === Infinity) {\r\n      $select.on(\"select2:opening select2:closing\", function () {\r\n        $$1(this).data(\"select2\").$dropdown.find(\".select2-search--dropdown\").addClass(\"select2-search--hide\");\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create modal lookup\r\n  function createModalLookup(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length2, _data$records2;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length2 = (_data$records2 = data.records) == null ? void 0 : _data$records2.length) != null ? _data$records$length2 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin2;\r\n      (_$$data$$dropdown$fin2 = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null || _$$data$$dropdown$fin2.focus();\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create table header filter\r\n  function createFilter(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length3, _data$records3;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length3 = (_data$records3 = data.records) == null ? void 0 : _data$records3.length) != null ? _data$records$length3 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin3;\r\n      (_$$data$$dropdown$fin3 = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null || _$$data$$dropdown$fin3.focus({\r\n        preventScroll: options.preventScroll\r\n      }); // Do not scroll on focus by default\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Init icon tooltip\r\n  function initIcons(e) {\r\n    var _e$target;\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document,\r\n      tooltipOptions = {\r\n        ...ew.tooltipOptions,\r\n        container: \"body\",\r\n        trigger: ew.IS_MOBILE ? \"manual\" : \"hover\"\r\n      };\r\n    $$1(el).find(\".ew-icon\").closest(\".btn, .ew-home, .ew-row-link:not(.dropdown-item)\").each(function () {\r\n      let $this = $$1(this);\r\n      if ($this.hasClass(\"dropdown-toggle\")) {\r\n        let $p = $this.closest(\".btn-group\");\r\n        if ($p.children(\".btn\").length == 1) {\r\n          $p.tooltip({\r\n            ...tooltipOptions,\r\n            title: this.dataset.title || this.title\r\n          }).on(\"mouseleave\", e => {\r\n            var _bootstrap$Tooltip$ge;\r\n            return (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(e.currentTarget)) == null ? void 0 : _bootstrap$Tooltip$ge.hide();\r\n          });\r\n          $this.next(\".dropdown-menu\").on(\"mouseover\", e => e.stopPropagation());\r\n        }\r\n      } else {\r\n        $this.tooltip(tooltipOptions);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Init password options\r\n  function initPasswordOptions(e) {\r\n    var _e$target2;\r\n    var el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n    if ($$1.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $$1(el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $$1(this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function (strength, percentage) {\r\n            var $pst = $$1(\"[id='\" + this.attr(\"data-password-strength\") + \"']\"),\r\n              // Do not use #\r\n              $pb = $pst.find(\".progress-bar\");\r\n            if (this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\",\r\n                min = ew.MIN_PASSWORD_STRENGTH,\r\n                valid = percentage >= min;\r\n              if (percentage < min * 0.25) {\r\n                $pb.addClass(\"text-bg-danger\").removeClass(\"text-bg-warning text-bg-info text-bg-success\");\r\n              } else if (percentage < min * 0.5) {\r\n                $pb.addClass(\"text-bg-warning\").removeClass(\"text-bg-danger text-bg-info text-bg-success\");\r\n              } else if (percentage < min * 0.75) {\r\n                $pb.addClass(\"text-bg-primary\").removeClass(\"text-bg-danger text-bg-warning text-bg-success\");\r\n              } else {\r\n                $pb.addClass(\"text-bg-success\").removeClass(\"text-bg-danger text-bg-warning text-bg-info\");\r\n              }\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > min * 0.5) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\");\r\n              this.data(\"validated\", valid);\r\n              if (valid) setValid(this[0]);\r\n            } else {\r\n              $pst.addClass(\"d-none\");\r\n              this.data(\"validated\", null);\r\n            }\r\n            $pst.width(this.outerWidth());\r\n          }\r\n        });\r\n      });\r\n    }\r\n    if ($$1.fn.pGenerator) {\r\n      $$1(el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $$1(this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function (pwd) {\r\n            $$1(\"#\" + this.attr(\"data-password-confirm\")).val(pwd);\r\n            $$1(\"#\" + this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action - Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|Object|URLSearchParams|FormData} query - Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n      params = query instanceof URLSearchParams ? query : new URLSearchParams(query),\r\n      qs = params.toString();\r\n    if ($$1.isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  }\r\n\r\n  /**\r\n   * Parse URL\r\n   * Note: .search is read only, always use .searchParams to change parameters\r\n   * @param {string} url - URL\r\n   * @returns {Object}\r\n   */\r\n  function parseUrl(url) {\r\n    var _pathname, _hash;\r\n    let pathname, search, hash;\r\n    [pathname, hash] = url.split(\"#\");\r\n    [pathname, search] = pathname.split(\"?\");\r\n    if (!search && pathname.includes(\"=\")) [pathname, search] = [\"\", pathname];\r\n    let obj = {\r\n      url: url,\r\n      pathname: (_pathname = pathname) != null ? _pathname : \"\",\r\n      hash: (_hash = hash) != null ? _hash : \"\",\r\n      searchParams: new URLSearchParams(search)\r\n    };\r\n    Object.defineProperty(obj, \"search\", {\r\n      // Read only\r\n      value: search,\r\n      writable: false,\r\n      enumerable: true\r\n    });\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Create URLSearchParams\r\n   * @param {*} params - search parameters\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function createSearchParams(params) {\r\n    try {\r\n      return new URLSearchParams(params);\r\n    } catch (e) {\r\n      console.log(e);\r\n      return new URLSearchParams();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get URL search parameters\r\n   * @param {string} url - URL\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function getSearchParams(url) {\r\n    return parseUrl(url).searchParams;\r\n  }\r\n\r\n  /**\r\n   * Get a search parameter from URL\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @returns {string} Value\r\n   */\r\n  function getSearchParam(url, name) {\r\n    return getSearchParams(url).get(name);\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameters\r\n   * @param {string} url - URL\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParams(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    obj.searchParams = mergeSearchParams(obj.searchParams, ...args);\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Merge URL search parameters\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function mergeSearchParams() {\r\n    let searchParams = new URLSearchParams();\r\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      args[_key2] = arguments[_key2];\r\n    }\r\n    for (const params of args) {\r\n      if ($$1.isObject(params) || $$1.isString(params) && params) {\r\n        // Note: Array is also object\r\n        let newParams = params instanceof URLSearchParams ? params : createSearchParams(params);\r\n        newParams.forEach((value, key) => searchParams.has(key) ? key.endsWith(\"[]\") ? searchParams.append(key, value) : searchParams.set(key, value) : searchParams.set(key, value));\r\n      }\r\n    }\r\n    return searchParams;\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameter\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @param {string} value - Value\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParam(url, name, value) {\r\n    return setSearchParams(url, {\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete search parameters from URL\r\n   * @param {string} url - URL\r\n   * @param {string[]} names - Names\r\n   * @returns {string} URL\r\n   */\r\n  function deleteSearchParam(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len3 = arguments.length, names = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\r\n      names[_key3 - 1] = arguments[_key3];\r\n    }\r\n    names.forEach(name => obj.searchParams.delete(name));\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Build URL\r\n   * @param {Object} obj Object { pathname, searchParams, hash }\r\n   * @returns {string} URL\r\n   */\r\n  function buildUrl(obj) {\r\n    let search = obj.searchParams.toString();\r\n    return obj.pathname + (obj.pathname && search ? \"?\" : \"\") + search + (obj.hash ? \"#\" + obj.hash : \"\");\r\n  }\r\n\r\n  /**\r\n   * Set layout parameter to URL\r\n   * Disable layout by adding \"layout=false\"\r\n   * @param {string} url - URL\r\n   * @param {string} value - Layout\r\n   * @returns {string} URL\r\n   */\r\n  function setLayout(url, value) {\r\n    return url && url != \"#\" ? setSearchParams(url, {\r\n      [ew.PAGE_LAYOUT]: String(value)\r\n    }) : url;\r\n  }\r\n\r\n  // Sanitize URL\r\n  function sanitizeUrl(url) {\r\n    let obj = parseUrl(url),\r\n      searchParams = obj.searchParams;\r\n    searchParams.forEach((value, key) => {\r\n      value = decodeURIComponent(value);\r\n      if ([\"<>\", \"<=\", \">=\", \">\", \"<\"].includes(value)) searchParams.set(key, value);else searchParams.set(key, ew.sanitize(value));\r\n    });\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  // Set session timer\r\n  function setSessionTimer() {\r\n    let timeoutTime, timer, keepAliveTimer, counter;\r\n    // Keep alive\r\n    let keepAlive = () => {\r\n      $$1.get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }).then(token => {\r\n        if (token && $$1.isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n          setTimer();\r\n        }\r\n      });\r\n    };\r\n    // Reset timer\r\n    let resetTimer = () => {\r\n      var _timer;\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = 0;\r\n      }\r\n      (_timer = timer) == null || _timer.cancel(); // Clear timer\r\n    };\r\n    // Redirect to TIMEOUT_URL\r\n    let doTimeout = () => {\r\n      resetTimer();\r\n      window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n    };\r\n    // Timeout\r\n    let timeout = () => {\r\n      var _keepAliveTimer;\r\n      (_keepAliveTimer = keepAliveTimer) == null || _keepAliveTimer.cancel(); // Stop keep alive\r\n      if (counter > 0) {\r\n        let timerInterval,\r\n          message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>').replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n        Swal.fire({\r\n          ...ew.sweetAlertSettings,\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: () => {\r\n            timerInterval = setInterval(() => {\r\n              let content = Swal.getHtmlContainer(),\r\n                min = content.querySelector(\".ew-session-counter-minute\"),\r\n                sec = content.querySelector(\".ew-session-counter-second\"),\r\n                timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          willClose: () => {\r\n            clearInterval(timerInterval);\r\n          }\r\n        }).then(result => {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            doTimeout();\r\n          }\r\n        });\r\n      } else {\r\n        doTimeout();\r\n      }\r\n    };\r\n    // Set timer\r\n    let setTimer = () => {\r\n      var _ew$vars$login;\r\n      if (ew.SESSION_TIMEOUT > 0 && window.location.pathname != ((_ew$vars$login = ew.vars.login) == null || (_ew$vars$login = _ew$vars$login.login) == null ? void 0 : _ew$vars$login.url)) {\r\n        // Set session timeout except for login page\r\n        resetTimer(); // Reset timer first\r\n        timer = $$1.later(timeoutTime * 1000, null, timeout);\r\n      }\r\n    };\r\n    if (ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN) {\r\n      // Keep alive\r\n      let keepAliveInterval = Math.max(ew.SESSION_KEEP_ALIVE_INTERVAL || ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN, ew.MIN_SESSION_KEEP_ALIVE_INTERVAL);\r\n      keepAliveTimer = $$1.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      setTimer();\r\n    }\r\n  }\r\n\r\n  // Init export links\r\n  function initExportLinks(e) {\r\n    var _e$target3;\r\n    let $el = $$1((_e$target3 = e == null ? void 0 : e.target) != null ? _e$target3 : document);\r\n    if (e != null && e.target && !$el.find(\"a.ew-export-link[href]\")[0])\r\n      // Export links not found\r\n      $el = $el.closest(\".content\"); // For refresh\r\n    $el.find(\"a.ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").off(\"click\").on(\"click\", function (e) {\r\n      let href = this.href;\r\n      if (href && href != \"#\") fileDownload(href, getchartParams());\r\n      e.preventDefault();\r\n    });\r\n    $el.find(\"a.ew-export-link[href].ew-print, a.ew-export-link[href].ew-xml\").each(function () {\r\n      let url = new URL(this.href);\r\n      url.searchParams.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      url.searchParams.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      this.href = url.pathname + url.search; // Add token name and antiforgery token // PHP\r\n    });\r\n  }\r\n\r\n  // Init multi-select checkboxes\r\n  function initMultiSelectCheckboxes(e) {\r\n    var _e$target4;\r\n    var el = (_e$target4 = e == null ? void 0 : e.target) != null ? _e$target4 : document,\r\n      $el = $$1(el),\r\n      $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n    var _update = function (id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n        cnt = $els.length,\r\n        len = $els.filter(\":checked\").length;\r\n      $$1(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n    $cbs.on(\"click\", e => _update(e.target.name.split(\"_\")[0]));\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each((i, el) => _update(el.id)); // Init\r\n  }\r\n\r\n  // Get error from response\r\n  function getError(result) {\r\n    var _result$error, _result$error2;\r\n    return result && (((_result$error = result.error) == null ? void 0 : _result$error.description) || ((_result$error2 = result.error) == null ? void 0 : _result$error2.message) || $$1.isString(result.error) && result.error || result.failureMessage ||\r\n    // Check this first\r\n    result.success === false && result.message || null);\r\n  }\r\n\r\n  // Download file\r\n  function fileDownload(href, data) {\r\n    let isHtml = href.includes(\"export=html\") || href.includes(getApiUrl([ew.API_EXPORT_ACTION, \"html\"])),\r\n      swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(href, {\r\n          method: data ? \"POST\" : \"GET\",\r\n          body: data || null\r\n        }).then(async response => {\r\n          let ct = response.headers.get(\"Content-Type\");\r\n          if (ct != null && ct.includes(\"json\")) {\r\n            var _getError;\r\n            let result = await response.json(),\r\n              error = (_getError = getError(result)) != null ? _getError : ew.language.phrase(\"FailedToExport\");\r\n            if (error) {\r\n              swal.hideLoading();\r\n              swal.update({\r\n                html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n                showConfirmButton: true\r\n              });\r\n              $document$1.trigger(\"export\", [{\r\n                type: \"fail\",\r\n                url: href\r\n              }]);\r\n            }\r\n          } else {\r\n            let data = isHtml ? await response.text() : await response.blob(),\r\n              url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n                type: \"text/html\"\r\n              }) : data),\r\n              a = document.createElement(\"a\"),\r\n              cd = response.headers.get(\"Content-Disposition\"),\r\n              m = cd == null ? void 0 : cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n            a.style.display = \"none\";\r\n            a.href = url;\r\n            if (m) a.download = m[3] || m[4];\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              url: href,\r\n              objectUrl: url\r\n            }]);\r\n            URL.revokeObjectURL(url);\r\n            swal.close();\r\n          }\r\n        }).catch(error => {\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            url: href\r\n          }]);\r\n        }).finally(() => {\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            url: href\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Lazy load images\r\n  function lazyLoad(e) {\r\n    var _e$target5;\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = (_e$target5 = e == null ? void 0 : e.target) != null ? _e$target5 : document;\r\n    el.querySelectorAll(\"img.ew-lazy\").forEach((img, i) => {\r\n      if (ew.LAZY_LOAD_DELAY > 0) setTimeout(() => img.src = img.dataset.src, i * ew.LAZY_LOAD_DELAY);else img.src = img.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  }\r\n\r\n  // Update select2 dropdown position\r\n  function updateDropdownPosition() {\r\n    var select = $$1(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  }\r\n\r\n  // Colorboxes\r\n  function initLightboxes(e) {\r\n    var _e$target6;\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = (_e$target6 = e == null ? void 0 : e.target) != null ? _e$target6 : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $$1(el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $$1(this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  }\r\n\r\n  // PDFObjects\r\n  function initPdfObjects(e) {\r\n    var _e$target7;\r\n    if (!ew.EMBED_PDF) return;\r\n    let el = (_e$target7 = e == null ? void 0 : e.target) != null ? _e$target7 : document,\r\n      options = Object.assign({}, ew.PDFObjectOptions);\r\n    $$1(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      let $this = $$1(this),\r\n        url = $this.data(\"url\"),\r\n        html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  }\r\n\r\n  // Tooltips and popovers\r\n  function initTooltips(e) {\r\n    var _e$target8;\r\n    let el = (_e$target8 = e == null ? void 0 : e.target) != null ? _e$target8 : document,\r\n      $el = $$1(el);\r\n    $el.find(\"input[data-bs-toggle=tooltip], textarea[data-bs-toggle=tooltip], select[data-bs-toggle=tooltip]\").each(function () {\r\n      let $this = $$1(this);\r\n      $this.tooltip({\r\n        ...ew.tooltipOptions,\r\n        html: true,\r\n        ...$this.data()\r\n      });\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Set up tooltip links as popovers\r\n    $el.find(\".ew-tooltip\").tooltip(ew.tooltipOptions);\r\n    $el.find(\".ew-popover\").popover(ew.popoverOptions);\r\n    $el.find(\".ew-tippy[data-title]\").each(function () {\r\n      tippy(this, {\r\n        content: this.dataset.title,\r\n        ...ew.tippyOptions\r\n      });\r\n    });\r\n  }\r\n\r\n  // Parse JSON\r\n  function parseJson(data) {\r\n    if ($$1.isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n\r\n  // Change search operator\r\n  function searchOperatorChange(el) {\r\n    let $el = $$1(el),\r\n      $p = $el.closest(\"[id^=r_], [id^=xs_]\"),\r\n      parm = el.id.substring(2),\r\n      $fld = $p.find(\".ew-search-field\"),\r\n      $fld2 = $p.find(\".ew-search-field2\"),\r\n      $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n      hasY = $y.length,\r\n      $cond = $p.find(\".ew-search-cond\"),\r\n      hasCond = $cond.length,\r\n      // Has condition and operator 2\r\n      $and = $p.find(\".ew-search-and\"),\r\n      $opr = $p.find(\".ew-search-operator\"),\r\n      opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n      $opr2 = $p.find(\".ew-search-operator2\"),\r\n      opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n      isBetween = opr.includes(\"BETWEEN\"),\r\n      // Can only be operator 1\r\n      isEmptyOpr = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr),\r\n      isEmptyOpr2 = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr2),\r\n      hideOpr2 = !hasY || isBetween,\r\n      hideX = isEmptyOpr,\r\n      hideY = !isBetween && (!hasCond || isEmptyOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  }\r\n\r\n  // Init forms\r\n  function initForms(e) {\r\n    var _e$target9;\r\n    let el = (_e$target9 = e == null ? void 0 : e.target) != null ? _e$target9 : document,\r\n      ids = ew.forms.ids();\r\n    for (let id of ids) {\r\n      if (el.matches != null && el.matches(\"#\" + id) || el.querySelector(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  }\r\n\r\n  // Is function\r\n  function isFunction$2(x) {\r\n    return typeof x === \"function\";\r\n  }\r\n\r\n  /**\r\n   * Alert (OK button only)\r\n   *\r\n   * @param {string|Object} msg - Message or config\r\n   * @param {callback} [cb] - Callback function\r\n   * @param {string} [type] - CSS class (see https://getbootstrap.com/docs/5.3/utilities/colors/)\r\n   * @returns {Promise}\r\n   */\r\n  function _alert(msg, cb, type) {\r\n    let config = $$1.isObject(msg) ? msg : {};\r\n    msg = $$1.isString(msg) ? msg : \"\";\r\n    type = $$1.isString(cb) ? cb : type;\r\n    config = $$1.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: msg,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      customClass: {\r\n        htmlContainer: \"ew-swal2-html-container text-\" + (type || \"danger\")\r\n      }\r\n    }, config);\r\n    let args = {\r\n      config,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"alert\", [args]);\r\n    if (args.show) return Swal.fire(args.config).then(result => isFunction$2(cb) ? cb(result.isConfirmed) : result);\r\n  }\r\n\r\n  /**\r\n   * Prompt/Confirm/Alert\r\n   *\r\n   * @param {string|Object} cfg - Message or config object\r\n   * @param {callback} [cb] - Callback function\r\n   * @returns {Promise}\r\n   */\r\n  function _prompt(cfg, cb) {\r\n    var _config, _config$inputValidato;\r\n    let config = $$1.isObject(cfg) ? cfg : {};\r\n    config = $$1.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: $$1.isString(cfg) ? cfg : \"\",\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n    }, config); // Confirm/Alert\r\n    if (config.input)\r\n      // Prompt\r\n      (_config$inputValidato = (_config = config).inputValidator) != null ? _config$inputValidato : _config.inputValidator = value => {\r\n        if (!value) return ew.language.phrase(\"EnterValue\");\r\n      };\r\n    return Swal.fire(config).then(result => isFunction$2(cb) ? cb(result.value) : result);\r\n  }\r\n\r\n  // Toast\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n      $container = $$1(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} message - Message\r\n   * @param {string} type - CSS class: \"primary|secondary|success|info|warning|danger|light|dark\"\r\n   * @param {string} title - Title\r\n   */\r\n  function showToast(message, type, title) {\r\n    if (!message) return;\r\n    type || (type = \"danger\");\r\n    title || (title = ew.language.phrase(type));\r\n    let args = {\r\n      message,\r\n      type,\r\n      title,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"toast\", [args]);\r\n    if (!args.show) return;\r\n    ({\r\n      message,\r\n      type,\r\n      title\r\n    } = args);\r\n    return toast({\r\n      class: \"ew-toast text-bg-\" + type,\r\n      title,\r\n      body: message,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  }\r\n\r\n  // Get form.ew-form or div.ew-form HTML element\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $$1(el),\r\n      $f = $el.closest(\".ew-form\");\r\n    if (!$f[0])\r\n      // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid, .modal\").find(\".ew-form\");\r\n    return $f[0];\r\n  }\r\n\r\n  // Check form data\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=\" + ew.TABLE_BASIC_SEARCH + \"]\",\r\n      els = $$1(form).find(selector).filter(\":enabled\").get();\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($$1(el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$$1(el).val()) return true;\r\n      } else if ([\"text\", \"textarea\", \"password\", \"search\", \"color\", \"date\", \"datetime-local\", \"datetime\", \"email\", \"hidden\", \"month\", \"number\", \"range\", \"tel\", \"time\", \"url\", \"week\"].includes(el.type)) {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set search type\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns false\r\n   */\r\n  function setSearchType(el) {\r\n    var val = el.dataset.searchType,\r\n      phraseId = \"Auto\";\r\n    if (val == \"=\") phraseId = \"Exact\";else if (val == \"AND\") phraseId = \"All\";else if (val == \"OR\") phraseId = \"Any\";\r\n    el.closest(\".ew-basic-search\").querySelector(\"input.ew-basic-search-type\").value = val || \"\";\r\n    el.closest(\".dropdown-menu\").querySelectorAll(\".dropdown-item\").forEach(item => item.classList.remove(\"active\"));\r\n    el.closest(\".dropdown-item\").classList.add(\"active\");\r\n    var searchType = el.closest(\".input-group\").querySelector(\"#searchtype\"),\r\n      text = ew.language.phrase(\"QuickSearch\" + phraseId + \"Short\");\r\n    searchType.innerHTML = text;\r\n    searchType.classList.toggle(\"me-2\", !!text);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @this {Form|HTMLElement} Form or parent element\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var _obj, _batch$send;\r\n    var f = this.$element ? this.$element[0] : this.form || ((_obj = obj) == null ? void 0 : _obj.form); // Get form/div element from this/obj\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n    if (!frm) return;\r\n    if (this.form && $$1.isUndefined(obj))\r\n      // Target unspecified => update child fields\r\n      obj = forms.get(this).getList(this).childFields.slice(); // Clone\r\n    else if ($$1.isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n      batch = new Batch();\r\n    if (Array.isArray(obj) && $$1.isString(obj[0])) {\r\n      // Array of id\r\n      var els = [];\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n        var el = getElements(obj[i], f),\r\n          names = [];\r\n        if (isTextbox(el) || isFilter(el))\r\n          // Search text box or filter\r\n          continue;\r\n        els.push(el);\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblVar fldVar\" and multiple inputs\r\n          var $el = $$1(el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                typ = $elf.attr(\"type\"),\r\n                elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              batch.add(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          batch.add(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n      obj = els;\r\n      var list = forms.get(self).getList(self);\r\n      if (Array.isArray(list == null ? void 0 : list.autoFillTargetFields) && list.autoFillTargetFields[0])\r\n        // AutoFill\r\n        batch.add(autoFill.bind(null, self));\r\n    } else {\r\n      if (isTextbox(obj) || isFilter(obj))\r\n        // Search text box or filter\r\n        return;\r\n      batch.add(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n    return (_batch$send = batch.send({\r\n      url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n    })) == null ? void 0 : _batch$send.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n      args = Array.from(arguments),\r\n      ar = getOptionValues(obj),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      prefix = m ? m[1] : \"\",\r\n      rowindex = m ? m[2] : \"\",\r\n      arp = [],\r\n      list = frmo.getList(obj),\r\n      $obj = $$1(obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\"))\r\n      // Skip data-hidden field, e.g. detail key\r\n      return;\r\n    if ($$1.isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($$1.isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) arp.push(getOptionValues(parentId[i], fo));\r\n      }\r\n    }\r\n    if (!isAutoSuggest(obj))\r\n      // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n    var addOpt = function (results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        let args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      obj.render == null || obj.render(); // Selection list\r\n      selectOption(obj, ar, change);\r\n      if (change) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\");\r\n        // else\r\n        //     $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n    if ($$1.isUndefined(async))\r\n      // Async not specified, use default\r\n      async = list.ajax;\r\n    var _updateSibling = function () {\r\n      // Update the y_* element\r\n      if (/(srch|search|summary|crosstab)$/.test(fo.id) && prefix == \"x\" && !rowindex) {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n    if (!$$1.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n      _updateSibling();\r\n      $obj.first().trigger(\"updated\", [{\r\n        target: obj\r\n      }]); // Object \"updated\" event fired after the object is updated\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n        data = Object.assign({\r\n          page: list.page,\r\n          field: list.field,\r\n          ajax: \"updateoption\",\r\n          language: ew.LANGUAGE_ID,\r\n          name: name // Name of the target element\r\n        }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n      if (isAutoSuggest(obj) && self.htmlForm)\r\n        // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && !obj.list && !isNativeSelectOne(obj) ||\r\n      // Not <selection-list> or native <select>\r\n      isModalLookup(obj))\r\n        // Lookup\r\n        data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++)\r\n      // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      obj.showLoading == null || obj.showLoading(); // selection-list\r\n      return $$1.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        method: \"POST\",\r\n        dataType: \"json\",\r\n        data: data,\r\n        async: async,\r\n        processData: false,\r\n        success: result => {\r\n          let error = getError(result);\r\n          if (error) {\r\n            _alert(error);\r\n            return;\r\n          }\r\n          let ds = result.records || [];\r\n          addOpt(ds);\r\n          _updateSibling();\r\n          $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n            target: obj\r\n          })]); // Object \"updated\" event fired after the object is updated\r\n          return ds;\r\n        },\r\n        error: (jqXHR, textStatus, errorThrown) => _alert(errorThrown),\r\n        complete: () => $obj.data(\"updating\", false)\r\n      });\r\n    }\r\n  }\r\n\r\n  // Get user parameters from id\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n      o = {};\r\n    var root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $$1(root).find(id) : $$1(id);\r\n    var val = $els.val();\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n    return o;\r\n  }\r\n\r\n  // Get query builder filter input HTML\r\n  function getQueryBuilderFilterInput() {\r\n    return function (rule, name) {\r\n      var _document$getElementB, _span$innerHTML$repla;\r\n      let tblVar = this.status.id.replace(/_query_builder$/, \"\"),\r\n        // \"this\" is QueryBuilder\r\n        fldVar = rule.filter.id,\r\n        tmplId = \"tpx_\" + tblVar + \"_\" + fldVar,\r\n        span = (_document$getElementB = document.getElementById(tmplId)) == null || (_document$getElementB = _document$getElementB.content) == null ? void 0 : _document$getElementB.cloneNode(true).querySelector(\".ew-search-field\"),\r\n        html = (_span$innerHTML$repla = span == null ? void 0 : span.innerHTML.replace(/\\binvalid-feedback\\b/, ew.queryBuilderErrorClass).replace(new RegExp(\"(data-field=\\\")?(\\\\b|_)x_\" + fldVar + \"(\\\\[\\\\]|\\\\b)\", \"g\"), ($0, $1, $2) => $1 ? $0 : $2 + name)) != null ? _span$innerHTML$repla : \"\"; // Keep \"data-field\" attribute\r\n      return \"<div class=\\\"d-inline-flex position-relative\\\">\" + html + \"</div>\";\r\n    };\r\n  }\r\n\r\n  // Get query builder value setter\r\n  function getQueryBuilderValueSetter() {\r\n    return function (rule, value) {\r\n      let input = rule.$el.find(\".rule-value-container\").find(\"select, selection-list, input[name^=sv_], input[data-field]\")[0],\r\n        values = Array.isArray(value) ? value : $$1.isValue(value) ? [value] : [];\r\n      if (input != null && input.matches(\"select, selection-list\")) {\r\n        // Selection list\r\n        let form = forms.get(input);\r\n        values.forEach(val => newOption(input, {\r\n          lf: val\r\n        }, form, true));\r\n        form.updateList(input, undefined, undefined, true); // Update immediately\r\n      } else {\r\n        ew.selectOption(input, values);\r\n      }\r\n      return null;\r\n    };\r\n  }\r\n\r\n  // Get query builder filter validation object\r\n  function getQueryBuilderFilterValidation(validators) {\r\n    return {\r\n      callback: function (value, rule) {\r\n        // value not used\r\n        let $value = rule.$el.find(\".rule-value-container\"),\r\n          errors = 0;\r\n        for (let i = 0; i < rule.operator.nb_inputs; i++) {\r\n          $value.find(\"[name='\" + rule.id + '_value_' + i + \"']\").each(function () {\r\n            let $this = $$1(this),\r\n              $invalid = $this.next(\".\" + ew.queryBuilderErrorClass).empty();\r\n            validators == null || validators.forEach == null || validators.forEach(validator => {\r\n              let err = validator(this);\r\n              if ($$1.isObject(err)) {\r\n                errors++;\r\n                $invalid.append(\"<span>\" + Object.values(err)[0] + \"</span>\");\r\n              }\r\n            });\r\n            if ($invalid.html()) $this.addClass(\"is-invalid\").one(\"click\", () => $this.removeClass(\"is-invalid\"));\r\n          });\r\n        }\r\n        return errors ? \"\" : true; // Return error as empty string (errors already set in $invalid)\r\n      }\r\n    };\r\n  }\r\n\r\n  // Apply client side template to a DIV\r\n  function applyTemplate(divId, tmplId, classId, exportType, tblVar, data, isModal) {\r\n    let args = {\r\n      data: data || {},\r\n      id: divId,\r\n      template: tmplId,\r\n      class: classId,\r\n      export: exportType,\r\n      enabled: true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n    if (args.enabled) {\r\n      var _parent$querySelector;\r\n      let parent = isModal ? document.querySelector(\"#ew-modal-dialog.show\") : document.body,\r\n        // Parent (Modal dialog or document)\r\n        template = parent == null || (_parent$querySelector = parent.querySelector(\"#\" + tmplId)) == null ? void 0 : _parent$querySelector.content;\r\n      if (!template) return;\r\n      template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n        let id = el.name || el.id,\r\n          subtmpl = parent.querySelector(\"#\" + id); // Find in parent in case Custom Template in modal dialog\r\n        if (subtmpl != null && subtmpl.content) {\r\n          if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n          el.replaceWith(subtmpl.content.cloneNode(true));\r\n        } else {\r\n          el.remove();\r\n        }\r\n      });\r\n      if ($$1.views) {\r\n        let textContent = template.textContent,\r\n          hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n        if (!hasTag) {\r\n          let selector = ew.jsRenderAttributes.map(attr => \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\").join(\",\");\r\n          hasTag = template.querySelector(selector);\r\n        }\r\n        if (hasTag) {\r\n          // Includes JsRender template\r\n          let scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n          scripts.forEach(item => item.remove());\r\n          let div = document.createElement(\"div\");\r\n          div.appendChild(template);\r\n          let html = div.innerHTML.replace(/{{([^}]+)}}/g, m => htmlDecode(m)),\r\n            // HTML-decode comparison operators\r\n            tmpl = $$1.templates(html);\r\n          parent.querySelector(\"#\" + divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n          scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n        } else {\r\n          parent.querySelector(\"#\" + divId).appendChild(template);\r\n        }\r\n      } else {\r\n        parent.querySelector(\"#\" + divId).appendChild(template);\r\n      }\r\n    }\r\n    if (exportType && exportType != \"print\")\r\n      // Export custom template with charts\r\n      exportCustom(divId, exportType, tblVar); // Note: Use classId as fileName\r\n  }\r\n\r\n  // Export custom\r\n  function exportCustom(divId, exportType, tblVar) {\r\n    var _div$children$;\r\n    let div = document.getElementById(divId);\r\n    if ((_div$children$ = div.children[0]) != null && _div$children$.matches(\"div[id^=ct_]\"))\r\n      // Custom template, remove first div tag\r\n      div = div.children[0];\r\n    let data = {\r\n      customexport: exportType,\r\n      data: div.innerHTML,\r\n      [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n      [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN,\r\n      ...getchartParams()\r\n    };\r\n    if (exportType == \"email\") exportEmail(tblVar, mergeSearchParams(currentUrl.searchParams, data)); // Merge data with email form data in current URL parameters\r\n    else fileDownload(getApiUrl([ew.API_EXPORT_ACTION, exportType, tblVar]), data);\r\n  }\r\n\r\n  // Toggle group\r\n  function toggleGroup(el) {\r\n    let $el = $$1(el),\r\n      $tr = $el.closest(\"tr\");\r\n    if (!$tr.data(\"group\")) {\r\n      // Toggle all\r\n      $tr.closest(\"table\").find(\"tbody\").find(\".ew-rpt-grp-field-1 > .ew-group-toggle\").each(function () {\r\n        toggleGroup(this);\r\n        $el.toggleClass(\"ew-rpt-grp-hide\");\r\n      });\r\n    } else {\r\n      let selector = \"tr\",\r\n        level;\r\n      for (let i = 1; i <= 6; i++) {\r\n        let idx = i == 1 ? \"\" : \"-\" + i,\r\n          data = $tr.data(\"group\" + idx);\r\n        if ($$1.isValue(data)) {\r\n          level = i;\r\n          if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n        }\r\n      }\r\n      if ($el.hasClass(\"ew-rpt-grp-hide\")) {\r\n        // Show\r\n        $$1(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.removeClass(\"ew-rpt-grp-hide\");\r\n      } else {\r\n        // Hide\r\n        $$1(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.addClass(\"ew-rpt-grp-hide\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if boolean value is true\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(String(value).toLowerCase());\r\n  }\r\n\r\n  // Check if element value changed\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    let el = getElement(\"x\" + infix + \"_\" + fld, fobj),\r\n      oldEl = getElement(\"o\" + infix + \"_\" + fld, fobj),\r\n      // Hidden element\r\n      fnEl = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n    if ((el == null ? void 0 : el.type) == \"hidden\" && !oldEl)\r\n      // For example, detail key\r\n      return false;\r\n    if (!oldEl && (!el || Array.isArray(el) && el.length == 0)) return false;\r\n    if (oldEl && el) {\r\n      if (bool) {\r\n        if (convertToBool(getOptionValue(oldEl)) === convertToBool(getOptionValue(el))) return false;\r\n      } else {\r\n        let oldValue = getOptionValue(oldEl),\r\n          newValue = fnEl ? getOptionValue(fnEl) : getOptionValue(el);\r\n        if (oldValue == newValue) return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Set language\r\n  function setLanguage(el) {\r\n    let val = el.value || el.dataset.language;\r\n    if (!val) return false;\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n\r\n  // Set active user\r\n  function setActiveUser(el) {\r\n    let val = el.checked ? \"1\" : \"0\";\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"activeuser\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {MouseEvent} e - Mouse event\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element) (for backward compatibility only)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page) (for backward compatibility only)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string|Object} args.msg - Message or Swal config\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST by HTML form, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n  function submitAction(e, args) {\r\n    var _window$msg;\r\n    let el = e.currentTarget,\r\n      f = args.f || el.form || el.closest(\"form\"),\r\n      $f = $$1(f),\r\n      key = args.key,\r\n      action = args.action,\r\n      url = args.url || currentPage(),\r\n      msg = args.msg,\r\n      data = args.data,\r\n      success = args.success,\r\n      isPostBack = !args.method || sameText(args.method[0], \"p\"),\r\n      isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n    if ((isMultiple || isPostBack) && !f) {\r\n      _alert(ew.language.phrase(\"NoHtmlForm\"));\r\n      return false;\r\n    }\r\n    if (isMultiple && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let _success = function (result) {\r\n      if ($$1.isString(result)) {\r\n        showMessage(result);\r\n      } else if ($$1.isObject(result)) {\r\n        // JSON\r\n        let error = getError(result);\r\n        if (error) _alert(error);else if ($$1.isString(result.successMessage)) _alert(result.successMessage, \"success\");\r\n        if (result.disabled) el.disabled = true;\r\n      }\r\n    };\r\n    let _append = function (name, value) {\r\n      let $input = $f.find(\"input[type=hidden][name='\" + name + \"']\");\r\n      if ($input[0])\r\n        // Hidden tag exists\r\n        $input.val(value); // Set value\r\n      else\r\n        // Hidden tag does not exist, add one\r\n        $$1(\"<input>\").attr({\r\n          type: \"hidden\",\r\n          name,\r\n          value\r\n        }).appendTo($f);\r\n    };\r\n    let _submit = function (value) {\r\n      if (isPostBack && f) {\r\n        // Post back by form\r\n        if (action) {\r\n          // Action\r\n          _append(\"action\", action); // Set action\r\n        }\r\n        if (!$$1.isUndefined(value)) _append(\"actionvalue\", value); // Set action value\r\n        if ($$1.isObject(data)) {\r\n          // User data\r\n          for (const [name, value] of Object.entries(data)) _append(name, value);\r\n        }\r\n        if (!isMultiple && $$1.isObject(key)) {\r\n          // Key\r\n          for (const [name, value] of Object.entries(key)) _append(name, value);\r\n        }\r\n        if (parseUrl(url).pathname != currentUrl.pathname)\r\n          // Do not use refresh if post to another page\r\n          $f.off(\"submit.ew\");\r\n        $f.prop({\r\n          action: url,\r\n          method: \"post\"\r\n        }).trigger(\"submit\");\r\n      } else {\r\n        // Ajax\r\n        data = new URLSearchParams(data); // User data\r\n        if (action) {\r\n          // Action\r\n          data.set(\"action\", action);\r\n          data.set(\"ajax\", action);\r\n          $f.find(\"#action\").remove(); // Remove action in form\r\n        }\r\n        if (!$$1.isUndefined(value)) data.set(\"actionvalue\", value); // User input value\r\n        data = mergeSearchParams(data, $f.serialize()); // Form data including key_m[]\r\n        if (!isMultiple && $$1.isObject(key))\r\n          // Key\r\n          data = mergeSearchParams(data, key);\r\n        if (success && $$1.isString(success)) success = window[success];\r\n        let settings = $$1.isObject(success) ? success : {};\r\n        settings.data = data.toString();\r\n        settings.method || (settings.method = \"POST\");\r\n        settings.success || (settings.success = isFunction$2(success) ? success : _success);\r\n        $$1.ajax(url, settings);\r\n      }\r\n    };\r\n    msg = $$1.isString(msg) ? (_window$msg = window[msg]) != null ? _window$msg : msg : msg; // Get config object if available\r\n    msg ? _prompt(msg).then(result => result.isDismissed || _submit(result.value)) : _submit();\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get charts parameters as object\r\n   *\r\n   * @returns string\r\n   */\r\n  function getchartParams() {\r\n    let charts = Array.from(Object.entries(window.exportCharts)).map(_ref => {\r\n      let [id, chart] = _ref;\r\n      return {\r\n        chartEngine: \"Chart.js\",\r\n        streamType: \"base64\",\r\n        stream: chart.toBase64Image(),\r\n        fileName: id + \".png\"\r\n      };\r\n    });\r\n    return charts.length ? {\r\n      charts: JSON.stringify(charts)\r\n    } : null;\r\n  }\r\n\r\n  /**\r\n   * Export with charts, selected records and/or Custom Template (non-API)\r\n   *\r\n   * @param {MouseEvent|HTMLFormElement} args.evt - Event or HTML form\r\n   * @param {string} args.url - Form action\r\n   * @param {string} args.export - Export type\r\n   * @param {boolean} args.custom - Use Custom Template\r\n   * @param {boolean} args.exportSelected - Selected records only\r\n   * @param {HTMLFormElement} args.emailForm - email form object\r\n   * @returns false\r\n   */\r\n  async function _export(args) {\r\n    let {\r\n        evt,\r\n        url,\r\n        export: type,\r\n        custom,\r\n        exportSelected,\r\n        emailForm\r\n      } = args,\r\n      f = evt.currentTarget.form;\r\n    exportSelected && (exportSelected = f && !!f.querySelector(\"input[type=checkbox][name='key_m[]']\"));\r\n    if (exportSelected && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = f ? $$1(f) : $$1('<form class=\"ew-export-form\" method=\"post\"></form>').appendTo($body),\r\n      target = $f.attr(\"target\"),\r\n      action = $f.attr(\"action\"),\r\n      postParams = [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]];\r\n\r\n    // Export data\r\n    try {\r\n      if (custom) {\r\n        var _document$querySelect;\r\n        // Use Custom Template (chart data to be retrieved later in iframe)\r\n        document.body.style.cursor = \"wait\";\r\n        let name = \"ew-export-frame\";\r\n        url = setSearchParams(url, {\r\n          export: type,\r\n          custom: 1\r\n        }, $$1(emailForm).serialize()); // Make sure parameters include \"export=type&custom=1\"\r\n        (_document$querySelect = document.querySelector(\"iframe[name='\" + name + \"']\")) == null || _document$querySelect.remove();\r\n        let $iframe = $$1(\"<iframe>\").attr(\"name\", name).addClass(\"d-none\").appendTo($body);\r\n        $f.attr({\r\n          action: url,\r\n          target: name\r\n        }); // Pass all data including email form data from URL to the iframe by URL parameters\r\n        postParams.forEach(_ref2 => {\r\n          let [name, value] = _ref2;\r\n          return $f.find(\"input[name=\\\"\" + name + \"\\\"]\").val(value)[0] || $$1(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name,\r\n            value\r\n          }).appendTo($f);\r\n        });\r\n        $iframe.one(\"load\", () => document.body.style.cursor = \"default\").one(\"load\", () => $f.attr({\r\n          action,\r\n          target\r\n        })); // Reset\r\n        $f.trigger(\"submit\");\r\n      } else {\r\n        // No Custom Template\r\n        url = setSearchParam(url, \"export\", type); // Make sure URL parameters include \"export=type\"\r\n        if (type == \"print\") $f.attr(\"action\", url).trigger(\"submit\"); // Submit the form directly\r\n        else fileDownload(url, mergeSearchParams($f.serialize(), getchartParams()));\r\n      }\r\n    } finally {\r\n      f || $f.remove();\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value - Value\r\n   * @returns {string}\r\n   */\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isHiddenTextArea(el) {\r\n    var $el = $$1(el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isModalLookup(el) {\r\n    var _el$dataset;\r\n    return el == null || (_el$dataset = el.dataset) == null ? void 0 : _el$dataset.modalLookup;\r\n  }\r\n\r\n  /**\r\n   * Check if filter\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isFilter(el) {\r\n    var _el$dataset2;\r\n    return el == null || (_el$dataset2 = el.dataset) == null ? void 0 : _el$dataset2.filter;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isAutoSuggest(el) {\r\n    var $el = $$1(el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n\r\n  /**\r\n   * Check if Select2\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isSelect2(el) {\r\n    return el == null || el.matches == null ? void 0 : el.matches(\"select.select2-hidden-accessible\");\r\n  }\r\n\r\n  /**\r\n   * Check if native selection list (select-one)\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isNativeSelectOne(el) {\r\n    return (el == null || el.matches == null ? void 0 : el.matches(\"select:not(.select2-hidden-accessible)\")) && el.type == \"select-one\";\r\n  }\r\n\r\n  /**\r\n   * Check if textbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isTextbox(el) {\r\n    return (el == null || el.matches == null ? void 0 : el.matches(\"input:not([type=checkbox]):not([type=radio])\")) && !isAutoSuggest(el);\r\n  }\r\n\r\n  /**\r\n   * Check if boolean checkbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isBooleanCheckbox(el) {\r\n    return el == null || el.matches == null ? void 0 : el.matches(\"input[type=checkbox][data-boolean]\");\r\n  }\r\n\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   */\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n    $$1(el).closest(fieldContainerSelector).find(\".invalid-feedback\").html(\"\");\r\n  }\r\n\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   * @param {string} msg - Error message\r\n   * @param {boolean} focus - Set focus\r\n   */\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n    $$1(el).closest(fieldContainerSelector).find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm == null || frm.makeVisible(el);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   * @param {Object} options - Focus options\r\n   */\r\n  function setFocus(obj, options) {\r\n    if (!obj) return;\r\n    var $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n    obj.focus(options);\r\n  }\r\n\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set valid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setValid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if object has value\r\n  function hasValue(obj) {\r\n    return getOptionValue(obj) != \"\";\r\n  }\r\n\r\n  // Check if object value is a masked password\r\n  function isMaskedPassword(obj) {\r\n    var val = $$1(obj).val();\r\n    return val == null ? void 0 : val.match(/^\\*+$/);\r\n  }\r\n\r\n  // Sort by field\r\n  function sort(e, dataset) {\r\n    let {\r\n      sortUrl: url,\r\n      sortType: type,\r\n      context,\r\n      ajax\r\n    } = dataset;\r\n    if (e.shiftKey && !e.ctrlKey) url = setSearchParams(url, {\r\n      cmd: \"resetsort\"\r\n    });else if (type == 2 && e.ctrlKey) url = setSearchParams(url, {\r\n      ctrl: \"1\"\r\n    });\r\n    if (convertToBool(ajax)) refresh(fetch(setLayout(url, false)), context);else window.location = sanitizeUrl(url);\r\n    return false;\r\n  }\r\n\r\n  // Open table header filter by field\r\n  function filter(e) {\r\n    let data = e.currentTarget.dataset;\r\n    $$1(\"select[data-select2-id='f\" + data.table + \"srch_\" + data.field + \"']\").select2(\"open\");\r\n  }\r\n\r\n  /**\r\n   * Scroll an element into view\r\n   */\r\n  function scrollIntoView(el) {\r\n    el == null || el.scrollIntoView();\r\n  }\r\n\r\n  /**\r\n   * Inline actions\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {string} args.url - URL\r\n   * @param {string} args.ewAction - Inline/Grid action (inline/grid)\r\n   * @param {string} args.action - Inline/Grid action type (insert/cancel/update/add/edit/copy/delete)\r\n   * @returns false\r\n   */\r\n  async function inlineAction(args) {\r\n    var _args$evt;\r\n    let $el = $$1((_args$evt = args.evt) == null ? void 0 : _args$evt.currentTarget),\r\n      $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n    $el.tooltip(\"hide\");\r\n    if (!$grid[0] && $el.is(\".dropdown-item\")) {\r\n      let $btn = $$1(\"#\" + $el.closest(\".dropdown-menu\").attr(\"aria-labelledby\"));\r\n      if ($btn[0]) {\r\n        $el = $btn;\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n      }\r\n    }\r\n    if (!$el[0]) return;\r\n    let {\r\n        url,\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      $f = $grid.find(\"form\"),\r\n      f = $f[0],\r\n      $record = $el.closest(\"tr[data-rowindex], div[data-rowindex]\"),\r\n      key = $record.data(\"key\"),\r\n      curindex = $record.data(\"rowindex\"),\r\n      $detached;\r\n    if (action != \"add\" && (!$grid[0] || !f))\r\n      // Allow add with no records => no grid\r\n      return;\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      !o.status || showToast(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Success handler for delete\r\n    let _deleted = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (result != null && result.success) {\r\n          $record.remove();\r\n          showToast(ew.language.phrase(\"DeleteSuccess\"), \"success\");\r\n        } else {\r\n          showToast(getError(result) || ew.language.phrase(\"DeleteFailed\"));\r\n        }\r\n      } else {\r\n        _alert(await response.text());\r\n      }\r\n    };\r\n\r\n    // Disable inline buttons\r\n    let _disableInlineButtons = () => $$1(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").addClass(\"disabled\");\r\n\r\n    // Enable inline buttons\r\n    let _enableInlineButtons = () => $$1(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").removeClass(\"disabled\");\r\n\r\n    // Get table\r\n    let _getTable = () => $grid.find(\".ew-grid-middle-panel .ew-table\")[0];\r\n\r\n    // Update row index\r\n    let _updateRowIndexes = tbl => {\r\n      let j = 0;\r\n      Array.from(tbl.rows).forEach(row => row.dataset.rowindex = row.dataset.rowindex === \"0\" ? \"0\" : String(j++)); // Update row index if not Inline-Add/Copy row\r\n    };\r\n\r\n    // Success handler for inline actions\r\n    let _success = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let text = await response.clone().text(),\r\n        $data = $$1(\"<div>\" + text + \"</div>\"),\r\n        $row = $data.find(\"tr[data-rowindex=0], div[data-rowindex=0]\" + (key ? \", tr[data-key='\" + key + \"'], div[data-key='\" + key + \"']\" : \"\")).filter(\"[data-rowtype=2], [data-rowtype=3]\"),\r\n        // Find Inline-Add first\r\n        inline = $row.data(\"inline\"),\r\n        rowtype = $row.data(\"rowtype\"),\r\n        rowindex = inline && rowtype == 2 /* Inline-Add */ ? 0 : inline && rowtype == 3 /* Inline-Edit */ ? 1 : $row.data(\"rowindex\"),\r\n        $els = $row.add($data.find(\"script[data-rowindex=\" + rowindex + \"]\")); // Add script for the row\r\n      if ([\"add\", \"copy\", \"edit\"].includes(action) && !$els[0])\r\n        // Edit row not found => Error\r\n        return showToast(text);\r\n      if ([\"add\", \"copy\"].includes(action)) {\r\n        // Inline-Add/Copy\r\n        if (document.querySelector(\"main.ew-no-record\") && $data.find(\"main:not(.ew-no-record)\")[0]) {\r\n          // No existing record, new Inline-Add/Copy row found\r\n          await refresh(Promise.resolve(response));\r\n        } else {\r\n          if ($row.is(\"TR\")) {\r\n            // Table\r\n            let tbl = _getTable();\r\n            if (tbl.matches(\".ew-infinite-scroll-table\")) $$1(tbl.tBodies).last().append($els);else $$1(tbl.tBodies).last().prepend($els);\r\n            _updateRowIndexes(tbl); // Update row index\r\n            setupTable(tbl, true);\r\n          } else {\r\n            $grid.find(\".ew-multi-column-row\").append($els);\r\n          }\r\n          _disableInlineButtons();\r\n        }\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=2]\")[0]);\r\n      } else if (action == \"edit\") {\r\n        // Inline-Edit\r\n        $detached = $record.replaceWith($els); // Replace current row\r\n        $grid.data(\"detached\", $detached); // Save the detached row\r\n        if ($row.is(\"TR\"))\r\n          // Table\r\n          setupTable(_getTable(), true);\r\n        _disableInlineButtons();\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=3]\")[0]);\r\n      }\r\n    };\r\n\r\n    // Submit success handler for inline actions\r\n    let _submitSuccess = async function (response) {\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          error = getError(result);\r\n        if (error) {\r\n          showToast(error);\r\n          return;\r\n        }\r\n      }\r\n      if (response.headers.get(\"Infinite-Scroll\")) {\r\n        // Infinite scroll\r\n        let text = await response.text(),\r\n          $data = $$1(\"<div>\" + text + \"</div>\"),\r\n          $main = $data.find(\".main\"),\r\n          $row;\r\n        if ([\"insert\", \"update\"].includes(action)) {\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if (!$row[0]) return; // Affected row(s) not found\r\n          if (action == \"insert\")\r\n            // Inline-Add/Copy\r\n            $grid.find(\"tr[data-rowtype=\" + ew.ROWTYPE_ADD + \"], div[data-rowtype=\" + ew.ROWTYPE_ADD + \"]\").replaceWith($row[0]); // Replace add row\r\n          else if (action == \"update\")\r\n            // Inline-Edit/Update\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-key='\" + row.dataset.key + \"']\").replaceWith(row)); // Replace row(s) edited/updated\r\n        } else if ([\"add\", \"edit\", \"multiedit\"].includes(action)) {\r\n          // Grid-Add/Grid-Edit/Multi-Edit\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if ([\"edit\", \"multiedit\"].includes(action))\r\n            // Grid-Edit/Multi-Edit\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-rowtype='\" + row.dataset.key + \"']\").replaceWith(row));else if (action == \"add\")\r\n            // Grid-Add\r\n            $grid.find(\".ew-grid-middle-panel .ew-table > tbody:last\").append($row); // Append to bottom\r\n        }\r\n        let tbl = _getTable();\r\n        _updateRowIndexes(tbl); // Update row index\r\n        setupTable(tbl, true);\r\n        showMessage({\r\n          target: $data\r\n        }); // Show message, if any\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $main[0]\r\n        }));\r\n      } else {\r\n        // Use Ajax actions\r\n        await refresh(Promise.resolve(response));\r\n      }\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $grid.find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n    if (ewAction == \"inline\") {\r\n      if (action == \"cancel\") {\r\n        if (curindex == \"0\") {\r\n          // Cancel Inline-Add/Copy\r\n          $record.remove();\r\n        } else {\r\n          var _$grid$data;\r\n          // Cancel Inline-Edit\r\n          (_$grid$data = $grid.data(\"detached\")) == null || _$grid$data.replaceAll($record);\r\n        }\r\n        _enableInlineButtons();\r\n      } else if (f && [\"insert\", \"update\"].includes(action)) {\r\n        // Post form\r\n        let frm = forms.get(f.id);\r\n        if (await frm.canSubmit(args.evt)) {\r\n          // Validate\r\n          document.body.style.cursor = \"wait\";\r\n          let body = setSearchParams($f.serialize(), {\r\n              action\r\n            }),\r\n            // Set up action\r\n            p = _fetch(setSearchParams(url, {\r\n              rnd: random()\r\n            }), {\r\n              method: \"POST\",\r\n              body\r\n            }).catch(_fail).finally(() => {\r\n              frm.enableForm();\r\n              _always();\r\n            });\r\n          if (frm.submitWithFetch) {\r\n            let args = {\r\n                form: f,\r\n                result: p\r\n              },\r\n              evt = $$1.Event(\"aftersubmit\", {\r\n                originalEvent: args.evt\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          } else {\r\n            p.then(_submitSuccess).finally(_enableInlineButtons);\r\n          }\r\n        }\r\n      } else if (action == \"delete\") {\r\n        // Inline-Delete\r\n        if (!key) {\r\n          // No key from the clicked row => Multi-Delete\r\n          $record = $grid.find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"tr[data-rowindex], div[data-rowindex]\"); // Update $record\r\n          if (!$record[0]) {\r\n            _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n            return false;\r\n          }\r\n        }\r\n        _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n          if (result) {\r\n            document.body.style.cursor = \"wait\";\r\n            let method = key ? \"GET\" : \"POST\",\r\n              body = deleteSearchParam($f.serialize(), \"action\"),\r\n              frm = forms.get(f.id),\r\n              p = _fetch(setSearchParams(url, {\r\n                action: \"delete\",\r\n                rnd: random()\r\n              }), {\r\n                method,\r\n                body\r\n              }).catch(_fail).finally(() => {\r\n                frm.enableForm();\r\n                _always();\r\n              });\r\n            if (frm.submitWithFetch) {\r\n              let args = {\r\n                  form: f,\r\n                  result: p\r\n                },\r\n                evt = $$1.Event(\"aftersubmit\", {\r\n                  originalEvent: args.evt\r\n                });\r\n              frm.trigger(evt, [args]);\r\n            } else {\r\n              p.then(_deleted);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        document.body.style.cursor = \"wait\";\r\n        _fetch(setSearchParams(url, {\r\n          rnd: random()\r\n        })).then(_success).catch(_fail).finally(_always);\r\n      }\r\n    } else if (ewAction == \"grid\" || ewAction == \"modal\") {\r\n      // Grid-Add/Edit, Modal-Add/Copy/Edit/Update\r\n      if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n        // Grid-Edit and Multi-Edit/Update\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n        return false;\r\n      }\r\n      ew.modalDialogShow({\r\n        ...args,\r\n        callback: _submitSuccess\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Confirm inline-delete\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n    _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n      if (result) {\r\n        if (el.dataset.json && el.href)\r\n          // Handle JSON response\r\n          ew.modalDialogShow({\r\n            url: setSearchParams(el.href, {\r\n              action: \"delete\"\r\n            }),\r\n            lnk: el,\r\n            json: true,\r\n            callback: true\r\n          });else if (el.href) window.location = sanitizeUrl(setSearchParams(el.href, {\r\n          action: \"delete\"\r\n        }));else clearDelete(el);\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  // Check if any key selected // PHP\r\n  function keySelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name='key_m[]']:checked\"));\r\n  }\r\n\r\n  // Select all keys\r\n  function selectAllKeys(cb) {\r\n    selectAll(cb);\r\n    let tbl = cb == null ? void 0 : cb.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    $$1(tbl.tBodies).each(function () {\r\n      $$1(this.rows).each(function () {\r\n        let $r = $$1(this);\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) $r.toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n      });\r\n    });\r\n  }\r\n\r\n  // Select all related checkboxes in the form\r\n  function selectAll(cb) {\r\n    if (!(cb != null && cb.form)) return;\r\n    $$1(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  }\r\n\r\n  // Update selected checkbox\r\n  function updateSelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name^=u_]:checked,input[type=hidden][name^=u_][value='1']\"));\r\n  }\r\n\r\n  // Clear selected rows color\r\n  function clearSelected(tbl) {\r\n    let rowIndexes = $$1(tbl).find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"[data-rowindex]\").map((i, r) => r.dataset.rowindex).get();\r\n    $$1(tbl == null ? void 0 : tbl.rows).filter((i, r) => r.classList.contains(\"table-active\") && !rowIndexes.includes(r.dataset.rowindex)).removeClass(\"table-active ew-table-selected-row\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Clear all row delete status\r\n  function clearDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    let $tr = $$1(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().removeClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Click single delete link\r\n  function clickDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $$1(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().addClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Select a row\r\n  function selectKey(e) {\r\n    let chk = e.target,\r\n      tbl = chk == null ? void 0 : chk.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $$1(chk).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function () {\r\n      $$1(this).toggleClass(\"table-active ew-table-selected-row\", chk.checked).triggerHandler(\"change\");\r\n    });\r\n    e.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Setup table\r\n   *\r\n   * @param {number} [index=undefined] Index\r\n   * @param {HTMLTableElement} tbl HTML table element\r\n   * @param {boolean} [force=undefined] Force setup\r\n   * @returns\r\n   */\r\n  function setupTable() {\r\n    let tbl, force;\r\n    if ($$1.isNumber(arguments[0])) {\r\n      tbl = arguments[1];\r\n    } else if (arguments[0] instanceof HTMLTableElement) {\r\n      tbl = arguments[0];\r\n      force = arguments[1];\r\n    }\r\n    let $tbl = $$1(tbl),\r\n      $rows = $$1(tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && tbl.dataset.isset || tbl.tBodies.length == 0) return;\r\n    // Set selected row color\r\n    let click = function (e) {\r\n      let $this = $$1(this),\r\n        tbl = this.closest(\".ew-table\"),\r\n        $target = $$1(e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-btn\") || $target.is(\":input\")) return;\r\n      clearSelected(tbl); // Clear all other selected rows\r\n      $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().toggleClass(\"table-active\").triggerHandler(\"change\");\r\n    };\r\n    let n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1,\r\n      // Alternate color every n rows\r\n      rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n        $$1(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n      }).get();\r\n    if (rows.length >= n) {\r\n      let div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n      rows[rows.length - 1].classList.add(\"border-bottom-0\"); // Last row\r\n      rows.splice(n * -1).forEach((row, i) => Array.from(row.cells).filter(cell => cell.rowSpan == i + 1) // Cell of last row\r\n      .forEach(cell => {\r\n        cell.classList.add(\"ew-table-last-row\");\r\n        cell.classList.toggle(\"ew-table-border-bottom\", (div == null ? void 0 : div.clientHeight) > tbl.offsetHeight);\r\n      }));\r\n    }\r\n    let form = tbl.closest(\"form\"),\r\n      attach = form && $$1(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $$1(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function () {\r\n      let $r = $$1(this);\r\n      if (attach && !$r.data(\"isset\")) $r.on(\"click\", click).data(\"isset\", true);\r\n    });\r\n    setupGrid(tbl.closest(\".ew-grid\"), force);\r\n    tbl.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Setup grid\r\n  function setupGrid(grid, force) {\r\n    let $grid = $$1(grid);\r\n    if (!grid || !force && grid.dataset.isset) return;\r\n    let rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    if (rowcnt == 0 && !grid.querySelector(\".ew-grid-upper-panel, .ew-grid-lower-panel\")) $grid.hide();\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $$1(\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n    }\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\") && (!grid.querySelector(\".ew-grid-upper-panel\") || $grid.find(\".ew-grid-upper-panel:hidden\")[0])) {\r\n      let $panel = $grid.find(\".ew-grid-middle-panel:not(.overflow-y-auto):visible\").addClass(\"rounded-top\"),\r\n        $cells = $panel.children(\".ew-table:not(.table-head-fixed):visible\").first().children(\"thead:visible\").first().children(\"tr:visible\").first().children(\"th:visible\");\r\n      $cells.first().addClass(\"rounded-top-left\");\r\n      $cells.last().addClass(\"rounded-top-right\");\r\n    }\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\") && (!grid.querySelector(\".ew-grid-lower-panel\") || $grid.find(\".ew-grid-lower-panel:hidden\")[0])) {\r\n      let $panel = $grid.find(\".ew-grid-middle-panel:not(.overflow-y-auto):visible\").addClass(\"rounded-bottom\"),\r\n        $cells = $panel.children(\".ew-table:not(.table-head-fixed):visible\").last().children(\"tbody:visible\").last().children(\"tr:visible\").last().children(\"td:visible\");\r\n      $cells.first().addClass(\"rounded-bottom-left\");\r\n      $cells.last().addClass(\"rounded-bottom-right\");\r\n    }\r\n    grid.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Add a row to grid\r\n  function addGridRow(el) {\r\n    var _bootstrap$Tooltip$ge2;\r\n    let grid = el == null ? void 0 : el.closest(\".ew-grid\"),\r\n      $grid = $$1(grid),\r\n      $tbl = $grid.find(\"table.ew-table\").last(),\r\n      $p = $tbl.parent(\"div\"),\r\n      $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !grid || !$tbl[0] || !$tpl[0]) return false;\r\n    let $lastrow = $$1($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    let $row = $tpl.clone(true, true).removeClass(\"ew-template\"),\r\n      form = grid.querySelector(\"div.ew-form[id^=f][id$=grid]\") || grid.querySelector(\"form.ew-form[id^=f][id$=list]\") || grid.querySelector(\"form.ew-form[id^=f][id$=grid]\"),\r\n      $form = $$1(form),\r\n      suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      $keycnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix),\r\n      keycnt = parseInt($keycnt.val(), 10) + 1,\r\n      name = ew.FORM_ROW_ACTION_NAME.replace(/^k_/, \"k\" + keycnt + \"_\") + suffix,\r\n      // name=\"k<n>_action\"\r\n      $els = $tpl.find(\"script:contains('$rowindex$')\").add(\"tr.ew-template + script[data-rowindex='$rowindex$']\"); // Get scripts with rowindex\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    $row.children(\"td\").each(function () {\r\n      $$1(this).find(\"*\").each(function () {\r\n        $$1.each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n    let $btn = $row.find(\".ew-icon\").closest(\"a, button\");\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance($btn[0])) == null || _bootstrap$Tooltip$ge2.dispose();\r\n    $btn.tooltip({\r\n      ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: \"hover\"\r\n    });\r\n    $keycnt.val(keycnt).after($$1(\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: name,\r\n      name: name,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.get().forEach(el => addScript(el.text.replace(/\\$rowindex\\$/g, keycnt)));\r\n    let frm = $form.data(\"form\");\r\n    frm == null || frm.initEditors();\r\n    frm == null || frm.initUpload();\r\n    setupTable($tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    $tbl.trigger(\"rowadded\", [keycnt]);\r\n    return false;\r\n  }\r\n\r\n  // Delete a row from grid\r\n  function deleteGridRow(el, infix) {\r\n    var _bootstrap$Tooltip$ge3;\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(el)) == null || _bootstrap$Tooltip$ge3.dispose();\r\n    let grid = el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n      row = el.closest(\"tr, div[data-rowindex]\"),\r\n      tbl = row == null ? void 0 : row.closest(\".ew-table\"),\r\n      rowidx = parseInt(row == null ? void 0 : row.dataset.rowindex, 10),\r\n      form = (grid == null ? void 0 : grid.querySelector(\"div.ew-form[id^=f][id$=grid]\")) || (grid == null ? void 0 : grid.querySelector(\"form.ew-form[id^=f][id$=list], form.ew-form[id^=f][id$=grid]\")),\r\n      $form = $$1(form),\r\n      frm = $form.data(\"form\");\r\n    if (!el || !grid || !row || !tbl || !form || !frm) return false;\r\n    let suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      keycnt = \"#\" + ew.FORM_KEY_COUNT_NAME + suffix;\r\n    let _delete = function () {\r\n      row.remove();\r\n      if (grid.classList.contains(\".ew-grid\")) setupTable(tbl, true);\r\n      if (rowidx > 0) {\r\n        let $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycnt).after($$1(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n      $$1(tbl).trigger(\"rowdeleted\", [rowidx]);\r\n    };\r\n    if (isFunction$2(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // HTML encode text\r\n  function htmlEncode(text) {\r\n    return String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  }\r\n\r\n  // HTML decode text\r\n  function htmlDecode(text) {\r\n    return String(text).replace(/&amp;/g, '&').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n  }\r\n\r\n  // Get form element(s) as single element or array of radio/checkbox\r\n  function getElements(el, root) {\r\n    root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let $root = root ? $$1(root) : $document$1,\r\n      selectors = [],\r\n      getFieldSelector = field => \"[data-field='\" + field + \"']:not(.ew-custom-option):not([name^=y_]):not([data-old])\";\r\n    if (el instanceof HTMLElement && el.dataset.table && el.dataset.field) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      if (isBooleanCheckbox(el)) return el;\r\n      selectors = [\"[data-table='\" + el.dataset.table + \"']\" + getFieldSelector(el.dataset.field)];\r\n    } else if ($$1.isString(el)) {\r\n      let [s1, s2] = el.split(\" \"); // Check if \"<table> <name>\"\r\n      selectors = s2 ? [\"[data-table='\" + s1 + \"']\" + getFieldSelector(getId(s2))] // \"<table> <name>\", remove []\r\n      : [\"[name='\" + el + \"']:not(.ew-custom-option):not([data-old])\", getFieldSelector(getId(el))]; // \"<name>\" only\r\n    }\r\n    let selector = [\"input\", \"select\", \"textarea\", \"button\", \"selection-list\"].flatMap(tag => selectors.map(sel => tag + sel)).join(),\r\n      $els = $root.find(selector);\r\n    if ($root.is(\"form.ew-form\") && $root.find(\"div.ew-form\")[0])\r\n      // Master/Detail form\r\n      $els = $els.not(\"div.ew-form *\"); // Remove elements of detail tables\r\n    if ($els.length == 1 && ($els.is(\":not([type=checkbox]):not([type=radio])\") || isBooleanCheckbox($els[0])) || $els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\"))\r\n      // Polyfill for the ElementInternals\r\n      return $els[0];\r\n    return $els[0] ? $els.get() : null;\r\n  }\r\n\r\n  // Get first element by id/name (not necessarily form element)\r\n  function getElement(name, root) {\r\n    root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $$1(root).find(selector)[0] : $$1(selector).first()[0];\r\n  }\r\n\r\n  // Get ancestor by function\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      var _node;\r\n      if (((_node = node) == null ? void 0 : _node.nodeType) == 1 && (!fn || fn(node))) return node;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // Check if an element is hidden\r\n  function isHidden(el) {\r\n    var $el = $$1(el);\r\n    return $el.css(\"display\") == \"none\" && !$el.is(\"selection-list\") && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, node => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n  }\r\n\r\n  // Check if same text\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  }\r\n\r\n  // Check if same string\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  }\r\n\r\n  // Convert to header case\r\n  function headerCase(str) {\r\n    return !str ? \"\" : String(str).replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g, \"\").replace(/([a-z])([A-Z])/g, (m, a, b) => a + \"_\" + b.toLowerCase()).replace(/[^A-Za-z0-9]+|_+/g, \"-\").toLowerCase().replace(/(-?)(\\w+)(-?)/g, (m, a, b, c) => a + b.charAt(0).toUpperCase() + b.slice(1) + c);\r\n  }\r\n\r\n  // Check if same path\r\n  function samePath(p1, p2) {\r\n    p1 = p1 instanceof URL ? p1.pathname : parseUrl(p1).pathname;\r\n    p2 = p2 instanceof URL ? p2.pathname : parseUrl(p2).pathname;\r\n    if (p1 != p2 && p1.startsWith(ew.PATH_BASE) && p2.startsWith(ew.PATH_BASE)) {\r\n      p1 = p1.substring(ew.PATH_BASE.length);\r\n      p2 = p2.substring(ew.PATH_BASE.length);\r\n      let ar1 = p1.split(\"/\"),\r\n        ar2 = p2.split(\"/\");\r\n      if (ar1[0] == ar2[0] && ar1[0].match(/(list|view|edit)$/i) ||\r\n      // *list == *list\r\n      ar1[0] == ar2[0] && ar1[1] == ar2[1] && [ew.LIST_ACTION, ew.VIEW_ACTION, ew.EDIT_ACTION].includes(ar1[1]))\r\n        // xxx/list == xxx/list\r\n        return true;\r\n    }\r\n    return p1 == p2;\r\n  }\r\n\r\n  // Get element value as array for select-multiple field or else as string\r\n  function getValue(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return undefined;\r\n    if (obj.options) {\r\n      // Selection list\r\n      return obj.list ? obj.type == \"select-multiple\" ? obj.values : obj.value : $$1(obj).val();\r\n    } else if (Array.isArray(obj)) {\r\n      // Radio/Checkbox list or element not found\r\n      return obj.length ? $$1(obj).filter(\":checked\").map((i, el) => el.value).get() : undefined;\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      // Single checkbox\r\n      return obj.checked ? obj.value : undefined;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      return obj.value;\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as an array\r\n  function getOptionValues(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        return obj.values;\r\n      } else if (isSelect2(obj)) {\r\n        let val = $$1(obj).val();\r\n        return Array.isArray(val) ? val : $$1.isValue(val) ? [val] : [];\r\n      } else {\r\n        return Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.value);\r\n      }\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $$1(obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as string\r\n  function getOptionValue(el, form) {\r\n    return getOptionValues(el, form).join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n  }\r\n\r\n  // Get existing text of selected values as an array\r\n  function getOptionTexts(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return isSelect2(obj) ? $$1(obj).find(\":selected\").map((i, el) => el.innerHTML).get() : Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $$1(obj).filter(\":checked\").map(function () {\r\n        return $$1(this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Clear existing options\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" ||\r\n      // multiple\r\n      obj.hasAttribute(\"data-dropdown\") ||\r\n      // dropdown\r\n      obj.length > 0 && obj.options[0].value != \"\" // non-empty first element\r\n      ? 0 : 1;\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n        obj.render();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) obj.remove(i);\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n  function getId(el, remove) {\r\n    var id = $$1.isString(el) ? el : $$1(el).attr(\"name\") || $$1(el).attr(\"id\"); // Use name first (id may have suffix)\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  }\r\n\r\n  // Get display value separator\r\n  function valueSeparator(index, obj) {\r\n    var sep = $$1(obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n  function displayValue(opt, obj) {\r\n    return [opt.df, opt.df2, opt.df3, opt.df4].reduce((text, value, i) => {\r\n      let sep = i > 0 ? valueSeparator(i, obj) : \"\";\r\n      return !$$1.isUndefined(sep) && $$1.isValue(value) && value != \"\" ? text + sep + value : text;\r\n    }, \"\");\r\n  }\r\n\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} data - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @param {bool} selected - New option is selected\r\n   * @returns\r\n   */\r\n  function newOption(obj, data, f, selected) {\r\n    let frm = forms.get(f.id),\r\n      id = getId(obj),\r\n      list = frm.getList(obj),\r\n      group = data.gf,\r\n      value = data.lf,\r\n      template = frm.getOptionTemplate(list),\r\n      text = template != null && template.render && !isAutoSuggest(obj) ? template.render(data, ew.jsRenderHelpers) : displayValue(data, obj) || value;\r\n    if (obj.options) {\r\n      // Selection list\r\n      let option;\r\n      if (obj.list) {\r\n        option = new ew.SelectionListOption(text, value, !!selected);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = value;\r\n        option.innerHTML = text;\r\n        option.selected = !!selected;\r\n      }\r\n      let args = {\r\n        \"name\": id,\r\n        \"form\": f.$element,\r\n        data,\r\n        group,\r\n        option\r\n      };\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n      if (obj.list) {\r\n        obj.addOption(args.option);\r\n      } else {\r\n        if (args.group && !isSelect2(obj)) {\r\n          var _obj$querySelector;\r\n          let optGroup = Array.from((_obj$querySelector = obj.querySelector(\":scope > optgroup\")) != null ? _obj$querySelector : []).find(g => g.label == args.group);\r\n          if (!optGroup) {\r\n            optGroup = document.createElement(\"optgroup\");\r\n            optGroup.label = args.group;\r\n            obj.add(optGroup);\r\n          }\r\n          optGroup.appendChild(args.option);\r\n        } else {\r\n          obj.add(args.option);\r\n        }\r\n      }\r\n      return args.option.text;\r\n    }\r\n    return text;\r\n  }\r\n\r\n  // Select combobox option\r\n  function selectOption(obj, values, change) {\r\n    var _obj$dataset, _forms$get$getList;\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    if (!obj || !values) return;\r\n    let $obj = $$1(obj);\r\n    values = Array.isArray(values) ? values : [values];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        obj.value = values;\r\n      } else {\r\n        var _obj$options$;\r\n        $obj.val(values);\r\n        if (change && isSelect2(obj)) $obj.triggerHandler(\"change\");\r\n        if (obj.type == \"select-one\" && obj.selectedIndex == -1 && !((_obj$options$ = obj.options[0]) != null && _obj$options$.value)) obj.selectedIndex = 0; // Make sure an option is selected\r\n      }\r\n      if (isAutoSuggest(obj) && values.length == 1) {\r\n        let opts = obj.options || [];\r\n        for (let opt of opts) {\r\n          if (opt.value == values[0]) {\r\n            obj.value = opt.value;\r\n            obj.input.value = opt.text;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      obj.checked = convertToBool(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n    } else if (obj.type && obj.type != \"file\") {\r\n      $obj.val(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n      if (isHiddenTextArea($obj)) $obj.data(\"editor\").set();\r\n    }\r\n    // Auto-select if only one option\r\n    if (((_obj$dataset = obj.dataset) == null ? void 0 : _obj$dataset.autoselect) === \"false\")\r\n      // data-autoselect=\"false\"\r\n      return;\r\n    let form = getForm(obj),\r\n      autoSelect = form && !(form.id.endsWith(\"search\") || form.id.endsWith(\"srch\") || ((_forms$get$getList = forms.get(form.id).getList(obj)) == null || (_forms$get$getList = _forms$get$getList.parentFields) == null ? void 0 : _forms$get$getList.length) === 0); // Not search forms and has parent fields\r\n    if (autoSelect && obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        let opts = obj.options || [];\r\n        if (opts.length == 1) {\r\n          obj.value = opts[0].value;\r\n          obj.input.value = opts[0].text;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fetch API\r\n  function _fetch(url, init) {\r\n    var _init, _init$headers;\r\n    (_init = init) != null ? _init : init = {};\r\n    init.headers = new Headers(init.headers || {});\r\n    let isApi = url.startsWith(getApiUrl()); // Is API request\r\n    if (isApi && ew.API_JWT_TOKEN) init.headers.set(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n    if ((_init$headers = init.headers) != null && (_init$headers = _init$headers.get(\"Content-Type\")) != null && _init$headers.includes(\"application/json\")) {\r\n      // Add token in headers if posting JSON data // PHP\r\n      init.headers.set(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME); // Send token name in header // PHP\r\n      init.headers.set(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN); // Send antiforgery token in header // PHP\r\n    }\r\n    if (!init.method || sameText(init.method, \"GET\")) {\r\n      // GET\r\n      url = setSearchParams(url, init.body);\r\n      delete init.body;\r\n    } else {\r\n      // POST\r\n      if (init.body instanceof FormData) {\r\n        init.body.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n        init.body.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      } else {\r\n        init.body = mergeSearchParams(init.body, {\r\n          [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n          [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n        }); // Add token name and antiforgery token // PHP\r\n      }\r\n    }\r\n    let args = {\r\n      url,\r\n      init\r\n    };\r\n    $document$1.trigger(\"fetch\", [args]);\r\n    return fetch(args.url, args.init);\r\n  }\r\n\r\n  // Ajax send\r\n  $document$1.on(\"ajaxSend\", function (event, jqxhr, settings) {\r\n    let url = settings.url,\r\n      isApi = url.startsWith(getApiUrl()),\r\n      // Is API request\r\n      allowed = isApi || url.startsWith(ew.PATH_BASE) || url.startsWith(currentPage());\r\n    if (!allowed && url.match(/^http/i)) {\r\n      let objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN) jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN); // Note: settings.headers won't work\r\n      if ($$1.isString(settings.contentType) && settings.contentType.includes(\"application/json\")) {\r\n        // Add token and antiforgery token in headers if posting JSON data // PHP\r\n        jqxhr.setRequestHeader(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME);\r\n        jqxhr.setRequestHeader(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN);\r\n      } else if (sameText(settings.type, \"POST\")) {\r\n        // POST\r\n        if (settings.data instanceof FormData) {\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n        } else {\r\n          let params = mergeSearchParams(new URLSearchParams(settings.data), {\r\n            [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n            [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n          }); // Add token name and antiforgery token // PHP\r\n          settings.data = params.toString();\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  // Ajax start\r\n  $document$1.on(\"ajaxStart\", function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    $$1(\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      let frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  });\r\n\r\n  // Ajax stop/error\r\n  $document$1.on(\"ajaxStop ajaxError\", function () {\r\n    $$1(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      let frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.enableForm();\r\n      }\r\n    });\r\n    $document$1.data(\"_ajax\", false);\r\n  });\r\n\r\n  // Execute JavaScript in HTML loaded by Ajax\r\n  function executeScript(html, id, modal) {\r\n    let pattern = modal ? /<(head)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig : /<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig,\r\n      // If modal, scripts in template tags not executed by browser, execute manually\r\n      matches = html.replaceAll(pattern, \"\").matchAll(/<script[^>]*>[\\s\\S]*?<\\/script\\s*>/ig); // Do not execute scripts in template tags, use non-greedy [\\s\\S]*?\r\n    Array.from(document.createRange().createContextualFragment(Array.from(matches).map(m => m[0]).filter(s => !s.includes(\"$rowindex$\")).join(\"\")).querySelectorAll(\"script:not([type]), script[type='text/javascript']\")).sort((s1, s2) => s2.classList.contains(\"ew-apply-template\") ? 1 : s1.classList.contains(\"ew-apply-template\") ? -1 : 0) // Execute custom template first\r\n    .forEach((s, i) => addScript(s, \"scr_\" + id + \"_\" + i));\r\n  }\r\n\r\n  // Strip JavaScript in HTML loaded by Ajax\r\n  function stripScript(html) {\r\n    let matches = html.replaceAll(/<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig); // Do not strip scripts in template tags, use non-greedy [\\s\\S]*?\r\n    return Array.from(matches).filter(m => document.createRange().createContextualFragment(m[0]).querySelector(\"script:not([type]), script[type='text/javascript']\")).reduce((html, m) => html.replace(m[0], \"\"), html);\r\n  }\r\n\r\n  // Add SCRIPT tag\r\n  function addScript(text, id) {\r\n    let scr = text instanceof HTMLScriptElement ? text : document.createElement(\"SCRIPT\");\r\n    if ($$1.isString(text)) scr.text = text;\r\n    if (id) scr.id = id;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  }\r\n\r\n  // Remove JavaScript added by Ajax\r\n  function removeScript(id) {\r\n    if (id) $$1(\"script[id^='scr_\" + id + \"_']\").remove();\r\n  }\r\n\r\n  /**\r\n   * Clean HTML loaded by Ajax for modal dialog\r\n   *\r\n   * @param {string} html - HTML string\r\n   * @param {bool} keepScripts - Keep script tags or not\r\n   * @returns HTML string\r\n   */\r\n  function getContent(html, keepScripts) {\r\n    var _m$;\r\n    html = html.trim().replace(/<head>[\\s\\S]*<\\/head>/, \"\");\r\n    let body = keepScripts ? html : stripScript(html),\r\n      m = body.match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    body = (_m$ = m == null ? void 0 : m[0]) != null ? _m$ : body;\r\n    let $content = $$1(body).find(\"section.content\");\r\n    return $content[0] ? $content.html() : body;\r\n  }\r\n\r\n  // Get all options of Selection list or Radio/Checkbox list as array\r\n  function getOptions(obj) {\r\n    return obj != null && obj.options ? Array.prototype.map.call(obj.options, opt => [opt.value, opt.text]) : [];\r\n  }\r\n\r\n  /**\r\n   * Show dialog for enabling two factor authentication\r\n   */\r\n  function enable2FA() {\r\n    document.body.style.cursor = \"wait\";\r\n    if (sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"google\")) {\r\n      // Show QR Code and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      $$1.get(url, result => {\r\n        var _result$error4;\r\n        if (result != null && result.url) {\r\n          _prompt({\r\n            imageUrl: result.url,\r\n            html: ew.language.phrase(\"Scan2FAQrCode\"),\r\n            input: \"text\",\r\n            confirmButtonText: ew.language.phrase(\"Verify\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            willOpen: () => {\r\n              Swal.showLoading(Swal.getConfirmButton());\r\n              Swal.disableInput();\r\n              Swal.getImage().onload = () => {\r\n                Swal.enableInput();\r\n                Swal.hideLoading();\r\n                Swal.getInput().focus();\r\n              };\r\n            },\r\n            preConfirm: value => {\r\n              return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error3;\r\n            if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n              $$1(\"#enable-2fa\").addClass(\"d-none\");\r\n              $$1(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error4 = result.error) != null && _result$error4.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    } else {\r\n      // Send OTP and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      let html = sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"email\") ? ew.language.phrase(\"EnterOTPEmailAddress\") : ew.language.phrase(\"EnterOTPMobileNumber\");\r\n      $$1.get(url, result => {\r\n        var _result$error7;\r\n        if (result.success) {\r\n          _prompt({\r\n            html: html,\r\n            input: \"text\",\r\n            inputValue: result.account,\r\n            confirmButtonText: ew.language.phrase(\"SendOTP\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            preConfirm: value => {\r\n              return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"SendOTPFailed\").replace(\"%e\", getError(result)));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error5;\r\n            if (result != null && (_result$error5 = result.error) != null && _result$error5.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              // Verify OTP\r\n              _prompt({\r\n                html: ew.language.phrase(\"EnterSecurityCode\"),\r\n                input: \"text\",\r\n                confirmButtonText: ew.language.phrase(\"Verify\"),\r\n                showLoaderOnConfirm: true,\r\n                allowEscapeKey: false,\r\n                allowOutsideClick: () => !Swal.isLoading(),\r\n                preConfirm: value => {\r\n                  return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                    if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                    return result;\r\n                  }).catch(error => Swal.showValidationMessage(error));\r\n                }\r\n              }, result => {\r\n                var _result$error6;\r\n                if (result != null && (_result$error6 = result.error) != null && _result$error6.description) {\r\n                  showToast(result.error.description);\r\n                } else if (result != null && result.success) {\r\n                  showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n                  $$1(\"#enable-2fa\").addClass(\"d-none\");\r\n                  $$1(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n                }\r\n              }).catch(err => showToast(err == null ? void 0 : err.message));\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error7 = result.error) != null && _result$error7.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show dialog for disabling two factor authentication\r\n   */\r\n  function disable2FA() {\r\n    _prompt({\r\n      html: ew.language.phrase(\"Disable2FAConfirm\"),\r\n      preConfirm: value => {\r\n        if (value) return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET])).then(result => {\r\n          var _result$error8;\r\n          if (result != null && (_result$error8 = result.error) != null && _result$error8.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"2FAResetFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error9;\r\n      if (result != null && (_result$error9 = result.error) != null && _result$error9.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"2FADisabled\"), \"success\");\r\n        $$1(\"#enable-2fa\").removeClass(\"d-none\");\r\n        $$1(\"#disable-2fa, #backup-codes\").addClass(\"d-none\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n\r\n  /**\r\n   * Toggle chat\r\n   */\r\n  function toggleChat(value) {\r\n    document.body.style.cursor = \"wait\";\r\n    $$1.get(getApiUrl([ew.API_CHAT_ACTION, value]), result => {\r\n      var _result$error10;\r\n      // value should be 1 or 0\r\n      if (result != null && (_result$error10 = result.error) != null && _result$error10.description) {\r\n        _alert(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        $$1(\"#disable-chat\").toggleClass(\"d-none\", !value);\r\n        $$1(\"#enable-chat\").toggleClass(\"d-none\", !!value);\r\n        $$1(\".chat-wrapper\")[value ? \"fadeIn\" : \"fadeOut\"]();\r\n      }\r\n    }).fail((jqXHR, textStatus, errorThrown) => _alert(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n  }\r\n\r\n  /**\r\n   * Show dialog for sending one time password\r\n   */\r\n  function sendOTP(account) {\r\n    _prompt({\r\n      html: ew.language.phrase(\"SendOTPConfirm\"),\r\n      preConfirm: value => {\r\n        let url = account ? getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, account]) : getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP]);\r\n        if (value) return $$1.get(url).then(result => {\r\n          var _result$error11;\r\n          if (result != null && (_result$error11 = result.error) != null && _result$error11.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"SendOTPFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error12;\r\n      if (result != null && (_result$error12 = result.error) != null && _result$error12.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"SendOTPSuccess\"), \"success\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n\r\n  /**\r\n   * Show backup codes for two factor authentication\r\n   */\r\n  function showBackupCodes() {\r\n    let html = \"<p>\" + ew.language.phrase(\"BackupCodesMsg\") + \"</p>\";\r\n    return _alert({\r\n      title: ew.language.phrase(\"BackupCodes\"),\r\n      html: html,\r\n      showDenyButton: true,\r\n      showLoaderOnDeny: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"CopyToClipboard\"),\r\n      denyButtonText: ew.language.phrase(\"GetNewCodes\"),\r\n      customClass: {\r\n        denyButton: \"btn btn-primary ew-swal2-deny-button\"\r\n      },\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        Swal.disableButtons();\r\n        $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.enableButtons();\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n      },\r\n      preConfirm: () => {\r\n        let codes = copyToClipboard(Swal.getHtmlContainer().querySelector(\"textarea\"));\r\n        if (codes) showToast(ew.language.phrase(\"CopiedToClipboard\"), \"success\");\r\n        return false; // Keep the alert open\r\n      },\r\n      preDeny: async () => {\r\n        Swal.showLoading(Swal.getDenyButton());\r\n        await $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_NEW_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n        return false; // Keep the alert open\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n  function addOptionDialogShow(args) {\r\n    var _args$evt2;\r\n    args.lnk = args.lnk || ((_args$evt2 = args.evt) == null ? void 0 : _args$evt2.currentTarget);\r\n\r\n    // Hide dialog\r\n    var _hide = function () {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n    var $dlg = ew.addOptionDialog || $$1(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n      return;\r\n    }\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true);\r\n\r\n    // Submission success\r\n    var _submitSuccess = function (data) {\r\n      var _results;\r\n      var results = data,\r\n        args = $dlg.data(\"args\"),\r\n        frm = forms.get(args.lnk),\r\n        // form object\r\n        objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n        // Get object name from form\r\n        el = args.el,\r\n        // HTML element name\r\n        re = /^x(\\d+)_/,\r\n        m = el.match(re),\r\n        // Check row index\r\n        prefix = m ? m[0] : \"x_\",\r\n        index = m ? m[1] : -1,\r\n        name = el.replace(re, \"x_\"),\r\n        list = frm.getList(el);\r\n      if ($$1.isString(data)) results = parseJson(data);\r\n      if ((_results = results) != null && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n          form = frm.$element[0],\r\n          // HTML form or DIV\r\n          obj = getElements(el, form);\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n            dfs = list.displayFields.slice(),\r\n            // Clone\r\n            ffs = list.filterFields.slice(),\r\n            // Clone\r\n            pfs = list.parentFields.slice(); // Clone\r\n          pfs.forEach((pf, i) => {\r\n            if (pf.split(\" \").length == 1)\r\n              // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n            row = {\r\n              lf: lfv\r\n            };\r\n          dfs.forEach((df, i) => {\r\n            if (df in result) row[\"df\" + (i > 0 ? i + 1 : \"\")] = result[df];\r\n          });\r\n          ffs.forEach((ff, i) => {\r\n            if (ff in result) row[\"ff\" + (i > 0 ? i + 1 : \"\")] = result[ff];\r\n          });\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null)\r\n              // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(pf => getOptionValues(pf, form)),\r\n              // Get the parent field values\r\n              args = {\r\n                \"data\": row,\r\n                \"parents\": arp,\r\n                \"valid\": true,\r\n                \"name\": getId(obj),\r\n                \"form\": form\r\n              };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                txt = newOption(obj, row, form);\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  $$1(obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n                if (isAutoSuggest(obj)) {\r\n                  $$1(obj).val(lfv).trigger(\"change\");\r\n                  $$1(obj.input).val(txt).trigger(\"focus\");\r\n                } else {\r\n                  $$1(obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n              var $form = $$1(form),\r\n                suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n                cnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix).val();\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form),\r\n                    ar2 = getOptions(obj2);\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2))\r\n                    // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  obj2.render == null || obj2.render(); // Selection list\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n        // Failure\r\n        if ((_results2 = results) != null && _results2.error) {\r\n          let error = getError(results);\r\n          if (error) _alert(error);\r\n        } else {\r\n          var msg,\r\n            $div = $$1(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n            msg = ((_results3 = results) == null ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n          _alert(msg);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Fail\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Submit\r\n    var _submit = async function (e) {\r\n      let $dlg = ew.addOptionDialog,\r\n        form = $dlg.find(\".modal-body form\")[0],\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target,\r\n        $btn = $$1(btn);\r\n      if (await frm.canSubmit(e)) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        document.body.style.cursor = \"wait\";\r\n        $$1.post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $$1(form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          document.body.style.cursor = \"default\";\r\n        });\r\n      }\r\n      return false;\r\n    };\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    // Get form HTML\r\n    var success = function (data) {\r\n      var frm = forms.get(args.lnk),\r\n        prefix = \"x_\",\r\n        m = args.el.match(/^(x\\d+_)/);\r\n      if (m)\r\n        // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n        pfs = list.parentFields.slice() // Clone\r\n        .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf),\r\n        // Parent field in the same table, add row index\r\n        form = frm.htmlForm,\r\n        ar = pfs.map(pf => getOptionValues(pf, form)),\r\n        ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n        ffs = list.filterFieldVars.slice(); // Clone\r\n      $dlg.find(\".modal-title\").html($$1(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n      if (form) {\r\n        // Set the filter field value\r\n        $$1(form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        // $document.one(\"updatedone\", () => {\r\n        //     ar.forEach((v, i) => {\r\n        //         let obj = getElements(ffs[i], form);\r\n        //         if (obj) {\r\n        //             if (obj.options || obj.length) { // Selection list\r\n        //                 $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n        //             } else {\r\n        //                 selectOption(obj, v);\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // });\r\n      }\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach((v, i) => {\r\n          var obj = getElements(ffs[i], form);\r\n          if (obj && v[0]) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (obj.options || obj.length) {\r\n              // Selection list\r\n              newOption(obj, {\r\n                lf: v[0]\r\n              }, frm, true);\r\n              // $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n            } else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n      executeScript(data, args.el, true);\r\n      $dlg.trigger(\"load.ew\"); // Trigger load event\r\n    };\r\n    $$1.get(args.url, success).fail(_fail);\r\n    return false;\r\n  }\r\n\r\n  // Hide Modal dialog\r\n  function modalDialogHide() {\r\n    let $dlg = $$1(this),\r\n      args = $dlg.data(\"args\"),\r\n      frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    removeScript(\"modal_dialog\");\r\n    frm == null || frm.destroyEditor();\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass((i, className) => {\r\n      let m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data({\r\n      showing: false,\r\n      url: null\r\n    });\r\n    if (args != null && args.reload) window.location.reload();\r\n  }\r\n\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of content\r\n   * @param {string} args.html - HTML content\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {boolean} args.footer - Show footer (default true)\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Class name of modal dialog 'modal-sm'|'modal-md'|modal-lg'|'modal-xl' (default)\r\n   * @param {Function} args.callback - Callback function (success function after submitting the form)\r\n   * @returns false\r\n   */\r\n  function modalDialogShow(args) {\r\n    var _args$evt3, _bootstrap$Tooltip$ge4, _args$evt4, _args$evt5, _$dlg$data, _$dlg$data2;\r\n    args.lnk || (args.lnk = (_args$evt3 = args.evt) == null ? void 0 : _args$evt3.currentTarget);\r\n    (_bootstrap$Tooltip$ge4 = bootstrap.Tooltip.getInstance(args.lnk)) == null || _bootstrap$Tooltip$ge4.hide();\r\n    let {\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      f = args.f || ((_args$evt4 = args.evt) == null || (_args$evt4 = _args$evt4.currentTarget) == null ? void 0 : _args$evt4.form);\r\n    if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n      // Grid-Edit and Multi-Edit/Update\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let url = args.url || ((_args$evt5 = args.evt) == null || (_args$evt5 = _args$evt5.currentTarget) == null ? void 0 : _args$evt5.dataset.url),\r\n      $dlg = ew.modalDialog || $$1(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    $dlg.on(\"hidden.bs.modal\", () => $dlg.data(\"showing\", false));\r\n    if ($dlg.data(\"showing\") && url && $dlg.data(\"url\") == url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: url\r\n    });\r\n    args.reload = false;\r\n\r\n    // Size\r\n    $dlg.find(\".modal-dialog\").removeClass(\"modal-sm modal-md modal-lg modal-xl\").addClass(args.size || \"modal-xl\");\r\n\r\n    // Caption\r\n    let _caption = function () {\r\n      let args = $dlg.data(\"args\"),\r\n        $lnk = $$1(args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    };\r\n\r\n    // Button text\r\n    let _button = function () {\r\n      let args = $dlg.data(\"args\");\r\n      if (args.btn === null) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);\r\n      return _caption();\r\n    };\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Check if current page\r\n    let _current = function (url) {\r\n      let a = document.createElement(\"a\");\r\n      a.href = url;\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    };\r\n\r\n    // Close hidden dialog\r\n    let _hide = function () {\r\n      if ($dlg.data(\"showing\") && !$dlg.hasClass(\"show\")) $dlg.data(\"showing\", false).trigger(\"hidden.bs.modal\"); // Call modalDialogHide()\r\n    };\r\n\r\n    /**\r\n     * Handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     * @param {boolean} result.success - Result => Call callback if function\r\n     */\r\n    let handleResult = function (result) {\r\n      let error = getError(result);\r\n      if (error) {\r\n        _alert(error);\r\n        _hide();\r\n      } else if ($$1.isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, \"warning\");\r\n        _hide();\r\n      } else if ($$1.isString(result.message)) {\r\n        _alert(result.message, \"body\");\r\n        _hide();\r\n      } else if (result.success && !isFunction$2(args == null ? void 0 : args.callback) || $$1.isString(result.successMessage)) {\r\n        var _lnk$closest, _lnk$closest2, _tabPane$parentNode;\r\n        let args = $dlg.data(\"args\"); // Get data before hiding\r\n        $dlg.modal(\"hide\");\r\n        if (result.successMessage) showToast(result.successMessage, \"success\");\r\n        let lnk = args == null ? void 0 : args.lnk,\r\n          btnId = lnk == null || (_lnk$closest = lnk.closest(\".dropdown-menu[aria-labelledby]\")) == null ? void 0 : _lnk$closest.getAttribute(\"aria-labelledby\"),\r\n          btn = btnId ? document.getElementById(btnId) : null,\r\n          tabPane = (_lnk$closest2 = lnk == null ? void 0 : lnk.closest(\".tab-pane\")) != null ? _lnk$closest2 : btn == null ? void 0 : btn.closest(\".tab-pane\"),\r\n          navItem = tabPane == null || (_tabPane$parentNode = tabPane.parentNode) == null || (_tabPane$parentNode = _tabPane$parentNode.parentNode) == null ? void 0 : _tabPane$parentNode.querySelector(\"[data-bs-toggle='tab'][data-bs-target='#\" + tabPane.id + \"']:not([tabindex])\"); // The active button does not have tabindex=\"-1\r\n        $dlg.trigger(\"success.ew.modal\", [{\r\n          result,\r\n          tabPane,\r\n          navItem\r\n        }]); // Reload tab content\r\n      } else if (result.reload) {\r\n        $dlg.modal(\"hide\");\r\n        window.location.reload();\r\n      } else if ($$1.isBoolean(result.success) && isFunction$2(args == null ? void 0 : args.callback)) {\r\n        // If success or failure and callback is function, call the callback\r\n        $dlg.modal(\"hide\");\r\n        args.callback(result);\r\n      } else if (result.url) {\r\n        let url = result.url;\r\n        if (result.modal) {\r\n          if (_current(url)) {\r\n            // Return to current page\r\n            if (!result.error) {\r\n              $dlg.modal(\"hide\");\r\n              refresh(fetch(url));\r\n            }\r\n          } else {\r\n            // Return to other page\r\n            args.reload = true;\r\n            args.url = url;\r\n            if (result.caption) args.caption = result.caption;\r\n            args.btn = result.view ? null : \"\";\r\n            $dlg.data({\r\n              args,\r\n              url\r\n            });\r\n            url = setSearchParams(url, {\r\n              modal: \"1\",\r\n              rnd: random()\r\n            });\r\n            document.body.style.cursor = \"wait\";\r\n            $$1.get(url).done(success).fail(_fail).always(_always);\r\n          }\r\n        } else {\r\n          $dlg.modal(\"hide\");\r\n          window.location = sanitizeUrl(url);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Create buttons\r\n    let _createButtons = function () {\r\n      let $footer = $dlg.find(\".modal-footer\").last().empty(),\r\n        // Empty the footer (Find the last footer in case users add their own in the dialog)\r\n        $btn = $dlg.find(\".card-body button[type=submit]\").first().addClass(\"ew-submit\").on(\"click\", _submit); // Find submit button found in card body\r\n      if (!$btn[0]) {\r\n        // No submit button found in card body\r\n        $dlg.find(\".modal-body .ew-modal-buttons\").contents().clone().find(\"button\").each(function () {\r\n          // Find buttons in <template>\r\n          if (this.type == \"submit\") {\r\n            this.type = \"button\"; // Convert to normal button\r\n            this.classList.add(\"ew-submit\");\r\n            if (this.id == \"btn-cancel\") this.classList.add(\"ew-cancel\"); // Cancel button with type=\"submit\"\r\n            let $this = $$1(this);\r\n            $this.on(\"click\", function (e) {\r\n              if (this.dataset.ewAction == \"set-action\")\r\n                // Set value first\r\n                this.form.elements[\"action\"].value = this.dataset.value;\r\n              $this.data(\"ajax\") === false ? $$1(this.form).trigger(\"submit\") : _submit(e);\r\n            });\r\n          } else if (this.id == \"btn-cancel\") {\r\n            if (this.dataset.href) {\r\n              $$1(this).on(\"click\", function (e) {\r\n                let form = $dlg.find(\".modal-body form\")[0],\r\n                  frm = forms.get(form.id);\r\n                frm == null || frm.updateTextArea();\r\n                if (frm != null && frm.modified && ew.hasFormData(this.form)) {\r\n                  ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n                    if (result) {\r\n                      if (samePath(this.dataset.href, currentUrl.pathname)) $dlg.modal(\"hide\");else redirect(this.dataset.href);\r\n                    }\r\n                  });\r\n                } else {\r\n                  if (samePath(this.dataset.href, currentUrl.pathname)) $dlg.modal(\"hide\");else redirect(this.dataset.href);\r\n                }\r\n              });\r\n            } else {\r\n              $$1(this).on(\"click\", () => $dlg.modal(\"hide\"));\r\n            }\r\n          }\r\n          $footer[0].appendChild(this);\r\n        }); // Clone buttons and append to footer\r\n        if (!$dlg.find(\".card-body button[type=submit], .modal-footer .btn\")[0]) {\r\n          // No buttons found\r\n          let btn = _button();\r\n          if (btn) {\r\n            $$1('<button type=\"button\" class=\"btn btn-primary ew-btn\">' + btn + '</button>').on(\"click\", _submit).appendTo($footer);\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n          } else {\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CloseBtn\") + '</button>');\r\n          }\r\n        }\r\n        $footer.find(\"button\").on(\"mousedown\", e => e.preventDefault()); // Do not focus button by mouse down\r\n        $footer.find(\".btn-primary\").focus();\r\n      }\r\n    };\r\n\r\n    // Check return URL\r\n    let _return = response => {\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && args.table && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $$1(\".ew-grid.\" + args.table).find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n\r\n    // Submit success\r\n    let _submitSuccess = async function (response) {\r\n      let args = $dlg.data(\"args\"); // Get arguments first or it will be removed by modalDialogHide()\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (isFunction$2(args == null ? void 0 : args.callback)) {\r\n          // If callback is function, call the callback function then return\r\n          let error = getError(result);\r\n          if (error) showToast(error);else $dlg.modal(\"hide\");\r\n          args.callback(result);\r\n          return;\r\n        }\r\n        handleResult(result);\r\n      } else {\r\n        let data = await response.clone().text(),\r\n          body = getContent(data).trim(); // Make sure no leading/trailing space\r\n        if (body.startsWith(\"<\") && body.endsWith(\">\")) {\r\n          // HTML\r\n          if (args.ajax && args.action == \"add\" && document.querySelector(\"main.ew-no-record\") && $$1(body).find(\"main:not(.ew-no-record)\")[0]) {\r\n            // No existing record, new record added\r\n            $dlg.modal(\"hide\");\r\n            await refresh(Promise.resolve(response));\r\n            _return(response);\r\n            return;\r\n          }\r\n          $dlg.find(\".modal-body\").html(body);\r\n          $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n          // If callback is function and no modal buttons, call the callback function then return\r\n          if (!$dlg.find(\".modal-body .ew-modal-buttons\").length && isFunction$2(args == null ? void 0 : args.callback)) {\r\n            $dlg.modal(\"hide\");\r\n            args.callback(response);\r\n            return;\r\n          }\r\n          _createButtons();\r\n          executeScript(data, \"modal_dialog\", true);\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n          _alert(data);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Submit\r\n    let _submit = async function (e) {\r\n      let form = $dlg.find(\".modal-body form\")[0],\r\n        $form = $$1(form),\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target;\r\n      if (btn.classList.contains(\"disabled\")) return false;\r\n      if (btn.classList.contains(\"ew-cancel\")) {\r\n        // Cancel button with type=\"submit\"\r\n        $$1.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (await frm.canSubmit(e)) {\r\n        document.body.style.cursor = \"wait\";\r\n        let p = _fetch($form.attr(\"action\"), {\r\n          method: \"POST\",\r\n          body: $form.serialize()\r\n        }).catch(_fail).finally(() => {\r\n          frm.enableForm();\r\n          _always();\r\n        });\r\n        if (frm.submitWithFetch) {\r\n          p.then(async response => {\r\n            var _resp$headers$get;\r\n            // Check error before refresh\r\n            let resp = response.clone(),\r\n              isJson = (_resp$headers$get = resp.headers.get(\"Content-Type\")) == null ? void 0 : _resp$headers$get.includes(\"json\"),\r\n              result = isJson ? await resp.json() : null,\r\n              hasErrors = (result == null ? void 0 : result.validation) || getError(result);\r\n            if (!isJson || !hasErrors)\r\n              // HTML or JSON without error => close dialog\r\n              $dlg.modal(\"hide\");\r\n            let args = {\r\n                form,\r\n                result: Promise.resolve(response),\r\n                context: hasErrors ? \"#ew-modal-dialog.show .modal-body\" : null\r\n              },\r\n              evt = $$1.Event(\"aftersubmit\", {\r\n                originalEvent: e\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          });\r\n        } else {\r\n          p.then(_submitSuccess);\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    let success = function (data) {\r\n      let result = parseJson(data);\r\n      if ($$1.isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        let args = $dlg.data(\"args\"),\r\n          $lnk = $$1(args.lnk),\r\n          body = getContent(data);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        $dlg.find(\".modal-body\").html(body);\r\n        $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n        _createButtons();\r\n        $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n        let lnkData = $lnk.data() || {};\r\n        if (lnkData.table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + lnkData.table);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", e => {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $dlg.find(\".modal-footer .btn.btn-primary\").trigger(\"click\");\r\n            return false;\r\n          }\r\n        });\r\n        if (lnkData.ajax && lnkData.table && lnkData.action == \"view\") {\r\n          // Modal View page and use Ajax actions\r\n          [\".ew-add\", \".ew-copy\", \".ew-edit\", \".ew-delete\"].forEach(className => {\r\n            let $dlglnk = $dlg.find(\".modal-body \" + className + \"[data-ew-action=modal]\"),\r\n              // Link inside modal dialog\r\n              $lnk = $$1(\"[data-ew-action=modal][data-table='\" + lnkData.table + \"'][data-url='\" + $dlglnk.data(\"url\") + \"']\").not(\".modal-body *\").first(); // Link outside modal dialog\r\n            $lnk[0] ? $dlglnk.on(\"click\", e => {\r\n              e.preventDefault();\r\n              e.stopImmediatePropagation();\r\n              $lnk.trigger(\"click\"); // Click the link outside\r\n            }) : $dlglnk.addClass(\"d-none\"); // Hide the link\r\n          });\r\n        }\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"modal_dialog\", true);\r\n        // Fix for CKEditor\r\n        let modal = bootstrap.Modal.getInstance($dlg[0]);\r\n        if (!modal._focustrap.__handleFocusin) {\r\n          modal._focustrap.__handleFocusin = modal._focustrap._handleFocusin;\r\n          modal._focustrap._handleFocusin = function (e) {\r\n            var _e$target10;\r\n            // Use function for \"this\"\r\n            if ((_e$target10 = e.target) != null && _e$target10.matches(\"[class^=cke_dialog_]\"))\r\n              // Element from CKEditor dialog\r\n              return; // Do not focus the modal\r\n            this.__handleFocusin(e);\r\n          };\r\n        }\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event\r\n      }\r\n    };\r\n    let show = function (html) {\r\n      let args = $dlg.data(\"args\");\r\n      $dlg.find(\".modal-title\").html(_caption());\r\n      $dlg.find(\".modal-body\").html(html);\r\n      _createButtons();\r\n      $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n      ew.modalDialog = $dlg.modal(\"show\");\r\n    };\r\n\r\n    // Restore previous callback\r\n    if (args.callback === true && (_$dlg$data = $dlg.data(\"args\")) != null && _$dlg$data.callback) args.callback = $dlg.data(\"args\").callback;\r\n    if (url && (_$dlg$data2 = $dlg.data(\"args\")) != null && _$dlg$data2.reload) {\r\n      // About to load URL but previous result required reload\r\n      args.reload = true; // Carry the reload state to current args\r\n      $dlg.data(\"args\").reload = false; // Remove reload so \"hidden\" event will not reload\r\n    }\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n    if (url) {\r\n      document.body.style.cursor = \"wait\";\r\n      let params = ew.getSearchParams(url);\r\n      params.set(\"rnd\", random());\r\n      if (params.get(\"action\") != \"delete\") params.set(\"modal\", \"1\");\r\n      $$1.ajax({\r\n        url: setSearchParams(url, params),\r\n        method: f ? \"POST\" : \"GET\",\r\n        data: f ? $$1(f).serialize() : \"\",\r\n        headers: args.json ? {\r\n          Accept: \"application/json, */*; q=0.01\"\r\n        } : {} // JSON response\r\n      }).done(success).fail(_fail).always(_always);\r\n    } else if (args.html) {\r\n      show(args.html);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n  function importDialogShow(args) {\r\n    var _args$evt6, _bootstrap$Tooltip$ge5;\r\n    args.lnk = args.lnk || ((_args$evt6 = args.evt) == null ? void 0 : _args$evt6.currentTarget);\r\n    (_bootstrap$Tooltip$ge5 = bootstrap.Tooltip.getInstance(args.lnk)) == null || _bootstrap$Tooltip$ge5.hide();\r\n    let $dlg = ew.importDialog || $$1(\"#ew-import-dialog\");\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n      return false;\r\n    }\r\n    let $input = $dlg.find(\"#importfiles\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $bd = $dlg.find(\".modal-body\"),\r\n      $data = $bd.find(\":input[id!=importfiles]\"),\r\n      $message = $bd.find(\".message\"),\r\n      $progress = $bd.find(\".progress\"),\r\n      table,\r\n      sse;\r\n\r\n    // Add row to table\r\n    let addRow = function (result) {\r\n      let {\r\n          row,\r\n          success,\r\n          error,\r\n          count\r\n        } = result,\r\n        callback = () => {\r\n          table.addRow(row).then(r => r.getElement().classList.toggle(\"text-danger\", error));\r\n          if (error) console.log(ew.language.phrase(\"ImportRowError\").replace(\"%i\", count + \" \" + JSON.stringify(row)).replace(\"%e\", error));\r\n        };\r\n      row = {\r\n        \"_index\": count,\r\n        \"_success\": success,\r\n        \"_error\": error,\r\n        ...row\r\n      };\r\n      if (!table) {\r\n        table = new Tabulator(\"#ew-import-dialog .result\", $$1.extend({\r\n          data: [row],\r\n          index: \"_index\",\r\n          autoColumns: true,\r\n          autoColumnsDefinitions: definitions => {\r\n            definitions.forEach(column => {\r\n              column.headerSort = false;\r\n              column.resizable = false;\r\n              if ([\"_index\", \"_error\"].includes(column.field)) {\r\n                column.visible = false;\r\n              } else if (column.field == \"_success\") {\r\n                column.title = \"#\";\r\n                column.headerSort = true;\r\n                column.headerSortTristate = true;\r\n                column.formatter = cell => {\r\n                  cell.getElement().style.textOverflow = \"clip\";\r\n                  let row = cell.getRow(),\r\n                    data = row.getData();\r\n                  if (data._error) new bootstrap.Tooltip(row.getElement(), {\r\n                    placement: \"bottom\",\r\n                    title: data._error,\r\n                    container: \"#ew-import-dialog .result\"\r\n                  });\r\n                  return (data._success ? '<i class=\"fa-solid fa-check text-success\"></i>' : '<i class=\"fa-solid fa-xmark text-danger\"></i>') + \" #\" + data._index;\r\n                };\r\n              }\r\n            });\r\n            return definitions;\r\n          }\r\n        }, ew.importTabulatorOptions));\r\n        table.on(\"tableBuilt\", () => table.element.querySelector(\".tabulator-row\").classList.toggle(\"text-danger\", error));\r\n      } else {\r\n        table.initialized ? callback() : table.on(\"tableBuilt\", callback);\r\n      }\r\n    };\r\n\r\n    // Enable buttons\r\n    let enableButtons = enabled => $dlg.find(\".modal-footer .btn\").prop(\"disabled\", !enabled);\r\n\r\n    // Show message\r\n    let showMessage = function (msg, classname) {\r\n      let $msg = $$1(\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons(true);\r\n    };\r\n\r\n    // Hide message\r\n    let hideMessage = () => $message.addClass(\"d-none\").html(\"\");\r\n\r\n    // Show progress\r\n    let showProgress = (pc, classname) => $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"text-bg-success text-bg-info\").addClass(classname || \"text-bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n\r\n    // Hide progress\r\n    let hideProgress = () => $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n\r\n    // Upload progress\r\n    let uploadProgress = function (data) {\r\n      const pc = parseInt(100 * data.loaded / data.total, 10);\r\n      showProgress(pc, \"text-bg-primary\");\r\n      if (pc === 100) showMessage(ew.language.phrase(\"ImportUploadComplete\"), \"text-primary\");else showMessage(ew.language.phrase(\"ImportUploadProgress\").replace(\"%p\", pc), \"text-primary\");\r\n    };\r\n\r\n    // Update import progress\r\n    let updateProgress = function (e) {\r\n      const result = parseJson(e.data) || {};\r\n      try {\r\n        let tcnt = result.totalCount || 0,\r\n          cnt = result.count || 0,\r\n          scnt = result.successCount || 0,\r\n          fcnt = result.failCount || 0,\r\n          filename = result.file;\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          if (result.row) addRow(result);\r\n          let pc = parseInt(100 * cnt / tcnt, 10);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename).replace(\"%s\", scnt).replace(\"%e\", fcnt), fcnt > 0 ? \"text-danger\" : \"text-primary\");\r\n        }\r\n      } catch (e) {}\r\n    };\r\n\r\n    // Import complete\r\n    let importComplete = function (e) {\r\n      var _sse;\r\n      let msg = [],\r\n        result = parseJson(e.data) || {},\r\n        fileResults = result.files;\r\n      showProgress(100);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      if (Array.isArray(fileResults)) {\r\n        fileResults.forEach(fileResult => {\r\n          let tcnt = fileResult.totalCount || 0,\r\n            cnt = fileResult.count || 0,\r\n            scnt = fileResult.successCount || 0,\r\n            fcnt = fileResult.failCount || 0;\r\n          msg.push(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt));\r\n        });\r\n      }\r\n      if (result.success) {\r\n        if (result.rollbacked) msg.push(ew.language.phrase(\"ImportSave\"));\r\n        showMessage(msg.join(\"<br>\"), \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (ew.IMPORT_MAX_FAILURES > 0 && result.failCount >= ew.IMPORT_MAX_FAILURES) msg.push(ew.language.phrase(\"ImportMaxFailuresExceeded\").replace(\"%s\", ew.IMPORT_MAX_FAILURES));\r\n        showMessage(msg.join(\"<br>\"), \"text-danger\"); // Show error message\r\n      }\r\n      // hideProgress();\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").prop(\"disabled\", false); // Enable the close button\r\n      let $btn = $dlg.find(\".modal-footer .ew-import-btn\").toggleClass(\"d-none\", !result.rollbacked || !result.success); // Show/Hide the import button\r\n      if (result.rollbacked) $btn.off(\"click\").one(\"click\", saveImport);\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse = sse) == null || _sse.close();\r\n    };\r\n\r\n    // Import fail\r\n    let importFail = function (e) {\r\n      var _sse2;\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      let result = parseJson(e.data) || {};\r\n      if (result.error) showMessage(result.error, \"text-danger\");\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse2 = sse) == null || _sse2.close();\r\n    };\r\n\r\n    // Import file\r\n    let importFiles = function (filetoken) {\r\n      var _table;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table = table) == null || _table.clearData();\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      params.set(\"rollback\", \"1\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n\r\n    // Save import\r\n    let saveImport = function (e) {\r\n      var _table2;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table2 = table) == null || _table2.clearData();\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, $input.data(ew.API_FILE_TOKEN_NAME));\r\n      params.set(\"rollback\", \"0\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n    let options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXTENSIONS.replace(/,/g, '|') + ')$', 'i');\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        singleFileUploads: false,\r\n        dropZone: $dropzone,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n        },\r\n        beforeSend: function (jqxhr, settings) {\r\n          settings.data.set(\"session\", ew.SESSION_ID);\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          if (ew.API_JWT_TOKEN) jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function (e, data) {\r\n          var _data$result;\r\n          if (Array.isArray(data == null || (_data$result = data.result) == null || (_data$result = _data$result.files) == null ? void 0 : _data$result.importfiles)) {\r\n            let errors = [];\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) errors.push(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error));\r\n            });\r\n            if (errors.length) {\r\n              showMessage(errors.join(\"\\n\"), \"text-danger\"); // Show upload errors for each file\r\n            } else {\r\n              table = null; // Reset\r\n              importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n            }\r\n          }\r\n        },\r\n        change: function (e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function (e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n        fail: function (e, data) {\r\n          showMessage(ew.language.phrase(\"ImportServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function (e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      let $this = $$1(this);\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.on(\"show.bs.modal\", function () {\r\n      var _this$querySelector, _table3, _table4;\r\n      hideProgress();\r\n      (_this$querySelector = this.querySelector(\".modal-footer .ew-import-btn\")) == null || _this$querySelector.classList.add(\"d-none\");\r\n      (_table3 = table) == null || _table3.element.removeAttribute(\"style\");\r\n      (_table4 = table) == null || _table4.destroy();\r\n      table = null;\r\n    }).modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Auto-fill\r\n  function autoFill(el) {\r\n    let f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    let ar = getOptionValues(el),\r\n      id = getId(el),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      rowindex = m ? m[2] : \"\",\r\n      list = forms.get(el).getList(id),\r\n      dest_array = list.autoFillTargetFields;\r\n    let success = function (data) {\r\n      let results = data == null ? void 0 : data.records,\r\n        result = Array.isArray(results) && results.length > 0 ? results[0] : [];\r\n      for (let j = 0; j < dest_array.length; j++) {\r\n        let destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n        if (destEl) {\r\n          let val = $$1.isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\",\r\n            args = {\r\n              results,\r\n              result,\r\n              data: val,\r\n              form: f,\r\n              name: id,\r\n              target: dest_array[j],\r\n              cancel: false,\r\n              trigger: true\r\n            };\r\n          $$1(el).trigger(\"autofill\", [args]); // Fire event\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $$1(destEl).data(\"editor\").set();\r\n          } else if (destEl.type == \"checkbox\") {\r\n            // Boolean checkbox\r\n            destEl.checked = convertToBool(val);\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n          if (args.trigger) $$1(destEl).trigger(\"change\");\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      let data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f));\r\n      // Add parent field values\r\n      let parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (let i = 0, len = parentId.length; i < len; i++) {\r\n          let ar = parentId[i].split(\" \");\r\n          if (ar.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n      let arp = parentId.map(pid => getOptionValue(pid, f)); // Get parent field values\r\n      arp.forEach((p, i) => data[\"v\" + (i + 1)] = p); // Filter by parent fields\r\n      return $$1.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n    return success();\r\n  }\r\n\r\n  // Set up tooltip links as popovers\r\n  function tooltip(i, el) {\r\n    var $this = $$1(el),\r\n      $tt = $$1(\"#\" + $this.data(\"tooltip-id\")),\r\n      trig = $this.data(\"trigger\") || \"hover\",\r\n      dir = $this.data(\"placement\") || \"auto\";\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n    if (!bootstrap.Popover.getInstance(el)) {\r\n      $this.popover({\r\n        ...ew.popoverOptions,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: document.getElementById(\"ew-tooltip\"),\r\n        content: $tt.html()\r\n      }).on(\"show.bs.popover\", function () {\r\n        var wd = $this.data(\"tooltip-width\");\r\n        if (wd)\r\n          // Set width before show\r\n          $$1(bootstrap.Popover.getInstance(this)._getTipElement()).css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init search filters\r\n   */\r\n  function initSearchFilters(e) {\r\n    var _e$target11;\r\n    let el = (_e$target11 = e == null ? void 0 : e.target) != null ? _e$target11 : document,\r\n      btn = el == null ? void 0 : el.querySelector(\".ew-filter-option\");\r\n    if (ew.CLIENT_SEARCH_FILTER || ew.SERVER_SEARCH_FILTER && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n      $$1(btn).removeClass(\"d-none\").find(\".ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n        var _frm$filterList$filte, _frm$filterList;\r\n        let formId = $$1(this).find(\".ew-save-filter[data-form], .ew-delete-filter[data-form]\").data(\"form\"),\r\n          frm = ew.forms.get(formId),\r\n          filters = ew.CLIENT_SEARCH_FILTER ? ew.parseJson(localStorage.getItem(ew.PROJECT_NAME + \"_\" + frm.id + \"_filters\") || \"[]\") || [] : (_frm$filterList$filte = frm == null || (_frm$filterList = frm.filterList) == null ? void 0 : _frm$filterList.filters) != null ? _frm$filterList$filte : [];\r\n        frm.setupFilters(e, filters.filter(val => Array.isArray(val) && val.length == 2));\r\n      });\r\n    } else {\r\n      btn == null || btn.classList.add(\"d-none\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.exportSelected - Exported selected only\r\n   * @param {string} args.url - URL of content (for Custom Template)\r\n   * @param {string} args.exportId - Export ID (for Custom Template)\r\n   * @returns false\r\n   */\r\n  function emailDialogShow(args) {\r\n    let $dlg = ew.emailDialog || $$1(\"#ew-email-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $$1(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n      return false;\r\n    }\r\n    let form = args.evt.currentTarget.form;\r\n    if (args.exportSelected && !keySelected(form)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    if (!frm) {\r\n      frm = new FormBuilder().setId($f.attr(\"id\")).addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = mergeSearchParams($f.serialize(), args.key, getchartParams(), form && args.exportSelected ? $$1(form).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize() : null); // Export selected\r\n        $dlg.modal(\"hide\");\r\n        args.custom // Custom Template\r\n        ? _export({\r\n          ...args,\r\n          ...{\r\n            export: \"email\",\r\n            custom: true,\r\n            emailForm: $f[0]\r\n          }\r\n        }) : exportEmail($f.find(\"#tblvar\").val(), data);\r\n        return false;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew.emailDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Export to email\r\n  function exportEmail(tblVar, data) {\r\n    let swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(getApiUrl([ew.API_EXPORT_ACTION, \"email\", tblVar]) + \"?rnd=\" + random(), {\r\n          // Post to Export API\r\n          method: \"POST\",\r\n          body: data\r\n        }).then(async response => {\r\n          swal.hideLoading();\r\n          let result = await response.json();\r\n          if (result != null && result.success) {\r\n            swal.update({\r\n              html: \"<div class='text-success'>\" + result.message + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          } else {\r\n            var _ref3;\r\n            swal.update({\r\n              html: (_ref3 = \"<div class='text-danger'>\" + getError(result)) != null ? _ref3 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"fail\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          }\r\n        }).catch(error => {\r\n          var _ref4;\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: (_ref4 = \"<div class='text-danger'>\" + error) != null ? _ref4 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            tblVar,\r\n            data,\r\n            error\r\n          }]);\r\n        }).finally(() => {\r\n          swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            tblVar,\r\n            data\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Show drill down\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e != null && e.ctrlKey) {\r\n      let newUrl = setSearchParams(url, {\r\n        d: \"2\"\r\n      }); // Change \"d\" parameter to 2\r\n      return redirect(newUrl);\r\n    }\r\n    let $obj = $$1(obj),\r\n      config = $obj.data(\"config\") || {},\r\n      args = {\r\n        obj: $obj[0],\r\n        config: {\r\n          title: hdr,\r\n          placement: \"bottom\",\r\n          ...config\r\n        },\r\n        id,\r\n        url\r\n      };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    let ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n    config = args.config;\r\n    if (!bootstrap.Popover.getInstance(obj)) {\r\n      $obj.popover({\r\n        ...ew.popoverOptions,\r\n        ...config,\r\n        trigger: \"manual\",\r\n        template: '<div class=\"popover\" role=\"tooltip\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        // No .popover-arrow\r\n        content: ew.spinnerTemplate(),\r\n        container: $$1(\"#ew-drilldown-panel\").draggable(ew.draggableOptions),\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-bs-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        let data = $obj.data(\"args\").data;\r\n        $$1.ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function (data) {\r\n            let $tip = $$1(bootstrap.Popover.getInstance(obj)._getTipElement());\r\n            if (config.title) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"btn-close\" aria-label=\"' + ew.language.phrase(\"CloseBtn\") + '\"></button>' + config.title).find(\".btn-close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            let m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n            data = m ? m[0] : data;\r\n            let html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($$1(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id, true);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function (o) {\r\n            if (o.responseText) {\r\n              let popover = bootstrap.Popover.getInstance(obj);\r\n              if ($$1.isString(o.responseText) && o.responseText.startsWith(\"{\") && o.responseText.endsWith(\"}\")) {\r\n                var _result$error13, _result$error14;\r\n                let result = parseJson(o.responseText);\r\n                if (result != null && (_result$error13 = result.error) != null && _result$error13.type && result != null && (_result$error14 = result.error) != null && _result$error14.description) {\r\n                  popover == null || popover.hide();\r\n                  return _alert({\r\n                    title: result.error.type,\r\n                    html: result.error.description,\r\n                    customClass: {\r\n                      title: \"ew-swal2-title text-danger\",\r\n                      htmlContainer: \"ew-swal2-html-container text-danger\"\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n              popover == null || popover.setContent({\r\n                \".popover-body\": '<p class=\"text-danger\">' + o.responseText + '</p>'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - Object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n  function ajax(data, callback) {\r\n    if (!$$1.isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n    var obj = Object.assign({}, data);\r\n    var _convert = response => {\r\n      if ($$1.isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1)\r\n            // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n        return results;\r\n      }\r\n      return response;\r\n    };\r\n    var url = obj.url || getApiUrl(action),\r\n      // URL\r\n      type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n    if (isFunction$2(callback)) {\r\n      // Async\r\n      $$1.ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function (response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $$1.ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  }\r\n\r\n  // Get URL of current page\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  }\r\n\r\n  // Toggle search operator\r\n  function toggleSearchOperator(e, id, value) {\r\n    var el = e.currentTarget.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  }\r\n\r\n  // Toggle multi-column layout\r\n  function toggleLayout(el) {\r\n    var _bootstrap$Tooltip$ge6;\r\n    (_bootstrap$Tooltip$ge6 = bootstrap.Tooltip.getInstance(el)) == null || _bootstrap$Tooltip$ge6.hide();\r\n    document.body.style.cursor = \"wait\";\r\n    fetch(sanitizeUrl(setLayout(el.dataset.url, el.dataset.layout))).then(response => response.text()).then(html => {\r\n      let $grid = $$1(\".ew-multi-column-grid\").html($$1(\"<div>\" + html + \"</div>\").find(\".ew-multi-column-grid\").html());\r\n      ew.initPage({\r\n        target: $grid[0]\r\n      });\r\n      $grid.trigger(\"load.ew\");\r\n    }).catch(error => _alert(error)).finally(() => document.body.style.cursor = \"default\");\r\n  }\r\n\r\n  // Copy inner text to clipboard\r\n  function copyToClipboard(source) {\r\n    var _source, _source2;\r\n    source = $$1.isString(source) ? document.querySelector(source) : source;\r\n    const str = ((_source = source) == null ? void 0 : _source.value) || ((_source2 = source) == null ? void 0 : _source2.innerText);\r\n    if (str) {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = str;\r\n      el.setAttribute(\"readonly\", \"\");\r\n      el.style.position = \"absolute\";\r\n      el.style.left = \"-9999px\";\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  /**\r\n   * Validators\r\n   */\r\n\r\n  // Check integer\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_SEPARATOR)) return false;\r\n    return checkNumber(object_value);\r\n  }\r\n\r\n  // Check number\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    // let re = new RegExp(\"^[+\\-\\d\\s%\" + escapeRegExChars(ew.DECIMAL_SEPARATOR) + escapeRegExChars(ew.GROUPING_SEPARATOR) + ew.CURRENCY_SYMBOL + \"]+$\");\r\n    // return re.test(object_value) && ew.parseNumber(object_value) !== null;\r\n    return ew.parseNumber(object_value) !== null;\r\n  }\r\n\r\n  // Escape regular expression chars\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  }\r\n\r\n  // Check range\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if ($$1.isNumber(min_value) || $$1.isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = ew.parseNumber(object_value);\r\n    }\r\n    if (min_value !== null && object_value < min_value) return false;\r\n    if (max_value !== null && object_value > max_value) return false;\r\n    return true;\r\n  }\r\n\r\n  // Check phone\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check zip\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check credit card\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n      checkdigit = 0;\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n    return checkdigit % 10 == 0;\r\n  }\r\n\r\n  // Check social security number\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check emails\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check email\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  }\r\n\r\n  // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check URL\r\n  function checkUrl(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    try {\r\n      new URL(object_value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check by regular expression\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n    let doc, swal;\r\n    try {\r\n      // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n      [doc, swal] = [window.parent.document, window.parent.Swal];\r\n    } catch (e) {\r\n      // In case window.parent.document cannot be accessed\r\n      [doc, swal] = [window.document, window.Swal];\r\n    }\r\n    let p = (_arg$target = arg == null ? void 0 : arg.target) != null ? _arg$target : doc,\r\n      $div = $$1(p).find(\"div.ew-message-dialog.d-none\").first(),\r\n      msg = $div.length ? $div.text() : \"\"; // Text only\r\n    if ($$1.isString(arg)) msg = $$1(\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (type) {\r\n        let $alert = $div.find(\".alert-\" + type).toggleClass(\"alert-\" + type),\r\n          $heading = $alert.find(\".alert-heading\").detach(),\r\n          $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n        if ($alert[0]) {\r\n          let w = parseInt($content.css(\"width\"), 10); // Width specified\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          let $toast = showToast($alert.html(), type, $heading.html());\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n          return;\r\n        }\r\n      });\r\n    }\r\n    if ($$1.isString(arg)) {\r\n      return swal.fire({\r\n        ...ew.sweetAlertSettings,\r\n        html: arg\r\n      });\r\n    }\r\n  }\r\n\r\n  // Random number\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  }\r\n\r\n  // File upload\r\n  function upload(input) {\r\n    let $input = $$1(input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    let id = $input.attr(\"name\"),\r\n      nid = id.replace(/\\$/g, \"\\\\$\"),\r\n      tbl = $input.data(\"table\"),\r\n      multiple = $input.is(\"[multiple]\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $p = $input.closest(fieldContainerSelector),\r\n      $ft = $p.find(\"#ft_\" + nid),\r\n      $fn = $p.find(\"#fn_\" + nid),\r\n      $fa = $p.find(\"#fa_\" + nid),\r\n      $label = $p.find(\".ew-file-label\"),\r\n      label = $label.html();\r\n    let _done = function (e, data) {\r\n      if (data.result.files[0].error) return;\r\n      let name = data.result.files[0].name,\r\n        ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple)\r\n        // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n    let _deleted = function (e, data) {\r\n      let url = e.originalEvent.target.dataset.url,\r\n        params = getSearchParams(url),\r\n        fid = params.get(\"id\"),\r\n        name = params.get(fid);\r\n      if (name) {\r\n        let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [],\r\n          index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n    let _change = function (e, data) {\r\n      var _data$files;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) == null ? void 0 : _data$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      data.files.forEach(file => ar.push(file.name));\r\n      let cnt = $input.data(\"maxNumberOfFiles\");\r\n      if ($$1.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"));\r\n        return false;\r\n      }\r\n      let l = $input.data(\"size\");\r\n      if ($$1.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxFileLength\"));\r\n        return false;\r\n      }\r\n    };\r\n    let _confirmDelete = function (e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n    let _changed = function (e, data) {\r\n      var _data$files2, _data$result2;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) == null ? void 0 : _data$files2.length) > 0 || ((_data$result2 = data.result) == null || (_data$result2 = _data$result2.files) == null ? void 0 : _data$result2.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    };\r\n    let _completed = function (e, data) {\r\n      // After download template rendered\r\n      let evt = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(evt);\r\n      initPdfObjects(evt);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n    let _added = function (e, data) {\r\n      var _data$files3;\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) == null ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    };\r\n    // let _send = function(e, data) { // Before each file upload request\r\n    //     console.log(data);\r\n    // };\r\n    let uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION),\r\n      _downloadTemplate = $$1.templates(\"#template-download\"),\r\n      _uploadTemplate = $$1.templates(\"#template-upload\"),\r\n      form = getForm(input),\r\n      $form = $$1(form),\r\n      readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\") || $input.prop(\"disabled\");\r\n    if (readonly && !$input.prop(\"disabled\")) $input.prop(\"disabled\", true); // Disable input button if readonly\r\n    const {\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    } = $input.data();\r\n    const formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    };\r\n    $input.fileupload(ew.deepAssign({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      filesContainer: $ft,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $dropzone,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n      },\r\n      formData,\r\n      readonly // Custom\r\n    }, ew.uploadOptions))\r\n    // .on(\"fileuploadsend\", _send)\r\n    .on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed).on('fileuploadadded', _added).on('fileuploadcompleted', _completed);\r\n    if ($fn.val()) {\r\n      $$1.ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function (result) {\r\n          if (result != null && result[id]) {\r\n            let done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $$1.Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n          if (readonly)\r\n            // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @returns {number}\r\n   */\r\n  function parseNumber(data) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.parse(data, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get numbering system\r\n   */\r\n  function getNumberingSystem() {\r\n    return ew.NUMBERING_SYSTEM || new Intl.NumberFormat(ew.LANGUAGE_ID).resolvedOptions().numberingSystem;\r\n  }\r\n  let DateTime = luxon.DateTime,\r\n    Interval = luxon.Interval;\r\n\r\n  /**\r\n   * Format data by DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string|Number|Date} data - Date\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {string}\r\n   */\r\n  function formatDateTime(data, format) {\r\n    let dt;\r\n    if ($$1.isString(data))\r\n      // SQL dates, times, and datetimes\r\n      dt = DateTime.fromSQL(data, {\r\n        zone: \"utc\"\r\n      }); // Do not change the time zone\r\n    else if ($$1.isNumber(data))\r\n      // Unix timestamps\r\n      dt = DateTime.fromSeconds(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof Date)\r\n      // JS Date Object\r\n      dt = DateTime.fromJSDate(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof DateTime)\r\n      // DateTime Object\r\n      dt = data;\r\n    return dt.toFormat(format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format time span\r\n   *\r\n   * @param {Date} start - JS start date/time\r\n   * @param {Date} end - JS end date/time\r\n   * @param {bool} allDay - Whether event is all day\r\n   * @returns {string}\r\n   */\r\n  function formatTimeSpan(start, end, allDay) {\r\n    let from = DateTime.fromJSDate(start, {\r\n        zone: \"utc\"\r\n      }),\r\n      to = DateTime.fromJSDate(end, {\r\n        zone: \"utc\"\r\n      });\r\n    if (to.isValid && to.equals(to.startOf(\"day\")))\r\n      // 12:00AM\r\n      to = to.minus(1); // Minus one millisecond => back to previous day\r\n    let interval = new Interval({\r\n      start: from,\r\n      end: to\r\n    });\r\n    if (interval.isValid) {\r\n      // Check if all day\r\n      let days = interval.count() / (24 * 60 * 60 * 1000);\r\n      allDay || (allDay = Number.isInteger(days) && days >= 1);\r\n    }\r\n    if (allDay) {\r\n      // All day => Show date only\r\n      if (interval.isValid && interval.count(\"days\") > 1 || from.isValid && to.isValid && from.startOf(\"day\") < to.startOf(\"day\")) return formatDateTime(from, ew.DATE_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT);else if (from.isValid && !end)\r\n        // No end date\r\n        return formatDateTime(from, ew.DATE_FORMAT);\r\n      return \"\";\r\n    } else {\r\n      // Not all day => Show date/time\r\n      if (from.isValid && to.isValid) return from.startOf(\"day\") < to.startOf(\"day\") ? formatDateTime(from, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) : formatDateTime(from, ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.TIME_FORMAT);else if (from.isValid) return formatDateTime(from, ew.TIME_FORMAT);\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Parse data to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date/Time string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {DateTime}\r\n   */\r\n  function parseDateTime(data, format) {\r\n    return DateTime.fromFormat(data, format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if data can be parsed to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {boolean}\r\n   */\r\n  function checkDate(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  // Check time (alias of checkDate)\r\n  function checkTime(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  /**\r\n   * Format currency\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatCurrency(value, format) {\r\n    format || (format = ew.CURRENCY_FORMAT);\r\n    if (format.includes(\";\")) {\r\n      let formats = format.split(\";\");\r\n      format = value >= 0 ? formats[0] : formats[1];\r\n    }\r\n    format = format.replace(\"¤\", \"$\");\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format, {\r\n      locale,\r\n      currency: (ew.IS_RTL ? \"\\u200E\" : \"\") + ew.CURRENCY_SYMBOL\r\n    }); // Make sure the currency symbol position is not moved.\r\n  }\r\n\r\n  /**\r\n   * Format number\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatNumber(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.NUMBER_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format percent\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatPercent(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.PERCENT_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n  function initPage(e) {\r\n    var _e$target12;\r\n    var el = (_e$target12 = e == null ? void 0 : e.target) != null ? _e$target12 : document,\r\n      $el = $$1(el),\r\n      $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    ew.initPanels(el); // Init grid panels\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initSearchFilters(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $tables.each(setupTable); // Init tables\r\n    $el.find(\".ew-column-dropdown\").each(function () {\r\n      var _localStorage$getItem;\r\n      let table = this.dataset.table;\r\n      (_localStorage$getItem = localStorage.getItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\")) == null || _localStorage$getItem.split(\",\").forEach(field => $$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", true));\r\n      $$1(this).find(\".ew-dropdown-checkbox\").on(\"click\", function (e) {\r\n        let input = this.querySelector(\".ew-dropdown-check-input[data-field]\"),\r\n          field = input == null ? void 0 : input.dataset.field;\r\n        if (table && field) {\r\n          input.classList.toggle(\"ew-checked\");\r\n          $$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", !input.classList.contains(\"ew-checked\"));\r\n        }\r\n        localStorage.setItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\", Array.from(e.currentTarget.closest(\".dropdown-menu\").querySelectorAll(\".ew-dropdown-check-input[data-field]:not(.ew-checked)\"), el => el.dataset.field));\r\n      });\r\n    }).on(\"show.bs.dropdown\", function (e) {\r\n      let table = e.currentTarget.dataset.table,\r\n        inputs = e.currentTarget.querySelectorAll(\".ew-dropdown-check-input[data-field]\");\r\n      for (let input of inputs) {\r\n        let field = input.dataset.field;\r\n        input.classList.toggle(\"ew-checked\", !!$$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"']:not(.d-none)\")[0]);\r\n      }\r\n    });\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e);\r\n\r\n    // Report\r\n    var $rpt = $el.find(\".ew-report\");\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $$1(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $$1(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      });\r\n      // Group expand/collapse button\r\n      $rpt.find(\".ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    }\r\n\r\n    // Show message\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  }\r\n\r\n  // Redirect by HTTP GET or POST\r\n  function redirect(url, f, method, data) {\r\n    var _ew$vars;\r\n    let urls = (_ew$vars = ew.vars) != null && _ew$vars.login ? Array.from(Object.entries(ew.vars.login)).filter(entry => entry[0].endsWith(\"Url\")).map(entry => entry[1]) : [];\r\n    if (urls.includes(url)) {\r\n      // Known URLs\r\n      window.location = url;\r\n      return false;\r\n    }\r\n    let newUrl;\r\n    if (url.startsWith(\"http\")) {\r\n      newUrl = new URL(url);\r\n    } else if (url.startsWith(\"/\")) {\r\n      newUrl = new URL(url, location.protocol + \"//\" + location.host);\r\n    } else {\r\n      _alert(ew.language.phrase(\"IncorrectUrl\"));\r\n      return false;\r\n    }\r\n    let params = newUrl.searchParams;\r\n    if (data) params = mergeSearchParams(params, data);\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      const form = f || document.createElement(\"form\");\r\n      form.method = \"post\";\r\n      form.action = url.split(\"?\")[0];\r\n      document.body.appendChild(form);\r\n      params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      params.forEach((value, key) => {\r\n        const el = document.createElement(\"input\");\r\n        el.type = \"hidden\";\r\n        el.name = key;\r\n        el.value = ew.sanitize(value);\r\n        form.appendChild(el);\r\n      });\r\n      form.submit();\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Show/Hide password\r\n  function togglePassword(e) {\r\n    let $btn = $$1(e.currentTarget),\r\n      $input = $btn.closest(\".input-group\").find(\"input\"),\r\n      $i = $btn.find(\"i\");\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  }\r\n\r\n  // Re-order chart\r\n  function updateChart(el) {\r\n    let url = new URL(el.form.action),\r\n      $container = $$1(el).closest(\".ew-chart-top, .ew-chart-bottom\"),\r\n      $overlay = $$1(ew.overlayTemplate());\r\n    url.search = $$1(el.form).serialize();\r\n    $container.addClass(\"ew-loading\").append($overlay);\r\n    fetch(url.toString()).then(async response => {\r\n      let $html = $$1(\"<div>\" + (await response.text()) + \"</div>\"),\r\n        $new = $html.find(\".ew-chart-top, .ew-chart-bottom\").filter(\"[data-chart='\" + $container.data(\"chart\") + \"']\"),\r\n        $debug = $html.find(\".ew-debug\");\r\n      if ($new[0]) $container.replaceWith($new);\r\n      if ($debug[0]) $new.next(\".ew-debug\").replaceWith($debug);\r\n    }).finally(() => $container.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Check if larger than mediumn screen width (not mobile)\r\n  function isMediumScreen() {\r\n    return window.matchMedia(ew.screenMediaQuery).matches;\r\n  }\r\n\r\n  // Check if mobile\r\n  function isMobile() {\r\n    return ew.IS_MOBILE || !isMediumScreen();\r\n  }\r\n\r\n  /**\r\n   * Refresh page\r\n   *\r\n   * @param {Promise} promise Promise returned by fetch()\r\n   * @param {string} context CSS class name of context\r\n   * @returns {Promise}\r\n   */\r\n  function refresh(promise, context) {\r\n    var _context;\r\n    (_context = context) != null ? _context : context = \".ew-card.ew-grid\";\r\n    context = context.startsWith(\".\") || context.startsWith(\"#\") ? context : \".\" + context;\r\n    let target = document.querySelector(context + \", .ew-multi-column-grid, .ew-view-form, .ew-edit-form, .ew-calendar, .ew-dashboard, main.ew-no-record\"),\r\n      dashboard = document.querySelector(\".ew-dashboard\");\r\n    if (!target) return;\r\n    let $overlay = $$1(ew.overlayTemplate()),\r\n      $target = $$1(target).addClass(\"ew-loading\").toggleClass(\"overlay-wrapper\", !target.classList.contains(\"card\")).append($overlay);\r\n    return promise.then(async response => {\r\n      if (!(response instanceof Response)) return response;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      // Handle JSON\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          validation = result.validation,\r\n          error = getError(result),\r\n          form = target.querySelector(\".ew-form\"),\r\n          f = ew.forms.get(form);\r\n        if (dashboard) {\r\n          // Refresh dashboard items\r\n          for (let key in result) {\r\n            $$1(\"#\" + key).find(\".card-body\").html(''); // Clear content first\r\n            $$1(\"#\" + key).find(\"[data-card-widget='card-refresh']\").CardRefresh('load');\r\n          }\r\n        } else if (f && validation) {\r\n          // Validation errors\r\n          for (let [key, value] of Object.entries(validation)) {\r\n            key = parseInt(key, 10);\r\n            if ($$1.isNumber(key) && $$1.isObject(value)) {\r\n              form.dataset.rowindex = key;\r\n              for (let [fldvar, msg] of Object.entries(value)) f.addCustomError(fldvar, msg, key);\r\n            } else if ($$1.isString(value)) {\r\n              f.addCustomError(key, value);\r\n            }\r\n          }\r\n          f.focus();\r\n        }\r\n        if (error) showToast(error);else if ($$1.isString(result.warningMessage)) showToast(result.warningMessage, \"warning\");else if ($$1.isString(result.message)) showToast(result.message, \"body\");else if ($$1.isString(result.successMessage)) showToast(result.successMessage, \"success\");\r\n        return false; // Return false\r\n      }\r\n      // Handle HTML\r\n      let html = await response.text(),\r\n        url = new URL(response.url),\r\n        selectors = [\".ew-message-dialog\", \".ew-chart-top\", \".ew-chart-bottom\", \".ew-debug .card-body\", \".ew-timer\", \".ew-dashboard\"];\r\n      if (url.searchParams.get(\"layout\") == \"false\") {\r\n        html = \"<div>\" + html + \"</div>\";\r\n        url.searchParams.delete(\"layout\");\r\n      }\r\n      url.searchParams.delete(\"rnd\");\r\n      url.searchParams.delete(\"action\");\r\n      html = getContent(html, true); // Keep scripts\r\n      let $html = $$1(\"<div>\" + html + \"</div>\"); // New HTML\r\n      if (!target.closest(\".ew-dashboard\")) {\r\n        // Not dashboard\r\n        selectors.unshift(\".ew-toolbar\"); // Update toolbar also\r\n        if (samePath(url, currentUrl) && currentUrl.toString() != url.toString())\r\n          // Only update browser URL if same page or view/edit page\r\n          window.history.pushState(null, \"\", url.toString()); // Update browser URL\r\n      }\r\n      if ($html.find(\"main.ew-no-record\")[0] || $target.is(\"main.ew-no-record\")) {\r\n        // New or old HTML contains no records => update <main> element\r\n        selectors = [\".ew-ext-search-form\", \"main\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-view-form\")) {\r\n        // View page\r\n        selectors = [\".ew-view-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-edit-form\")) {\r\n        // Edit page\r\n        selectors = [\".ew-edit-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-multi-column-grid\")) {\r\n        // Multi-column page\r\n        selectors = [\".ew-ext-search-form\", \".ew-multi-column-grid\", ...selectors];\r\n      } else {\r\n        // List/Report page\r\n        selectors = [\"#ew-filter-list\", \".ew-ext-search-form\", context + \" .card-header\", context + \" .card-body\", context + \" .card-footer\", ...selectors];\r\n      }\r\n      selectors.forEach(selector => $$1(selector).each((i, el) => {\r\n        let $old = $$1(el),\r\n          $new = $html.find(selector).eq(i);\r\n        if ($old[0] && $new[0]) {\r\n          delete el.dataset.isset; // Reset\r\n          $old.html($new.html()); // Replace inner HTML\r\n          $old.attr(\"class\", $new.attr(\"class\")); // Update class name\r\n        }\r\n        if (selector == \".ew-toolbar\") {\r\n          let e = {\r\n            target: el\r\n          };\r\n          initIcons(e);\r\n          initSearchFilters(e);\r\n        } else if (selector == \".ew-ext-search-form\") {\r\n          ew.initForms({\r\n            target: $new[0]\r\n          });\r\n          let $tmpl = $new.find(\"#navbar-basic-search\");\r\n          if ($tmpl[0]) {\r\n            let html = $tmpl.render(null, ew.jsRenderHelpers),\r\n              $html = $$1(html),\r\n              $search = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH),\r\n              $searchType = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE);\r\n            if ($search.val() != $$1(\"#\" + ew.TABLE_BASIC_SEARCH).val() || $searchType.val() != $$1(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE).val()) $$1(\".nav-item.navbar-basic-search\").replaceWith($html);\r\n          }\r\n          $old.find(\".ew-search-operator .form-select.ew-operator-select\").each((i, el) => searchOperatorChange(el));\r\n        } else if (selector == \".ew-message-dialog\") {\r\n          if (!$new.hasClass(\"d-none\")) $old.html($new.html()); // Replace inline html\r\n        }\r\n      }));\r\n      selectors.filter(selector => selector != \".ew-message-dialog\").forEach(selector => $html.find(selector).remove()); // Remove HTML used (except message)\r\n      removeScript(\"refresh\"); // Remove old scripts\r\n      executeScript($html.html(), \"refresh\"); // Execute scripts, e.g. custom template\r\n      let e = $$1.Event({\r\n        type: \"load.ew\",\r\n        target\r\n      });\r\n      ew.initPage(e);\r\n      target.querySelectorAll(\".btn-group\").forEach(el => {\r\n        var _bootstrap$Tooltip$ge7;\r\n        return (_bootstrap$Tooltip$ge7 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge7.update();\r\n      }); // Update tooltip position or it may obscure other buttons\r\n      $$1(\".toast.show\").toast(\"dispose\"); // Hide toasts\r\n      showMessage({\r\n        target: $html\r\n      }); // Show message, if any\r\n      $document$1.trigger(e);\r\n      $document$1.trigger($$1.Event({\r\n        type: \"refresh.ew\",\r\n        target\r\n      }));\r\n    }).finally(() => $target.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Layout\r\n  var _fixLayoutHeightTimer;\r\n\r\n  // Fix layout height\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n    _fixLayoutHeightTimer = $$1.later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  }\r\n\r\n  // Add user event handlers\r\n  function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n    if (fields) {\r\n      for (const [fldVar, events] of Object.entries(fields)) $$1('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    AjaxLookup,\n    AutoSuggest,\n    Field,\n    Form,\n    Select2Defaults: Defaults,\n    Select2Utils: Utils,\n    _export,\n    addEventHandlers,\n    addGridRow,\n    addOptionDialogShow,\n    addScript,\n    ajax,\n    alert: _alert,\n    applyTemplate,\n    autoFill,\n    buildUrl,\n    checkByRegEx,\n    checkCreditCard,\n    checkDate,\n    checkEmail,\n    checkEmails,\n    checkGuid,\n    checkInteger,\n    checkNumber,\n    checkPhone,\n    checkRange,\n    checkSsn,\n    checkTime,\n    checkUrl,\n    checkZip,\n    clearDelete,\n    clearError,\n    clearOptions,\n    clearSelected,\n    clickDelete,\n    confirmDelete,\n    convertToBool,\n    copyToClipboard,\n    createFilter,\n    createModalLookup,\n    createSearchParams,\n    createSelect,\n    currentPage,\n    currentUrl,\n    deleteGridRow,\n    deleteSearchParam,\n    disable2FA,\n    displayValue,\n    emailDialogShow,\n    enable2FA,\n    escapeRegExChars,\n    executeScript,\n    export: _export,\n    exportCustom,\n    exportEmail,\n    fetch: _fetch,\n    fieldContainerSelector,\n    fileDownload,\n    filter,\n    fixLayoutHeight,\n    formatCurrency,\n    formatDateTime,\n    formatNumber,\n    formatPercent,\n    formatTimeSpan,\n    forms,\n    getAncestorBy,\n    getApiUrl,\n    getContent,\n    getElement,\n    getElements,\n    getError,\n    getForm,\n    getId,\n    getNumberingSystem,\n    getOptionTexts,\n    getOptionValue,\n    getOptionValues,\n    getOptions,\n    getQueryBuilderFilterInput,\n    getQueryBuilderFilterValidation,\n    getQueryBuilderValueSetter,\n    getSearchParam,\n    getSearchParams,\n    getUserParams,\n    getValue,\n    getchartParams,\n    hasFormData,\n    hasValue,\n    headerCase,\n    htmlDecode,\n    htmlEncode,\n    importDialogShow,\n    initExportLinks,\n    initForms,\n    initIcons,\n    initLightboxes,\n    initMultiSelectCheckboxes,\n    initPage,\n    initPasswordOptions,\n    initPdfObjects,\n    initSearchFilters,\n    initTooltips,\n    inlineAction,\n    isAutoSuggest,\n    isBooleanCheckbox,\n    isFilter,\n    isFunction: isFunction$2,\n    isHidden,\n    isHiddenTextArea,\n    isMaskedPassword,\n    isMediumScreen,\n    isMobile,\n    isModalLookup,\n    isNativeSelectOne,\n    isSelect2,\n    isTextbox,\n    keySelected,\n    lazyLoad,\n    mergeSearchParams,\n    modalDialogHide,\n    modalDialogShow,\n    newOption,\n    onError,\n    parseDate: parseDateTime,\n    parseDateTime,\n    parseJson,\n    parseNumber,\n    parseTime: parseDateTime,\n    parseUrl,\n    prompt: _prompt,\n    random,\n    redirect,\n    refresh,\n    removeScript,\n    removeSpaces,\n    samePath,\n    sameString,\n    sameText,\n    sanitizeUrl,\n    scrollIntoView,\n    searchOperatorChange,\n    selectAll,\n    selectAllKeys,\n    selectKey,\n    selectOption,\n    sendOTP,\n    setActiveUser,\n    setFocus,\n    setInvalid,\n    setLanguage,\n    setLayout,\n    setSearchParam,\n    setSearchParams,\n    setSearchType,\n    setSessionTimer,\n    setValid,\n    setupGrid,\n    setupTable,\n    showBackupCodes,\n    showDrillDown,\n    showMessage,\n    showToast,\n    sort,\n    stripScript,\n    submitAction,\n    toast,\n    toggleChat,\n    toggleGroup,\n    toggleLayout,\n    togglePassword,\n    toggleSearchOperator,\n    tooltip,\n    updateChart,\n    updateDropdownPosition,\n    updateOptions,\n    updateSelected,\n    upload,\n    valueChanged,\n    valueSeparator\n  };\n\n  /**\r\n   * Create FullCalendar object\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {Object} options - Calendar options\r\n   * @param {Object} options.fullCalendarOptions - FullCalendar options\r\n   * @param {Object} options.eventPopoverOptions - Event popover options\r\n   * @param {HTMLElement} dropdown - HTML element\r\n   * @returns calendar object\r\n   */\r\n  function fullCalendar(el, options, dropdown) {\r\n    let {\r\n        ajax,\r\n        updateTable,\r\n        eventFields,\r\n        addUrl,\r\n        viewUrl,\r\n        editUrl,\r\n        deleteUrl,\r\n        copyUrl,\r\n        fullCalendarOptions,\r\n        eventPopoverOptions\r\n      } = options,\r\n      calendar;\r\n\r\n    // Remove addUrl in options\r\n    delete options.addUrl;\r\n\r\n    // Update event from server side JSON response\r\n    let processJson = data => {\r\n      //console.log(result);\r\n      let convertValue = (key, value) => {\r\n        let match;\r\n        if (typeof value == \"string\" && (match = value.match(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}:\\d{2})/)))\r\n          // Make sure ISO date\r\n          return match[1] + \"T\" + match[2];\r\n        if (key == \"allDay\")\r\n          // Make sure Boolean\r\n          return ew.convertToBool(value);else if (key == \"url\" && !value) return \"\"; // Make sure not null\r\n        else if (key == \"display\" && !value) return \"auto\"; // Make sure not null\r\n        else if (key == \"classNames\" && value && $$1.isString(value))\r\n          // Make sure return as array\r\n          return value.replace(/\\s+/g, \" \").split(\" \");else if (key == \"classNames\" && !value)\r\n          // Make sure return as array\r\n          return [\"\"];else if (key == \"groupId\" && !value)\r\n          // Make sure return as stringy\r\n          return \"\";else if (key == \"description\" && !value) return \"\"; // Make sure not null\r\n        else return value;\r\n      };\r\n      if (data.success) {\r\n        let action = data.action,\r\n          events = data[updateTable];\r\n        if (!Array.isArray(events)) events = [events];\r\n        for (let event of events) {\r\n          for (let [key, name] of Object.entries(eventFields)) {\r\n            // Normalize keys in event\r\n            if (key != name && name !== null && name in event) {\r\n              event[key] = event[name];\r\n              delete event[name];\r\n            }\r\n          }\r\n          if (action == ew.API_DELETE_ACTION) {\r\n            var _calendar$getEventByI;\r\n            // Remove deleted event\r\n            (_calendar$getEventByI = calendar.getEventById(event.id)) == null || _calendar$getEventByI.remove();\r\n          } else if (action == ew.API_ADD_ACTION) {\r\n            // Add/Copy event\r\n            for (let name in event) {\r\n              // Check new properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = event[name];\r\n              if (key && value !== undefined)\r\n                // Value can be null\r\n                event[key] = convertValue(key, value); // Convert value\r\n            }\r\n            calendar.addEvent(event);\r\n          } else {\r\n            // Update event\r\n            let curEvent = calendar.getEventById(event.id);\r\n            let groupId = event.groupId;\r\n            for (let name in event) {\r\n              // Update properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = convertValue(key, event[name]);\r\n              if (key && value !== undefined) {\r\n                // Value can be null\r\n                value = convertValue(key, value); // Convert value\r\n                if (key == \"start\") curEvent.setStart(value);else if (key == \"end\") curEvent.setEnd(value);else if (key == \"allDay\") curEvent.setAllDay(value);else if (key == \"description\") curEvent.setExtendedProp(key, value);else if (key != \"id\" && !groupId)\r\n                  // setProp will change all related events, https://fullcalendar.io/docs/Event-setProp\r\n                  curEvent.setProp(key, value);\r\n              } else if (value) {\r\n                curEvent.setExtendedProp(name, value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    // Process event\r\n    let processEvent = info => {\r\n      let event = info.event,\r\n        events = [event, ...info.relatedEvents],\r\n        apiAction = event.id ? ew.API_EDIT_ACTION : ew.API_ADD_ACTION;\r\n      events.forEach(event => processRequest(event, apiAction).then(data => {\r\n        if (!data.success) {\r\n          // Revert if not success\r\n          info.revert();\r\n        } else {\r\n          // Update event\r\n          processJson(data);\r\n        }\r\n      }).catch(err => {\r\n        // Revert if error\r\n        console.log(err);\r\n        info.revert();\r\n      }));\r\n    };\r\n\r\n    // Process request\r\n    let processRequest = (event, apiAction) => new Promise((resolve, reject) => {\r\n      // Set up post data\r\n      let obj = event.toPlainObject({\r\n          collapseExtendedProps: true\r\n        }),\r\n        data = {};\r\n      // Event fields\r\n      for (let [key, name] of Object.entries(eventFields)) {\r\n        if (key in obj) {\r\n          let val = obj[key];\r\n          name || (name = key);\r\n          if (val instanceof Date)\r\n            // Handle date field, need to convert to ISO string\r\n            val = val.toISOString().slice(0, -5).replace(/T/, \" \"); // Assume UTC\r\n          else if (typeof val == \"string\" && val.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/)) val = val.substring(0, 19).replace(/T/, \" \");else if (typeof val === \"boolean\")\r\n            // Handle boolean field\r\n            val = val ? \"1\" : \"0\";else if (key == \"classNames\") val = Array.isArray(val) ? val.join(\" \") : val; // Convert array to string\r\n          data[name] = val;\r\n          delete obj[key];\r\n        }\r\n      }\r\n      data = {\r\n        ...data,\r\n        ...obj\r\n      };\r\n      // Post to Event Table add/edit/delete API\r\n      let apiUrl = apiAction == ew.API_ADD_ACTION ? ew.getApiUrl([apiAction, updateTable]) : ew.getApiUrl([apiAction, updateTable, event.id]);\r\n      $$1.post(apiUrl, data, data => resolve(data)).fail(err => reject(err));\r\n    });\r\n\r\n    // Get field parameter\r\n    let getFldParm = name => Object.keys(currentTable.fields).find(key => currentTable.fields[key].name == name);\r\n\r\n    // Add menu ID to URL\r\n    let urlAddId = (url, id) => {\r\n      let ar = url.split(\"?\");\r\n      ar[0] += id ? (!ar[0].endsWith(\"/\") ? \"/\" : \"\") + id : \"\";\r\n      return ar.join(\"?\");\r\n    };\r\n\r\n    // Add/Copy event\r\n    let addEventDialogShow = data => {\r\n      let url = addUrl,\r\n        params = new URLSearchParams();\r\n      if ($$1.isObject(data) && (data.startStr || data.endStr /* || data.allDay */)) {\r\n        let startFld = getFldParm(eventFields[\"start\"]),\r\n          endFld = getFldParm(eventFields[\"end\"]) /*,\r\n                                                  allDayFld = getFldParm(eventFields[\"allDay\"])*/;\r\n        if (startFld && data.startStr) params.set(startFld, data.startStr);\r\n        if (endFld && data.endStr) params.set(endFld, data.endStr);\r\n        // if (allDayFld && data.allDay)\r\n        //     params.set(allDayFld, \"1\");\r\n      }\r\n      if ($$1.isString(data) && data.match(/^\\d+$/))\r\n        // Copy\r\n        url = urlAddId(url, data);\r\n      let qs = params.toString();\r\n      url += qs ? \"?\" + qs : \"\";\r\n      ew.modalDialogShow({\r\n        url: url,\r\n        callback: ajax ? processJson : null,\r\n        json: ajax,\r\n        btn: ew.language.phrase(\"AddBtn\"),\r\n        caption: ew.language.phrase(\"AddLink\")\r\n      });\r\n    };\r\n\r\n    // View event\r\n    let viewEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(viewUrl, id),\r\n      callback: ajax ? processJson : null,\r\n      json: ajax,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"ViewLink\")\r\n    });\r\n\r\n    // Edit event\r\n    let editEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(editUrl, id),\r\n      callback: ajax ? processJson : null,\r\n      json: ajax,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"EditLink\")\r\n    });\r\n\r\n    // Delete event\r\n    let deleteEvent = id => ew.prompt(ew.language.phrase(\"DeleteEventConfirm\"), result => {\r\n      if (result) ew.modalDialogShow({\r\n        url: ew.setSearchParams(urlAddId(deleteUrl, id), {\r\n          action: \"delete\"\r\n        }),\r\n        callback: ajax ? processJson : null,\r\n        json: ajax\r\n      });\r\n    });\r\n\r\n    // Add custom add button\r\n    if (addUrl) {\r\n      fullCalendarOptions.customButtons = Object.assign(fullCalendarOptions.customButtons || {}, {\r\n        add: {\r\n          text: ew.language.phrase(\"AddEvent\"),\r\n          click: addEventDialogShow\r\n        }\r\n      });\r\n      fullCalendarOptions.headerToolbar.start += \" add\";\r\n    }\r\n\r\n    // Get or create popover\r\n    let getOrCreatePopover = info => {\r\n      let config = {\r\n        ...bootstrap.Popover.Default,\r\n        ...eventPopoverOptions,\r\n        trigger: \"manual\" // Set trigger to \"manual\"\r\n      };\r\n      let popover = bootstrap.Popover.getOrCreateInstance(info.el, config),\r\n        template = Array.from(document.querySelectorAll(\"script[data-name='event-popover']\")).sort((a, b) => {\r\n          a = parseInt(a.dataset.seq, 10) || 0;\r\n          b = parseInt(b.dataset.seq, 10) || 0;\r\n          return a - b;\r\n        }).shift(),\r\n        tmpl = $$1.templates(template.text);\r\n      info.event.setExtendedProp(\"timeSpan\", ew.formatTimeSpan(info.event.start, info.event.end, info.event.allDay)); // Add extended property \"timeSpan\"\r\n      let content = tmpl.render(info.event, ew.jsRenderHelpers).trim();\r\n      if (content) {\r\n        var _Array$from$find$repl, _Array$from$find;\r\n        let popoverClass = (_Array$from$find$repl = (_Array$from$find = Array.from(info.el.classList.values()).find(name => name.match(/^event-([\\w+]+)\\b/))) == null ? void 0 : _Array$from$find.replace(/^event-/, \"popover-\")) != null ? _Array$from$find$repl : \"popover-default\";\r\n        popover._templateFactory = null; // Make sure popover create tip again from _config\r\n        popover._config.title = info.event.title;\r\n        popover._config.content = content;\r\n        popover._config.customClass += (popover._config.customClass ? \" \" : \"\") + \"ew-event-popover \" + popoverClass;\r\n        return popover;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    // Context menu\r\n    let generateGetBoundingClientRect = info => {\r\n        let x = 0,\r\n          y = 0;\r\n        if (info) {\r\n          let rect = info.el.getBoundingClientRect(),\r\n            evt = info.jsEvent;\r\n          x = rect.left + evt.offsetX, y = rect.top + evt.offsetY;\r\n        }\r\n        return () => ({\r\n          width: 0,\r\n          height: 0,\r\n          top: y,\r\n          right: x,\r\n          bottom: y,\r\n          left: x\r\n        });\r\n      },\r\n      virtualElement = {\r\n        getBoundingClientRect: generateGetBoundingClientRect()\r\n      },\r\n      bsDropdown;\r\n    if (dropdown && options.useContextMenu && (viewUrl || editUrl || addUrl && copyUrl || deleteUrl)) {\r\n      dropdown.dataset.bsToggle = \"dropdown\"; // For clearing dropdown menu\r\n      document.addEventListener(\"keydown\", event => event.key !== \"Escape\" || bootstrap.Dropdown.clearMenus());\r\n      bsDropdown = bootstrap.Dropdown.getOrCreateInstance(dropdown, {\r\n        reference: virtualElement\r\n      });\r\n      bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => item.addEventListener(\"click\", e => {\r\n        let dataset = e.currentTarget.dataset,\r\n          action = dataset.action,\r\n          id = dataset.eventId;\r\n        if (action && id) {\r\n          if (action == \"view\" && viewUrl) viewEventDialogShow(id);else if (action == \"edit\" && editUrl) editEventDialogShow(id);else if (action == \"copy\" && addUrl && copyUrl)\r\n            // Copy\r\n            addEventDialogShow(id);else if (action == \"delete\" && deleteUrl) deleteEvent(id);\r\n        }\r\n      }));\r\n    }\r\n\r\n    // Options\r\n    let opts = ew.deepAssign(fullCalendarOptions, {\r\n      // events\r\n      //eventDragStart: info => console.log(info),\r\n      //eventDragStop: info => console.log(info),\r\n      drop: function (info) {\r\n        // Remove element\r\n        let checkbox = document.getElementById(\"remove-event\");\r\n        if (checkbox.checked) info.draggedEl.parentNode.removeChild(info.draggedEl);\r\n      },\r\n      select: event => addUrl && addEventDialogShow(event),\r\n      eventReceive: processEvent,\r\n      // Event created\r\n      eventDragStart: info => {\r\n        var _bootstrap$Popover$ge;\r\n        return (_bootstrap$Popover$ge = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge.hide();\r\n      },\r\n      eventDrop: processEvent,\r\n      // Event changed (Drag / Drop)\r\n      eventResize: processEvent,\r\n      // Event changed (Resize)\r\n      eventClick: info => {\r\n        // Event click\r\n        info.jsEvent.preventDefault();\r\n        if (info.jsEvent.button == 2) {\r\n          // Right click\r\n          let allowed = info.event.extendedProps[\"_view\"] || info.event.extendedProps[\"_edit\"] || info.event.extendedProps[\"_copy\"] || info.event.extendedProps[\"_delete\"];\r\n          if (bsDropdown && allowed) {\r\n            var _bootstrap$Popover$ge2;\r\n            (_bootstrap$Popover$ge2 = bootstrap.Popover.getInstance(info.el)) == null || _bootstrap$Popover$ge2.hide();\r\n            bsDropdown.hide();\r\n            bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => {\r\n              item.dataset.eventId = info.event.id;\r\n              item.classList.toggle(\"d-none\", !options[item.dataset.action + \"Url\"] || !info.event.extendedProps[\"_\" + item.dataset.action]); // Check event permission\r\n            });\r\n            if (bsDropdown._menu.querySelectorAll(\".dropdown-item:not(.d-done)\").length) {\r\n              virtualElement.getBoundingClientRect = generateGetBoundingClientRect(info);\r\n              bsDropdown.show();\r\n            }\r\n          }\r\n        } else if (info.event.url) {\r\n          window.open(info.event.url);\r\n        } else if (options.usePopover && eventPopoverOptions.trigger.match(/\\bclick\\b/)) {\r\n          var _getOrCreatePopover;\r\n          (_getOrCreatePopover = getOrCreatePopover(info)) == null || _getOrCreatePopover.toggle();\r\n        } else if (options.showViewPageOnEventClick) {\r\n          viewEventDialogShow(info.event.id);\r\n        }\r\n      },\r\n      eventMouseEnter: info => {\r\n        var _bsDropdown, _getOrCreatePopover2;\r\n        if ((_bsDropdown = bsDropdown) != null && _bsDropdown._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (options.popoverViews.includes(info.view.type) && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_getOrCreatePopover2 = getOrCreatePopover(info)) == null || _getOrCreatePopover2.show();\r\n      },\r\n      eventMouseLeave: info => {\r\n        var _bsDropdown2, _bootstrap$Popover$ge3;\r\n        if ((_bsDropdown2 = bsDropdown) != null && _bsDropdown2._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (options.popoverViews.includes(info.view.type) && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_bootstrap$Popover$ge3 = bootstrap.Popover.getInstance(info.el)) == null || _bootstrap$Popover$ge3.hide();\r\n      }\r\n    });\r\n\r\n    // Trigger \"calendar\" event\r\n    let args = {\r\n      element: el,\r\n      options: opts\r\n    };\r\n    $$1(document).trigger(\"calendar\", [args]);\r\n\r\n    // Create calendar\r\n    calendar = new window.FullCalendar.Calendar(el, args.options);\r\n\r\n    // Return calendar\r\n    return calendar;\r\n  }\n\n  var fullCalendar$1 = {\n    __proto__: null,\n    fullCalendar\n  };\n\n  /**\r\n   * Show dialog for push notification\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of web push API\r\n   * @param {MouseEvent} args.evt - Mouse event\r\n   * @returns false\r\n   */\r\n  async function pushNotificationDialogShow(args) {\r\n    let $dlg = ew$1.pushDialog || $$1(\"#ew-push-notification-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $$1(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      console.log(\"DIV #ew-push-notificatoin-dialog not found\");\r\n      return false;\r\n    }\r\n    if (!args.url) {\r\n      // No API URL\r\n      console.log(\"Missing URL of Web Push API\");\r\n      return false;\r\n    }\r\n    let target = args.evt.currentTarget,\r\n      // Button\r\n      $form = $$1(target.form),\r\n      $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    $f.data(\"all\", false); // Reset\r\n    if (!$form.find(\"input[name='key_m[]']:checked\")[0]) {\r\n      // No keys selected\r\n      let result = await ew$1.prompt(ew$1.language.phrase(\"SendPushNotificationsToAll\"), bool => bool); // Callback returns result as boolean\r\n      $f.data(\"all\", result);\r\n      if (!result)\r\n        // Cancelled\r\n        return;\r\n    }\r\n    if (!frm) {\r\n      frm = new ew$1.FormBuilder().setId($f.attr(\"id\")).addFields([[\"title\", ew$1.Validators.required(ew$1.language.phrase(\"PushNotificationFormTitle\"))], [\"body\", ew$1.Validators.required(ew$1.language.phrase(\"PushNotificationFormBody\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = [$f.serialize(), $f.data(\"all\") ? \"\" : $form.find(\"input[name='key_m[]']:checked\").serialize()].join(\"&\");\r\n        $$1.post(args.url, data, result => {\r\n          var _result$error;\r\n          if (Array.isArray(result)) {\r\n            let successes = result.reduce((acc, cur) => acc + (cur.success ? 1 : 0), 0),\r\n              failures = result.length - successes;\r\n            if (successes > 0 && failures == 0) ew$1.alert(ew$1.language.phrase(\"PushNotificationSuccess\").replace(\"%s\", successes), \"success\");else if (successes == 0 && failures > 0) ew$1.alert(ew$1.language.phrase(\"PushNotificationFailure\").replace(\"%f\", failures));else if (successes == 0 && failures == 0) ew$1.alert(ew$1.language.phrase(\"NoSubscriptions\").replace(\"%f\", failures), \"primary\");else ew$1.alert(ew$1.language.phrase(\"PushNotificationSent\").replace(\"%s\", successes).replace(\"%f\", failures), \"primary\");\r\n          } else if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            ew$1.alert(result.error.description);\r\n          }\r\n        });\r\n        return true;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew$1.pushDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr || target.dataset.caption).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check if push notification and service workers are supported by browser\r\n   */\r\n  function isPushNotificationSupported() {\r\n    return \"serviceWorker\" in navigator && \"PushManager\" in window;\r\n  }\r\n\r\n  /**\r\n   * Base 64 to Unit8Array\r\n   */\r\n  function urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4),\r\n      base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\"),\r\n      rawData = window.atob(base64),\r\n      outputArray = new Uint8Array(rawData.length);\r\n    for (let i = 0; i < rawData.length; ++i) outputArray[i] = rawData.charCodeAt(i);\r\n    return outputArray;\r\n  }\r\n\r\n  /**\r\n   * Send subscription to server\r\n   */\r\n  async function sendSubscriptionToServer(subscription, url) {\r\n    const key = subscription.getKey(\"p256dh\"),\r\n      token = subscription.getKey(\"auth\"),\r\n      contentEncoding = (PushManager.supportedContentEncodings || [\"aesgcm\"])[0];\r\n    let formData = new FormData();\r\n    formData.set(\"endpoint\", subscription.endpoint);\r\n    formData.set(\"publicKey\", key ? btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null);\r\n    formData.set(\"authToken\", token ? btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null);\r\n    formData.set(\"contentEncoding\", contentEncoding);\r\n    let response = await ew$1.fetch(url, {\r\n      method: \"POST\",\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  /**\r\n   * Create subscription and send to server\r\n   * @returns Promise that resolves to a PushSubscription object\r\n   */\r\n  async function createSubscription() {\r\n    var _result$error2;\r\n    let url = ew$1.getApiUrl([ew$1.API_PUSH_NOTIFICATION_ACTION, ew$1.API_PUSH_NOTIFICATION_SUBSCRIBE]),\r\n      serviceWorkerReg = await navigator.serviceWorker.ready,\r\n      subscription = await serviceWorkerReg.pushManager.subscribe({\r\n        userVisibleOnly: true,\r\n        applicationServerKey: urlBase64ToUint8Array(ew$1.PUSH_SERVER_PUBLIC_KEY)\r\n      }),\r\n      result = await sendSubscriptionToServer(subscription, url);\r\n    if (result != null && (_result$error2 = result.error) != null && _result$error2.description) ew$1.alert(result.error.description);\r\n    return result.success ? subscription : null;\r\n  }\r\n\r\n  /**\r\n   * Get subscription\r\n   */\r\n  async function getSubscription() {\r\n    let serviceWorkerReg = await navigator.serviceWorker.ready;\r\n    return serviceWorkerReg.pushManager.getSubscription();\r\n  }\r\n\r\n  /**\r\n   * Set subscription\r\n   * @param {PushSubscription} subscription\r\n   */\r\n  function setSubscription(subscription) {\r\n    let $btn = $$1(\"#subscribe-notification\").toggleClass(\"ew-enable-notification\", !subscription).removeClass(\"disabled\");\r\n    $btn.find(\"i\").toggleClass(\"fa-bell\", !subscription).toggleClass(\"fa-bell-slash\", !!subscription);\r\n    let inst = bootstrap.Tooltip.getInstance($btn[0]);\r\n    if (inst) inst._config.title = ew$1.language.phrase(subscription ? \"DisableNotifications\" : \"EnableNotifications\");\r\n  }\r\n\r\n  /**\r\n   * Subscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function subscribeNotification() {\r\n    if (Notification.permission !== \"denied\" && !ew$1.IS_SYS_ADMIN) {\r\n      // Support non system administrator\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        if (Notification.permission === \"granted\") {\r\n          var _await$getSubscriptio, _document$getElementB;\r\n          setSubscription((_await$getSubscriptio = await getSubscription()) != null ? _await$getSubscriptio : await createSubscription());\r\n          if (!((_document$getElementB = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB.classList.contains(\"ew-enable-notification\"))) ew$1.showToast(ew$1.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        } else if (Notification.permission === \"default\" && (await Notification.requestPermission()) == \"granted\") {\r\n          var _document$getElementB2;\r\n          setSubscription(await createSubscription());\r\n          if (!((_document$getElementB2 = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB2.classList.contains(\"ew-enable-notification\"))) ew$1.showToast(ew$1.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew$1.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check subscription\r\n   *\r\n   * @returns true\r\n   */\r\n  async function checkSubscription() {\r\n    $$1(\"#subscribe-notification\").tooltip();\r\n    if (Notification.permission == \"granted\") setSubscription(await getSubscription());else setSubscription(null);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function unsubscribeNotification() {\r\n    ew$1.prompt({\r\n      html: ew$1.language.phrase(\"DisableNotificationsConfirm\")\r\n    }, async res => {\r\n      if (!res) return;\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        var _result$error3;\r\n        let subscription = await getSubscription();\r\n        await subscription.unsubscribe();\r\n        let url = ew$1.getApiUrl([ew$1.API_PUSH_NOTIFICATION_ACTION, ew$1.API_PUSH_NOTIFICATION_DELETE]),\r\n          result = await sendSubscriptionToServer(subscription, url); // Delete subscription\r\n        if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n          ew$1.alert(result.error.description);\r\n          return false;\r\n        }\r\n        if (result.success) {\r\n          // No subscription or deleted successfully\r\n          setSubscription(null);\r\n          ew$1.showToast(ew$1.language.phrase(\"NotificationsDisabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew$1.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Init web push notifications\r\n   */\r\n  loadjs.ready(\"foot\", () => {\r\n    if (ew$1.PUSH_SERVER_PUBLIC_KEY && isPushNotificationSupported()) {\r\n      navigator.serviceWorker.register(ew$1.PATH_BASE + ew$1.SERVICE_WORKER, {\r\n        scope: ew$1.PATH_BASE\r\n      }).then(() => {\r\n        checkSubscription();\r\n        $$1(\"#subscribe-notification\").on(\"click\", function () {\r\n          this.classList.contains(\"ew-enable-notification\") ? subscribeNotification() : unsubscribeNotification();\r\n        });\r\n      }).catch(e => console.log(e));\r\n    } else {\r\n      $$1(\"#subscribe-notification\").addClass(\"d-none\");\r\n    }\r\n  });\n\n  var webpush = {\n    __proto__: null,\n    checkSubscription,\n    isPushNotificationSupported,\n    pushNotificationDialogShow,\n    subscribeNotification,\n    unsubscribeNotification\n  };\n\n  /**\r\n   * Map styles\r\n   */\r\n\r\n  /**\r\n   * Show map\r\n   * @param {Object} data Data of map\r\n   */\r\n  function show(data) {\r\n    if (data.inited)\r\n      // Already initiated\r\n      return true;\r\n    let latlng = data.latlng,\r\n      useSingleMap = data.useSingleMap,\r\n      showAllMarkers = data.showAllMarkers,\r\n      useMarkerClusterer = data.useMarkerClusterer,\r\n      $div = $$1(\"#\" + data.id + \".\" + (useSingleMap ? \"ew-single-map\" : \"ew-map\")),\r\n      ext = ew.maps[data.ext];\r\n    if (useSingleMap) {\r\n      // Use single map\r\n      let id = data.id.replace(/^mp\\d*_/, \"mp_\"); // Remove index from \"m<n>_\" prefix\r\n      $div = $$1(\"#\" + id);\r\n      if (!$div[0]) {\r\n        $div = $$1(\"<div></div>\").attr(\"id\", id).addClass(\"ew-single-map\").height(data.singleMapHeight); // Create new $div for single map\r\n        if (data.singleMapWidth) $div.width(data.singleMapWidth);\r\n        $$1(\".ew-grid, .ew-multi-column-grid\").first()[data.showMapOnTop ? \"before\" : \"after\"]($div); // Insert before/after table\r\n        data.map = ext.createMap($div[0], data);\r\n        $div.data(\"map\", data.map);\r\n        $div.data(\"ext\", data.ext);\r\n        $div.data(\"bounds\", showAllMarkers ? ext.createBounds() : null);\r\n        $div.data(\"markerClusterer\", useMarkerClusterer ? ext.createMarkerClusterer(data) : null);\r\n      }\r\n      data = Object.assign(data, $div.data()); // Merge data\r\n    } else {\r\n      if (!latlng) {\r\n        // Location not found\r\n        $div.addClass(\"d-none\").html(data.status);\r\n        return true;\r\n      }\r\n      $div.next(\".ew-map-value\").addClass(\"d-none\"); // Hide view value\r\n      if (!data.map) data.map = ext.createMap($div[0], data);\r\n    }\r\n    data.marker = ext.createMarker(data); // Create marker\r\n    data.inited = true; // Initiated\r\n    $$1(document).trigger(\"map\", [data]);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * All maps initiated\r\n   */\r\n  function done() {\r\n    $$1(\".ew-single-map\").each(function () {\r\n      let data = $$1(this).data();\r\n      ew.maps[data.ext].fitBounds(data); // Fit bounds\r\n    });\r\n    $$1(document).trigger(\"maps\");\r\n  }\r\n\r\n  /**\r\n   * Init maps\r\n   * @param {string} [ext] - Map type, e.g. 'googlemaps', 'leaflet'\r\n   * @returns\r\n   */\r\n  function init(ext) {\r\n    let promises = $$1(\".ew-map\").filter(function () {\r\n      return !ext || $$1(this).data(\"ext\") == ext;\r\n    }).map(function (i) {\r\n      let data = $$1(this).data();\r\n      if (data.inited)\r\n        // Already initiated\r\n        return show(data);\r\n      data.id = this.id; // Get ID\r\n      data.address = (data.address || \"\").trim();\r\n      if (data.address) {\r\n        let geocodingDelay = data.geocodingDelay;\r\n        return new Promise(resolve => {\r\n          $$1.later(i * geocodingDelay, null, () => {\r\n            // Set a timer for better performance\r\n            resolve(ew.maps[data.ext].geocode(data).then(latlng => {\r\n              data.latlng = latlng;\r\n            }).catch(status => {\r\n              data.status = status;\r\n            }).finally(() => show(data)));\r\n          });\r\n        });\r\n      } else {\r\n        let latitude = data.latitude,\r\n          longitude = data.longitude,\r\n          coordinate = data.coordinate;\r\n        if (coordinate) {\r\n          let m = coordinate.match(/[-.\\d]+/g);\r\n          if (Array.isArray(m) && m.length == 2) {\r\n            latitude = parseFloat(m[0]);\r\n            longitude = parseFloat(m[1]);\r\n          }\r\n        }\r\n        if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) data.latlng = ew.maps[data.ext].createLatLng(latitude, longitude);\r\n        return show(data);\r\n      }\r\n    }).get();\r\n    return Promise.all(promises).then(done);\r\n  }\r\n\r\n  /**\r\n   * Init\r\n   */\r\n  $$1(function () {\r\n    $$1(\"#ew-modal-dialog\").on(\"load.ew\", () => init());\r\n    $$1(document).on(\"preview.ew\", () => init());\r\n  });\n\n  var maps = {\n    __proto__: null,\n    done,\n    init,\n    show\n  };\n\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile();\r\n\r\n  // Charts\r\n  window.exportCharts = {}; // Per window\r\n\r\n  // Extend\r\n  Object.assign(ew, {\r\n    MultiPage,\r\n    Form,\r\n    FormBuilder,\r\n    Validators,\r\n    maps\r\n  }, functions, webpush, fullCalendar$1);\r\n  var $document = $$1(document);\r\n\r\n  // Init document\r\n  loadjs.ready(\"load\", function () {\r\n    var _$$offset;\r\n    $$1.views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $$1(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $$1(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    let hash = ew.currentUrl.searchParams.get(\"hash\"),\r\n      scrollTop = (_$$offset = $$1(\"#\" + hash).offset()) == null ? void 0 : _$$offset.top;\r\n    if (scrollTop) $$1(\"html, body\").animate({\r\n      scrollTop\r\n    }, 800);\r\n    $document.trigger(\"load.ew\");\r\n  });\r\n\r\n  // Default \"addoption\" event (fired before adding new option to selection list)\r\n  $document.on(\"addoption\", function (e, args) {\r\n    let row = args.data,\r\n      // New row to be validated\r\n      arp = args.parents; // Parent field values\r\n    for (let i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      let p = arp[i];\r\n      if (!p.length)\r\n        // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n      let val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n      if (!$$1.isUndefined(val) && !p.includes(String(val)))\r\n        // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  });\r\n\r\n  // Click handler for buttons\r\n  $document.on(\"click\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data()),\r\n      action = data.ewAction;\r\n    if (!action) {\r\n      return true;\r\n    } else if (action == \"none\") {\r\n      return false;\r\n    } else if (action == \"redirect\") {\r\n      return ew.redirect(data.url);\r\n    } else if (action == \"reload\") {\r\n      location.reload();\r\n      return false;\r\n    } else if (action == \"submit\") {\r\n      delete data.ewAction;\r\n      return ew.submitAction(e, data);\r\n    } else if (action == \"modal\") {\r\n      e.preventDefault();\r\n      return data.ajax ? ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      }) : ew.modalDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"inline\" || action == \"grid\") {\r\n      e.preventDefault();\r\n      return ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"export\") {\r\n      return ew.export({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"layout\") {\r\n      return ew.toggleLayout(this);\r\n    } else if (action == \"language\") {\r\n      return ew.setLanguage(this);\r\n    } else if (action == \"active-user\") {\r\n      return ew.setActiveUser(this);\r\n    } else if (action == \"filter\") {\r\n      return ew.filter(e);\r\n    } else if (action == \"sort\") {\r\n      return ew.sort(e, this.dataset);\r\n    } else if (action == \"refresh\") {\r\n      let url = ew.setLayout(this.dataset.url, false);\r\n      if (url && url != \"#\") ew.refresh(fetch(url), this.dataset.context);\r\n      return false;\r\n    } else if (action == \"email\") {\r\n      delete data.ewAction;\r\n      return ew.emailDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"set-action\") {\r\n      this.form.elements[\"action\"].value = data.value;\r\n    } else if (action == \"drilldown\") {\r\n      return ew.showDrillDown(e, this, data.url, data.id, data.hdr);\r\n    } else if (action == \"add-option\") {\r\n      delete data.ewAction;\r\n      return ew.addOptionDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"search-type\") {\r\n      return ew.setSearchType(this);\r\n    } else if (action == \"search-operator\") {\r\n      ew.toggleSearchOperator(e, data.target, data.value);\r\n    } else if (action == \"search-toggle\") {\r\n      let panel = document.getElementById(this.dataset.form + \"_search_panel\");\r\n      if (panel) {\r\n        bootstrap.Collapse.getOrCreateInstance(panel).toggle();\r\n        this.classList.toggle(\"active\");\r\n      }\r\n    } else if (action == \"highlight\") {\r\n      $$1(\"mark.\" + this.dataset.name).toggleClass(\"mark\");\r\n      this.classList.toggle(\"active\");\r\n    } else if (action == \"inline-delete\") {\r\n      return ew.confirmDelete(this);\r\n    } else if (action == \"add-grid-row\") {\r\n      return ew.addGridRow(this);\r\n    } else if (action == \"delete-grid-row\") {\r\n      return ew.deleteGridRow(this, this.dataset.rowindex);\r\n    } else if (action == \"select-all\") {\r\n      ew.selectAll(this);\r\n    } else if (action == \"select-key\") {\r\n      ew.selectKey(e);\r\n    } else if (action == \"select-all-keys\") {\r\n      ew.selectAllKeys(this);\r\n    } else if (action == \"import\") {\r\n      return ew.importDialogShow({\r\n        evt: e,\r\n        hdr: data.hdr\r\n      });\r\n    } else if (action == \"password\") {\r\n      return ew.togglePassword(e);\r\n    } else if (action == \"push\") {\r\n      return ew.pushNotificationDialogShow({\r\n        evt: e,\r\n        url: data.apiUrl\r\n      });\r\n    } else if (action == \"enable-2fa\") {\r\n      return ew.enable2FA();\r\n    } else if (action == \"disable-2fa\") {\r\n      return ew.disable2FA();\r\n    } else if (action == \"toggle-chat\") {\r\n      return ew.toggleChat(data.value);\r\n    } else if (action == \"send-otp\") {\r\n      var _document$getElementB;\r\n      return ew.sendOTP((_document$getElementB = document.getElementById(data.account)) == null ? void 0 : _document$getElementB.value);\r\n    } else if (action == \"backup-codes\") {\r\n      return ew.showBackupCodes();\r\n    } else if (action == \"scroll-top\") {\r\n      $$1(document).scrollTop($$1('#top').offset().top);\r\n      return false;\r\n    }\r\n  })\r\n  // Change handler for selects\r\n  .on(\"change\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data());\r\n    if (!data.ewAction) return true;\r\n    let actions = data.ewAction.split(\" \").filter(action => !!action);\r\n    for (let action of actions) {\r\n      if (action == \"submit-form\") {\r\n        var _this$form;\r\n        (_this$form = this.form) == null || _this$form.submit();\r\n      } else if (action == \"change-page-size\") {\r\n        let pageSize = ew.sameText(this.value, \"ALL\") ? \"ALL\" : ew.parseNumber(this.value);\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + pageSize;\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          let url = ew.setSearchParam(this.dataset.url, this.name, pageSize);\r\n          ew.redirect(url);\r\n        }\r\n        return false;\r\n      } else if (action == \"update-options\") {\r\n        ew.updateOptions.call(this);\r\n      } else if (action == \"autofill\") {\r\n        ew.autoFill(this);\r\n      } else if (action == \"search-operator\") {\r\n        return ew.searchOperatorChange(this);\r\n      } else if (action == \"language\") {\r\n        ew.setLanguage(this);\r\n      } else if (action == \"chart-order\") {\r\n        ew.updateChart(this);\r\n      }\r\n    }\r\n  }).on(\"keydown\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data()),\r\n      action = data.ewAction;\r\n    if (action == \"change-page\") {\r\n      // ew-page-number\r\n      if (e.key == \"Enter\") {\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + ew.parseNumber(this.value);\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          ew.currentUrl.searchParams.set(this.name, ew.parseNumber(this.value));\r\n          window.location = ew.sanitizeUrl(ew.currentUrl.toString());\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Click handler for row links\r\n  $document.on(\"click\", \".ew-row-link\", e => e.stopPropagation());\r\n\r\n  // Fix z-index of multiple modals\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $$1(\".modal:visible\").length;\r\n    $$1(this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $$1(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  });\r\n\r\n  // Fix scrolling of multiple modals\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $$1(\".modal:visible\").length && $$1(\"body\").addClass(\"modal-open\");\r\n  });\r\n\r\n  // Crop action for jQuery File Upload\r\n  $$1.blueimp.fileupload.prototype.options.processQueue.unshift({\r\n    action: \"cropImage\",\r\n    // Action name\r\n    fileTypes: \"@loadImageFileTypes\",\r\n    // Reuse loadImageFileTypes\r\n    maxFileSize: \"@loadImageMaxFileSize\",\r\n    // Reuse loadImageMaxFileSize\r\n    cropperOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#options\r\n    cropperCanvasOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#getcroppedcanvasoptions\r\n    disabled: \"@disableImageCrop\" // Use data-disable-image-crop attribute to enable/disable\r\n  });\r\n  $$1.widget(\"blueimp.fileupload\", $$1.blueimp.fileupload, {\r\n    processActions: {\r\n      cropImage: function (data, options) {\r\n        let file = data.files[data.index];\r\n        if (options.disabled || $$1.isNumber(options.maxFileSize) && file.size > options.maxFileSize || options.fileTypes && !options.fileTypes.test(file.type)) return data;\r\n        let url = URL.createObjectURL(file),\r\n          dfd = $$1.Deferred(),\r\n          that = this;\r\n        let $dlg = ew.cropperDialog || $$1(\"#ew-cropper-dialog\").on(\"shown.bs.modal\", function () {\r\n          $dlg.data(\"cropper\", new Cropper(this.querySelector(\"#ew-crop-image\"), options.cropperOptions));\r\n        }).on(\"hidden.bs.modal\", function () {\r\n          var _$dlg$data;\r\n          (_$dlg$data = $dlg.data(\"cropper\")) == null || _$dlg$data.destroy();\r\n          $dlg.removeData(\"cropper\");\r\n          $dlg.find(\"#ew-crop-image\").attr(\"src\", \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\");\r\n        });\r\n        ew.cropperDialog = $dlg;\r\n        $dlg.find(\"#ew-crop-image\").attr(\"src\", url);\r\n        $dlg.find(\".ew-crop-btn\").off(\"click\").on(\"click\", function () {\r\n          if ($dlg.data(\"cropper\")) {\r\n            try {\r\n              let canvas = $dlg.data(\"cropper\").getCroppedCanvas(options.cropperCanvasOptions);\r\n              canvas.toBlob(blob => {\r\n                data.files[data.index] = new File([blob], file.name, {\r\n                  type: file.type\r\n                });\r\n                dfd.resolveWith(that, [data]);\r\n              }, file.type);\r\n            } catch (error) {\r\n              ew.alert(error);\r\n              dfd.rejectWith(that, [data]);\r\n            } finally {\r\n              $dlg.modal(\"hide\");\r\n            }\r\n          }\r\n        });\r\n        $dlg.find(\".ew-skip-btn\").off(\"click\").on(\"click\", function () {\r\n          dfd.resolveWith(that, [data]);\r\n          $dlg.modal(\"hide\");\r\n        });\r\n        $dlg.modal(\"show\");\r\n        return dfd.promise();\r\n      }\r\n    }\r\n  });\n\n  // Extend jQuery\r\n  $$1.extend({\r\n    isBoolean: function (o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNumber: function (o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function (o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function (o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function (o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function (o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function (o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function (when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n        d = data,\r\n        f,\r\n        r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n      f = function () {\r\n        m.apply(o, d || []);\r\n      };\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function () {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n  $$1.fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    let rec = {},\r\n      id = this.attr(\"id\"),\r\n      obj = this[0],\r\n      m = id.match(/^[xy](\\d*)_/),\r\n      f,\r\n      tbl,\r\n      infix;\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n      tbl = this.data(\"table\"); // table var\r\n      infix = m[1]; // row index\r\n    } else if (obj != null && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n      infix = obj.htmlForm.dataset.rowindex; // row index\r\n    }\r\n    let selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\" + ($$1.isValue(infix) ? \"[name^=x\" + infix + \"]\" : \"\") + \":not(.ew-custom-option)\";\r\n    if (f && selector) {\r\n      $$1(f).find(selector).each(function () {\r\n        let key = this.dataset.field.substring(2),\r\n          // \"data-field\"\r\n          name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n        rec[key] = rec[key] ? rec[key].add(this) : $$1(this); // Create jQuery object for each field\r\n      });\r\n    }\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n  $$1.fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function () {\r\n      var _this$data$substring, _this$data;\r\n      let id = (_this$data$substring = (_this$data = this.data(\"field\")) == null ? void 0 : _this$data.substring(2)) != null ? _this$data$substring : \"\",\r\n        $row = this.closest(\"#r_\" + id + \", #xs_\" + id);\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function (v) {\r\n      var _this$data$substring2, _this$data2;\r\n      let id = (_this$data$substring2 = (_this$data2 = this.data(\"field\")) == null ? void 0 : _this$data2.substring(2)) != null ? _this$data$substring2 : \"\",\r\n        $p = this.closest(\"#r_\" + id + \", #xs_\" + id); // Find the row\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggleClass(\"d-none d-sm-none\", !v); // Note: d-sm-none overrides d-sm-flex\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        ew.selectOption(this[0], v);\r\n        return this;\r\n      } else {\r\n        return ew.getValue(this[0]);\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function () {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as Luxon object\r\n    toDate: function () {\r\n      var _ew$vars$tables;\r\n      let data = this.data(),\r\n        table = data.table,\r\n        field = data.field.replace(/^[xy]_/, \"\"),\r\n        format = (_ew$vars$tables = ew.vars.tables) == null || (_ew$vars$tables = _ew$vars$tables[table]) == null || (_ew$vars$tables = _ew$vars$tables.fields) == null || (_ew$vars$tables = _ew$vars$tables[field]) == null ? void 0 : _ew$vars$tables.clientFormatPattern;\r\n      return ew.parseDateTime(this.value(), format);\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function () {\r\n      return this.toDate().toJSDate();\r\n    }\r\n  });\n\n  // Improve Bootstrap Dropdown\r\n  bootstrap.Dropdown.prototype.toggle = function () {\r\n    if (!this._element.classList.contains(\"ew-dropdown-toggle\")) {\r\n      if (this._element.closest(\"[data-widget]\")) $$1(this._element).on(\"click.ew.dropdown\", e => {\r\n        bootstrap.Dropdown.clearMenus(e.originalEvent); // Clear menus first because this click event will not propagate to the document\r\n        e.stopPropagation(); // Stop propagate or the event will toggle row of expandable-table\r\n      });\r\n      // Move the menu to document body if menu inside responsive table\r\n      if (this._menu.closest(\".table-responsive\")) {\r\n        let container = this._menu.closest(\".popover-body, .modal-body, .offcanvas-body, body\");\r\n        container.appendChild(this._menu);\r\n        let menu = this._menu;\r\n        if (!this._element.id) this._element.id = \"dropdownbtn\" + ew.random();\r\n        menu.setAttribute('aria-labelledby', this._element.id);\r\n        function callback(mutationList) {\r\n          mutationList.forEach(mutation => {\r\n            switch (mutation.type) {\r\n              case \"attributes\":\r\n                if (mutation.target.classList.contains(\"show\")) menu.classList.add(\"d-block\");else menu.classList.remove(\"d-block\");\r\n                break;\r\n            }\r\n          });\r\n        }\r\n        let observer = new MutationObserver(callback);\r\n        observer.observe(this._parent, {\r\n          attributeFilter: [\"class\"],\r\n          attributeOldValue: false,\r\n          subtree: false\r\n        });\r\n      }\r\n      this._element.classList.add(\"ew-dropdown-toggle\");\r\n    }\r\n    return this._isShown() ? this.hide() : this.show();\r\n  };\n\n  loadjs.ready([\"wrapper\", \"head\"], function () {\r\n    let $chatWrapper = $$1(\".chat-wrapper\"),\r\n      $chatCheck = $chatWrapper.find(\"#chat-check\"),\r\n      $chatBtn = $chatWrapper.find(\".chat-btn\").addClass(\"show\"),\r\n      $chatClose = $chatBtn.find(\".close\"),\r\n      $chatComment = $chatBtn.find(\".comment\"),\r\n      $chatCard = $chatWrapper.find(\".direct-chat\"),\r\n      $chatHeader = $chatCard.find(\".card-header\"),\r\n      $chatCollapse = $chatHeader.find(\".card-collapse\"),\r\n      $chatBody = $chatCard.find(\".card-body\"),\r\n      $chatIframe = $chatBody.find(\"iframe\");\r\n    $chatCheck.on(\"click\", () => {\r\n      var _Pace;\r\n      if ((_Pace = Pace) != null && _Pace.running) return;\r\n      const checked = $chatCheck.prop(\"checked\");\r\n      $chatClose.toggle(checked);\r\n      $chatComment.toggle(!checked);\r\n      $chatCard.toggle(checked);\r\n      let iframe = $chatIframe[0];\r\n      if (checked && !iframe.src) iframe.src = iframe.dataset.src;\r\n    });\r\n    $chatCard.on(\"removed.lte.cardwidget\", () => $chatCheck.prop(\"checked\", false).triggerHandler(\"click\"));\r\n    $chatCard.on(\"maximized.lte.cardwidget\", () => {\r\n      $chatWrapper.after($chatCard);\r\n      $chatCollapse.hide();\r\n      $chatCard.delay(150).queue(function () {\r\n        let h = $chatCard.height() - $chatHeader.outerHeight();\r\n        $chatBody.height(h);\r\n        $chatIframe.addClass(\"w-100\").height(h - parseInt($chatCard.css(\"border-radius\"), 10)); // Minus the radius of card\r\n        $chatCard.dequeue();\r\n      });\r\n      $chatIframe[0].contentDocument.location.reload(true);\r\n    }).on(\"minimized.lte.cardwidget\", () => {\r\n      $chatWrapper.append($chatCard);\r\n      $chatCollapse.show();\r\n      $chatCard.toggle($chatCheck.prop(\"checked\"));\r\n      $chatCard.queue(function () {\r\n        $chatBody.height(\"auto\");\r\n        $chatIframe.removeClass(\"w-100\").height(\"auto\");\r\n        $chatCard.dequeue();\r\n      });\r\n      $chatIframe[0].contentDocument.location.reload(true);\r\n    });\r\n  });\n\n  var isNil = (value) => {\r\n      return value === null || value === undefined;\r\n  };\r\n\r\n  var isNil$1 = isNil;\n\n  var isFunction = (value) => {\r\n      return typeof value === 'function';\r\n  };\r\n\r\n  var isFunction$1 = isFunction;\n\n  var isNaNNumber = (value) => {\r\n      return typeof value === 'number' && isNaN(value);\r\n  };\r\n\r\n  var isNaNNumber$1 = isNaNNumber;\n\n  var isFiniteNumber = (value) => {\r\n      return typeof value == 'number' && isFinite(value);\r\n  };\r\n\r\n  var isFiniteNumber$1 = isFiniteNumber;\n\n  /**\r\n   * Optimized for performance\r\n   */\r\n  const multiplyByPowerOfTen = (number, powerOfTenExponent) => {\r\n      if (!isFiniteNumber$1(number))\r\n          return NaN;\r\n      const numAsString = '' + number;\r\n      const indexOfE = numAsString.indexOf('e');\r\n      if (indexOfE === -1) {\r\n          return +(numAsString + 'e' + powerOfTenExponent);\r\n      }\r\n      else {\r\n          return +(numAsString.slice(0, indexOfE) + 'e' + (+numAsString.slice(indexOfE + 1) + powerOfTenExponent));\r\n      }\r\n  };\r\n\r\n  var multiplyByPowerOfTen$1 = multiplyByPowerOfTen;\n\n  /**\r\n   * Only handles direct power of ten (only integer exponents)\r\n   */\r\n  const log10 = (numberThatIsPowerOfTen) => {\r\n      return Math.round(Math.log(numberThatIsPowerOfTen) * Math.LOG10E);\r\n  };\r\n\r\n  var log10$1 = log10;\n\n  const toObject = (arr, entriesResolver) => {\r\n      const object = {};\r\n      for (let i = 0; i < arr.length; ++i) {\r\n          if (i in arr) {\r\n              const [key, value] = entriesResolver(arr[i], i);\r\n              object[key] = value;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n\r\n  var toObject$1 = toObject;\n\n  // <i> Extracted from https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n  const escapeRegexString = (string) => {\r\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, match => `\\\\${match}`);\r\n  };\r\n\r\n  var escapeRegexString$1 = escapeRegexString;\n\n  /**\r\n   * This function doesn't work with non-primitive arguments\r\n   */\r\n  const memoize = (fn) => {\r\n      const cache = {};\r\n      return function (...args) {\r\n          const cacheKey = args.length > 1 ? args.join('-(:-:)-') : args[0];\r\n          if (cacheKey in cache) {\r\n              return cache[cacheKey];\r\n          }\r\n          const result = fn.apply(this, args);\r\n          cache[cacheKey] = result;\r\n          return result;\r\n      };\r\n  };\r\n\r\n  var memoize$1 = memoize;\n\n  const powerOf10LookupObject = (() => {\r\n      const object = {};\r\n      // 1 <= x <= Infinity (positive exponent)\r\n      let additionalZeros = '';\r\n      let currentValue;\r\n      while (currentValue !== Infinity) {\r\n          currentValue = +('1' + additionalZeros);\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      // 0 <= x < 1 (negative exponent)\r\n      additionalZeros = '';\r\n      currentValue = undefined;\r\n      while (currentValue !== 0) {\r\n          currentValue = +('0.' + additionalZeros + '1');\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      return object;\r\n  })();\r\n  const isPowerOfTen = (number) => {\r\n      return !!powerOf10LookupObject[number];\r\n  };\r\n\r\n  var isPowerOfTen$1 = isPowerOfTen;\n\n  const toBase = (value, valueUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || valueUnit === unitScale.base)\r\n          return value;\r\n      if (!(valueUnit in unitScale.scale))\r\n          return NaN;\r\n      const toBaseMultiplier = unitScale.scale[valueUnit] || 1;\r\n      return isPowerOfTen$1(toBaseMultiplier)\r\n          ? multiplyByPowerOfTen$1(value, log10$1(toBaseMultiplier))\r\n          : value * toBaseMultiplier;\r\n  };\r\n  const convertUnit = (value, originUnit, targetUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || originUnit === targetUnit)\r\n          return value;\r\n      const valueAsBase = toBase(value, originUnit, unitScale);\r\n      const resolvedScale = Object.assign(Object.assign({}, unitScale.scale), { [unitScale.base]: 1 });\r\n      if (isNaN(valueAsBase) || !(originUnit in resolvedScale) || !(targetUnit in resolvedScale))\r\n          return NaN;\r\n      const conversionFactorFromBase = unitScale.scale[targetUnit] || 1;\r\n      return isPowerOfTen$1(conversionFactorFromBase)\r\n          ? multiplyByPowerOfTen$1(valueAsBase, -log10$1(conversionFactorFromBase))\r\n          : valueAsBase / conversionFactorFromBase;\r\n  };\r\n  /**\r\n   * Looks through every possibility for the 'best' available unit.\r\n   * i.e. Where the value has the fewest numbers before the decimal point,\r\n   * but is still higher than 1.\r\n   */\r\n  const toBest = (value, originUnit, unitScale, options) => {\r\n      const resolvedOptions = Object.assign({ exclude: [], cutOffNumber: 1 }, options);\r\n      let best = null;\r\n      const scale = unitScale.scale;\r\n      Object.keys(scale).sort((a, b) => scale[a] - scale[b]).forEach((scaleUnit) => {\r\n          const isIncluded = resolvedOptions.exclude.indexOf(scaleUnit) === -1;\r\n          if (!isIncluded)\r\n              return;\r\n          const result = convertUnit(value, originUnit, scaleUnit, unitScale);\r\n          const absoluteResult = Math.abs(result);\r\n          if (!best || (absoluteResult >= resolvedOptions.cutOffNumber && absoluteResult < Math.abs(best[0]))) {\r\n              best = [result, scaleUnit];\r\n          }\r\n      });\r\n      return best || [value, originUnit];\r\n  };\r\n  const unitScale = (unitScaleDefinition) => {\r\n      return {\r\n          toBase: (value, unit) => {\r\n              return toBase(value, unit, unitScaleDefinition);\r\n          },\r\n          convert: (value, originUnit, targetUnit) => {\r\n              return convertUnit(value, originUnit, targetUnit, unitScaleDefinition);\r\n          },\r\n          toBest: (value, originUnit, options) => {\r\n              return toBest(value, originUnit, unitScaleDefinition, options);\r\n          },\r\n          scaleDefinition: unitScaleDefinition,\r\n      };\r\n  };\n\n  /**\r\n   * Short version of mozilla polyfill:\r\n   * <i> See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\r\n   */\r\n  const stringRepeat = (str, count) => {\r\n      // return (str.repeat && str.repeat(count)) || new Array(count + 1).join(str);\r\n      if (count < 1)\r\n          return '';\r\n      let result = '';\r\n      let pattern = str;\r\n      while (count > 1) {\r\n          if (count & 1)\r\n              result += pattern;\r\n          count >>>= 1, pattern += pattern;\r\n      }\r\n      return result + pattern;\r\n  };\r\n\r\n  var stringRepeat$1 = stringRepeat;\n\n  const baseCreateUnitScaleFromLocaleAbbreviations = (str) => {\r\n      if (!str) {\r\n          return unitScale({ base: '', scale: {} });\r\n      }\r\n      const scale = str.split('|');\r\n      const scaleDefinition = { ['']: 1 };\r\n      scale.forEach((scaleItem, scaleItemIndex) => {\r\n          if (!scaleItem)\r\n              return;\r\n          scaleDefinition[scaleItem] = +(1 + stringRepeat$1('0', scaleItemIndex));\r\n      });\r\n      return unitScale({ base: '', scale: scaleDefinition });\r\n  };\r\n  const createUnitScaleFromLocaleAbbreviations = memoize$1(baseCreateUnitScaleFromLocaleAbbreviations);\r\n\r\n  var createUnitScaleFromLocaleAbbreviations$1 = createUnitScaleFromLocaleAbbreviations;\n\n  const replaceNumeralSystemWithLatinNumbers = (numericStringWithExtraInfo, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericStringWithExtraInfo;\r\n      const numericStringLength = numericStringWithExtraInfo.length;\r\n      const numeralSystemToLatinSystemMap = toObject$1(numeralSystemMap, (digit, digitIndex) => [digit.replace(/\\u200e/g, ''), '' + digitIndex]);\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericStringWithExtraInfo[numericStringIndex];\r\n          output += numeralSystemToLatinSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n  const getScalingFactorFromAbbreviations = (stringOriginal, options) => {\r\n      var _a;\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1((_a = options.locale) === null || _a === void 0 ? void 0 : _a.abbreviations);\r\n      const abbreviationsSortedByLengthDesc = Object.keys(scale.scaleDefinition.scale).sort((a, b) => b.length - a.length);\r\n      let abbreviationScalingFactor = 1;\r\n      for (const abbreviation of abbreviationsSortedByLengthDesc) {\r\n          const scapedAbbreviationForRegex = escapeRegexString$1(abbreviation);\r\n          const regexp = new RegExp('[^a-zA-Z]'\r\n              + `(${scapedAbbreviationForRegex})|(${scapedAbbreviationForRegex.replace(/\\u200e/g, '')})`\r\n              + '(?:\\\\)(?:\\\\))?)?$');\r\n          if (stringOriginal.match(regexp)) {\r\n              abbreviationScalingFactor = scale.toBase(abbreviationScalingFactor, abbreviation);\r\n              break;\r\n          }\r\n      }\r\n      return abbreviationScalingFactor;\r\n  };\r\n  // unformats numbers separators, decimals places, signs, abbreviations\r\n  const formattedStringToNumber = (inputString, options) => {\r\n      var _a;\r\n      const locale = options.locale;\r\n      const stringOriginal = inputString;\r\n      let value;\r\n      // Replace special digits with latin digits\r\n      const stringWithLatinDigits = replaceNumeralSystemWithLatinNumbers(inputString, (_a = options.locale) === null || _a === void 0 ? void 0 : _a.numeralSystem);\r\n      if (options.zeroFormat && stringWithLatinDigits === options.zeroFormat) {\r\n          value = 0;\r\n      }\r\n      else if (options.nullFormat && stringWithLatinDigits === options.nullFormat || !stringWithLatinDigits.replace(/[^0-9]+/g, '').length) {\r\n          value = null;\r\n      }\r\n      else {\r\n          // Replaces the locale decimal delimiter with a dot (.)\r\n          const decimalDelimiterFromLocale = locale.delimiters.decimal;\r\n          const stringWithDotDecimalDelimiter = decimalDelimiterFromLocale === '.'\r\n              ? stringWithLatinDigits\r\n              : stringWithLatinDigits.replace(/\\./g, '').replace(decimalDelimiterFromLocale, '.');\r\n          // Determines the scaling factor from the abbreviations (if has abbreviations)\r\n          const abbreviationScalingFactor = getScalingFactorFromAbbreviations(stringOriginal, options);\r\n          // Check for negative number\r\n          const negativeFactor = (stringWithDotDecimalDelimiter.split('-').length\r\n              + Math.min(stringWithDotDecimalDelimiter.split('(').length - 1, stringWithDotDecimalDelimiter.split(')').length - 1)) % 2 ? 1 : -1;\r\n          // Remove non numbers\r\n          const numberAsString = stringWithDotDecimalDelimiter.replace(/[^0-9.]+/g, '');\r\n          value = negativeFactor * multiplyByPowerOfTen$1(+numberAsString, log10$1(abbreviationScalingFactor));\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var formattedStringToNumber$1 = formattedStringToNumber;\n\n  const locale = {\r\n      code: 'en',\r\n      delimiters: {\r\n          thousands: ',',\r\n          decimal: '.',\r\n      },\r\n      abbreviations: '|||K|||M|||B|||T',\r\n      ordinal: number => {\r\n          const b = number % 10;\r\n          return (Math.floor(number % 100 / 10) === 1)\r\n              ? 'th'\r\n              : b === 1\r\n                  ? 'st'\r\n                  : b === 2\r\n                      ? 'nd'\r\n                      : b === 3\r\n                          ? 'rd'\r\n                          : 'th';\r\n      },\r\n  };\r\n\r\n  var locale$1 = locale;\n\n  function merge(...args) {\r\n      const newObject = {};\r\n      const argsLength = args.length;\r\n      for (let i = 0; i < argsLength; i++) {\r\n          for (const key in args[i])\r\n              newObject[key] = args[i][key];\r\n      }\r\n      return newObject;\r\n  }\n\n  var isObject = (value) => {\r\n      return typeof value === 'object' && value !== null;\r\n  };\r\n\r\n  var isObject$1 = isObject;\n\n  var isString = (value) => {\r\n      return typeof value === 'string';\r\n  };\r\n\r\n  var isString$1 = isString;\n\n  const truncateNumber = (value) => {\r\n      return value < 0 ? Math.ceil(value) : Math.floor(value);\r\n  };\r\n\r\n  var truncateNumber$1 = truncateNumber;\n\n  const getPatternParts = (patternMask) => {\r\n      let isInEscapedPart = false;\r\n      let currentEscapedWord = '';\r\n      const parts = [];\r\n      for (let i = 0; i < patternMask.length; i++) {\r\n          const char = patternMask.charAt(i);\r\n          if (char === \"'\" && !isInEscapedPart) {\r\n              isInEscapedPart = true;\r\n              currentEscapedWord = '';\r\n          }\r\n          else if (char === \"'\" && isInEscapedPart && patternMask.charAt(i - 1) !== \"\\\\\") {\r\n              isInEscapedPart = false;\r\n              parts.push({ escaped: true, value: currentEscapedWord });\r\n          }\r\n          else if (isInEscapedPart) {\r\n              currentEscapedWord += char;\r\n          }\r\n          else {\r\n              if (parts.length && !parts[parts.length - 1].escaped) {\r\n                  parts[parts.length - 1].value += char;\r\n              }\r\n              else {\r\n                  parts.push({ escaped: false, value: char });\r\n              }\r\n          }\r\n      }\r\n      return parts;\r\n  };\r\n  /**\r\n   * Checks only the pattern parts that are not escaped\r\n   */\r\n  const patternIncludes = (patternMask, search) => {\r\n      return patternRemoveEscapedText(patternMask).indexOf(search) !== -1;\r\n  };\r\n  /**\r\n   * Replaces only the pattern parts that are not escaped\r\n   */\r\n  const patternReplace = (patternMask, searchValue, replaceValue) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? `'${e.value}'` : e.value.replace(searchValue, _ => replaceValue))\r\n          .join('');\r\n  };\r\n  const patternRemoveEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .filter(e => !e.escaped)\r\n          .map(e => e.value)\r\n          .join('');\r\n  };\r\n  const patternStripAndNormalizeEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? e.value.replace(/\\\\'/g, \"'\") : e.value)\r\n          .join('');\r\n  };\n\n  const stringIncludes = (str, search) => {\r\n      return str.indexOf(search) !== -1;\r\n  };\r\n\r\n  var stringIncludes$1 = stringIncludes;\n\n  /**\r\n   * What does it look for in the pattern?\r\n   *     '(' | '+' | '-'\r\n   * What does it remove from the pattern?\r\n   *     '(' | ')' | '+' | '-'\r\n   * What options does it provide?\r\n   *     - negativeParentheses (if negative value should be wrapped between parentheses)\r\n   *     - forceSign (is positive values should have a + sign)\r\n   * How will it transform the output?\r\n   *     - Parentheses:\r\n   *         '-23.58' & '(0.00)'  =>  '(23.58)'\r\n   *         '-23.58' & '( 0.00 )'  =>  '( 23.58 )'\r\n   *         '-23.58' & '(  0.00 ) '  =>  ' (  23.58 )'\r\n   *     - Sign:\r\n   *         '12.34' & '+0.0'  =>  '+12.34'\r\n   *         '-12.34' & '+0.0'  =>  '-12.34'\r\n   *\r\n   * <i> If '+' is somewhere in the pattern, it will set the '+' sign for positive numbers\r\n   *     and same for negative numbers.\r\n   * <i> If '-' is somewhere in the pattern, it will place the negative sign in the defined position.\r\n   *     But it won't still set the sign for positive numbers.\r\n   * <i> Checks if we should use parentheses for negative number or if we should prefix with a sign.\r\n   *     If both are present we default to parentheses.\r\n   */\r\n  const signRule = (pattern) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      const negativeParentheses = stringIncludes$1(patternWithoutEscapedText, '(') && stringIncludes$1(patternWithoutEscapedText, ')');\r\n      const forceSign = !negativeParentheses && stringIncludes$1(patternWithoutEscapedText, '+');\r\n      let outputPatternMask = pattern;\r\n      outputPatternMask = patternReplace(outputPatternMask, '(', `'ɵnps'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, ')', `'ɵnpe'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, /(-|\\+)/, `'ɵs'`);\r\n      return [outputPatternMask, { negativeParentheses, forceSign }];\r\n  };\r\n\r\n  var signRule$1 = signRule;\n\n  /**\r\n   * Checks if abbreviation is wanted\r\n   * <i> Applied only when 'a' is present.\r\n   * <i> If 'a' is followed by 'k' | 'm' | 'b' | 't', then, it will force the abbreviation to be the specified\r\n   *     unit. (e.g. (123456.78, '0,0.00am')  =>  '0.12M')\r\n   */\r\n  const abbreviationRule = (patternMask) => {\r\n      let compactUnit = null; // force abbreviation\r\n      let compact = false;\r\n      // If it includes 'a' means it should be abbreviated (only if at least includes 'a')\r\n      if (patternIncludes(patternMask, 'a')) {\r\n          compact = true;\r\n          const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n          const abbreviationRegExpResult = patternWithoutEscapedText.match(/a(k|m|b|t)?/);\r\n          compactUnit = !!abbreviationRegExpResult ? abbreviationRegExpResult[1] : null;\r\n      }\r\n      let outputPatternMask = patternMask;\r\n      outputPatternMask = patternReplace(outputPatternMask, /a(k|m|b|t)?/, `'ɵa'`);\r\n      return [outputPatternMask, { compact, compactUnit, compactAuto: compact && !compactUnit }];\r\n  };\r\n\r\n  var abbreviationRule$1 = abbreviationRule;\n\n  /**\r\n   * Faster version of String.prototype.split that only handles splitting in two parts\r\n   */\r\n  const splitStringInTwoParts = (str, separator) => {\r\n      if (!str)\r\n          return ['', ''];\r\n      const indexOfSearchChar = str.indexOf(separator);\r\n      if (indexOfSearchChar === -1) {\r\n          return [str, ''];\r\n      }\r\n      else {\r\n          return [str.slice(0, indexOfSearchChar), str.slice(indexOfSearchChar + 1)];\r\n      }\r\n  };\r\n\r\n  var splitStringInTwoParts$1 = splitStringInTwoParts;\n\n  const countChars = (string, char) => {\r\n      return !string ? 0 : string.split('').filter(stringChar => stringChar === char).length;\r\n  };\r\n  /**\r\n   * Fraction digits (decimals) count rule (minimum and maximum fraction digits)\r\n   * <i> Optional fraction digits would go always after the forced ones\r\n   */\r\n  const decimalPlacesRule = (patternMask) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternPrecisionPart = splitStringInTwoParts$1(patternWithoutEscapedText, '.')[1];\r\n      let minimumFractionDigits = 0;\r\n      let maximumFractionDigits = 0;\r\n      if (!!patternPrecisionPart) {\r\n          const trimmedPatternPrecisionPart = patternPrecisionPart.trim();\r\n          if (stringIncludes$1(trimmedPatternPrecisionPart, '[')) {\r\n              // If it contains optional fraction digits\r\n              const patternPrecisionPartWithoutClosingBracket = trimmedPatternPrecisionPart.replace(']', '');\r\n              // Isolates forced (left) vs optional (right) decimals\r\n              const precisionSplitted = splitStringInTwoParts$1(patternPrecisionPartWithoutClosingBracket, '[');\r\n              minimumFractionDigits = countChars(precisionSplitted[0], '0');\r\n              maximumFractionDigits = minimumFractionDigits + countChars(precisionSplitted[1], '0');\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, '#')) {\r\n              // If it contains optional fraction digits marked with '#'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('#')[0], '0');\r\n              maximumFractionDigits = trimmedPatternPrecisionPart.length;\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, 'X')) {\r\n              // If it contains no-maximum fraction digits marked with 'X'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('X')[0], '0');\r\n              maximumFractionDigits = 500;\r\n          }\r\n          else {\r\n              const fractionDigits = countChars(trimmedPatternPrecisionPart.split(' ')[0], '0');\r\n              minimumFractionDigits = fractionDigits;\r\n              maximumFractionDigits = fractionDigits;\r\n          }\r\n      }\r\n      return { minimumFractionDigits, maximumFractionDigits };\r\n  };\r\n\r\n  var decimalPlacesRule$1 = decimalPlacesRule;\n\n  /**\r\n   * Check for optional decimals.\r\n   *\r\n   * <i> 'optionalDecimals' This would mean that:\r\n   *     - In case the number (value) HAS decimals (e.g. 55.34), then it would display the fixed amount of defined\r\n   *       decimals (e.g. '0[.]000' => 3 fixed decimals), but, if the number is an straight integer, then it won't\r\n   *       display any decimals.\r\n   * <i> It could also accept optional decimals afterwards. So for the case '0[.]00##':\r\n   *     - If it is an integer, displays only an integer:  23 => '23'\r\n   *     - If it has 1 decimal, displays 2 decimals:       23.4 => '23.40'\r\n   *     - If it has 3 decimals, displays 3 decimals:      23.456 => '23.456'\r\n   */\r\n  const optionalDecimalPlacesRule = (patternMask) => {\r\n      let optionalFractionDigits = false;\r\n      let outputPatternMask = patternMask;\r\n      if (patternIncludes(patternMask, '[.]')) {\r\n          optionalFractionDigits = true;\r\n          outputPatternMask = patternReplace(outputPatternMask, '[.]', '.');\r\n      }\r\n      return [outputPatternMask, { optionalFractionDigits }];\r\n  };\r\n\r\n  var optionalDecimalPlacesRule$1 = optionalDecimalPlacesRule;\n\n  /**\r\n   * <i> The regExp tests for:\r\n   *     - 0.00##X\r\n   *     - 0,0.00##X\r\n   *     - #.00##X (without leading zeros)\r\n   *     - #,#.00##X (without leading zeros)\r\n   */\r\n  const numberPositionRule = (patternMask) => {\r\n      const numberPartRegExp = /((((0|#)+,)?(0|#)+(\\.([0#X]|\\[0+\\])+)?){1})/;\r\n      return patternReplace(patternMask, numberPartRegExp, `'ɵn'`);\r\n  };\r\n  /**\r\n   * Minimum leading integer digits rule\r\n   * This will define the minimum amount of digits on the integer part (left-most grouped zeroes).\r\n   *     - (12.34, '0000.0') =>  '0012.3'\r\n   *     - (12.34, '0000,0.0')  =>  '0,012.3'\r\n   *     - (0.34, '#.0') => '.3'\r\n   *     - (1.34, '#.0') => '1.3'\r\n   *\r\n   * <i> It always pick the left-most amount of zeros, so:\r\n   *     - If pattern has NO thousands separator ('000.0'), then the amount at the left of the DOT is used.\r\n   *     - If pattern HAS thousands separator ('00,0.0'), then the amount at the left of the COMMA is used.\r\n   * <i> This will remove the integer zero for numbers between 1 and -1 (e.g. 0.23 or -0.5)\r\n   *     - If pattern integer part is option (0.24, '#.00') => '.24'\r\n   */\r\n  const minimumIntegerDigitsRule = (patternMask) => {\r\n      const patternMaskWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternMaskIntegerPart = patternMaskWithoutEscapedText.split('.')[0].split(',')[0];\r\n      // If it has '#' in the integer part, sets the minimumIntegerDigits to 0\r\n      if (/#/g.test(patternMaskIntegerPart)) {\r\n          return 0;\r\n      }\r\n      return (patternMaskIntegerPart.match(/0/g) || []).length;\r\n  };\r\n  // If sign is not included, put sign at the left of the number\r\n  const addSignPositionIfItDoesNotExists = (patternMask) => {\r\n      if (stringIncludes$1(patternMask, `'ɵs'`) || stringIncludes$1(patternMask, `'ɵnps'`))\r\n          return patternMask;\r\n      return patternMask.replace(`'ɵn'`, _ => `'ɵs''ɵn'`);\r\n  };\r\n  const baseParsePattern = (inputPattern) => {\r\n      const resolvedInputPattern = isString$1(inputPattern) && inputPattern || '0,0.##########';\r\n      const [patternMaskAfterSignRule, signRules] = signRule$1(resolvedInputPattern);\r\n      const [patternMaskAfterAbbreviationRule, abbreviationRules] = abbreviationRule$1(patternMaskAfterSignRule);\r\n      const [patternMaskAfterOptionalDecimalPlacesRule, optionalDecimalPlacesRules] = optionalDecimalPlacesRule$1(patternMaskAfterAbbreviationRule);\r\n      const outputPatternMask = patternMaskAfterOptionalDecimalPlacesRule;\r\n      const outputPatternMaskWithoutEscapedText = patternRemoveEscapedText(outputPatternMask);\r\n      const decimalPlacesRules = decimalPlacesRule$1(outputPatternMask);\r\n      const minimumIntegerDigits = minimumIntegerDigitsRule(outputPatternMask);\r\n      const grouping = outputPatternMaskWithoutEscapedText.indexOf(',') > -1;\r\n      const patternMaskAfterHandlingNumberPosition = numberPositionRule(outputPatternMask);\r\n      const patternMaskWithEnsuredSignPosition = addSignPositionIfItDoesNotExists(patternMaskAfterHandlingNumberPosition);\r\n      const patternMask = patternMaskWithEnsuredSignPosition;\r\n      return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, signRules), abbreviationRules), optionalDecimalPlacesRules), decimalPlacesRules), { grouping,\r\n          minimumIntegerDigits,\r\n          patternMask });\r\n  };\r\n  const parsePattern = memoize$1(baseParsePattern);\r\n\r\n  var parsePattern$1 = parsePattern;\n\n  /**\r\n   * <i> Checks if value is negative, and removes the sign in case it exists\r\n   * Expects: a value as string, with or without the minus sign, AND NOTHING ELSE.\r\n   * Returns: same as the input but without the minus sign in case it had.\r\n   */\r\n  const removeSignIfExists = (valueAsString) => {\r\n      return valueAsString[0] === '-' ? valueAsString.slice(1) : valueAsString;\r\n  };\r\n\r\n  var removeSignIfExists$1 = removeSignIfExists;\n\n  /**\r\n   * This process only is applied for automatic abbreviation ('a'), and only in the rounding\r\n   * bubbling cases where the scale has to be recomputed.\r\n   * E.g.\r\n   *     formatNumber(999960, 0.0a') // Would return '1000.0k' instead of '1.0m' without this rescaling-fix\r\n   *\r\n   * It only applies rescaling if the absolute value of 'the already scaled and rounded value' (1.87, 'k') is greater or\r\n   * equal to 1000, and the abbreviation is not greater or equal to trillion.\r\n   *\r\n   * <i> After initial scaling, value shouldn't be greater than 1000, unless it is a trillion.\r\n   * <i> The resulting decimal part, will be always 0, as this will be executed only on the corner cases,\r\n   *     that results from rounding bubbling. This is why decimal part is ignored.\r\n   */\r\n  const rescaleRoundedValue = (value, currentAbbreviationScale, patternRules, options) => {\r\n      const { compact, compactAuto } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact || !compactAuto) {\r\n          return [value, currentAbbreviationScale];\r\n      }\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [newScaledValue, newScaledValueUnit] = scale.toBest(value, currentAbbreviationScale || '');\r\n      return [newScaledValue, newScaledValueUnit];\r\n  };\r\n\r\n  var rescaleRoundedValue$1 = rescaleRoundedValue;\n\n  /**\r\n   * If abbreviation is forced, looks for the closest (in terms of power of ten) abbreviation in the current locale\r\n   *     k === 10 ** 3\r\n   *     m === 10 ** 6\r\n   *     b === 10 ** 9\r\n   *     t === 10 ** 12\r\n   */\r\n  const resolveForcedAbbreviationUnit = (forcedAbbreviationUnit, abbreviationsFromLocale, value) => {\r\n      // Record<AbbreviationSymbol, PowerOfTenExponent>\r\n      const forcedScaleMap = { k: 3, m: 6, b: 9, t: 12 };\r\n      const targetPowerOfTenExponent = forcedScaleMap[forcedAbbreviationUnit];\r\n      const scaleDefinitionFromLocale = (abbreviationsFromLocale === null || abbreviationsFromLocale === void 0 ? void 0 : abbreviationsFromLocale.split('|')) || [];\r\n      let closestPowerOfTenWithAvailableAbbreviation = null;\r\n      for (let distanceFromTarget = 0; distanceFromTarget < scaleDefinitionFromLocale.length; distanceFromTarget++) {\r\n          if (!scaleDefinitionFromLocale[targetPowerOfTenExponent - distanceFromTarget])\r\n              continue;\r\n          closestPowerOfTenWithAvailableAbbreviation = targetPowerOfTenExponent - distanceFromTarget;\r\n          break;\r\n      }\r\n      if (closestPowerOfTenWithAvailableAbbreviation === null) {\r\n          return [value, null];\r\n      }\r\n      return [\r\n          multiplyByPowerOfTen$1(value, -closestPowerOfTenWithAvailableAbbreviation),\r\n          scaleDefinitionFromLocale[closestPowerOfTenWithAvailableAbbreviation],\r\n      ];\r\n  };\r\n  const scaleValueWithAbbreviation = (value, patternRules, options) => {\r\n      const { compact, compactUnit } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact)\r\n          return [value, null];\r\n      if (!!compactUnit) {\r\n          return resolveForcedAbbreviationUnit(compactUnit, abbreviations, value);\r\n      }\r\n      /**\r\n       * If abbreviation is automatic, resolves the abbreviation to the best (where the value has\r\n       * the fewest numbers before the decimal point, but is still higher than 1).\r\n       */\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [scaledValue, localizedUnit] = scale.toBest(value, '');\r\n      return [scaledValue, localizedUnit || null];\r\n  };\r\n\r\n  var scaleValueWithAbbreviation$1 = scaleValueWithAbbreviation;\n\n  const roundNumber = (number, precision, roundingFunction) => {\r\n      const resolvedPrecision = precision || 0;\r\n      const resolvedRoundingFunction = roundingFunction || Math.round;\r\n      const scaledValueForRounding = multiplyByPowerOfTen$1(number, resolvedPrecision);\r\n      const roundedScaledValue = resolvedRoundingFunction(scaledValueForRounding);\r\n      const roundedValue = multiplyByPowerOfTen$1(roundedScaledValue, -resolvedPrecision);\r\n      return roundedValue;\r\n  };\r\n\r\n  var roundNumber$1 = roundNumber;\n\n  /**\r\n   * The result from toFixed can contain an exponent for big numbers (e.g. 1.12345671234567e+50).\r\n   * <!> Only handles positive exponents.\r\n   */\r\n  const formatPositiveExponentResult = (valueAsString) => {\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      if (exponentAsNumber < 0)\r\n          return valueAsString;\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significand, '.');\r\n      const numberOfZerosToAdd = exponentAsNumber - fractionalPartOfSignificand.length;\r\n      return `${integerPartOfSignificand}${fractionalPartOfSignificand}${stringRepeat$1('0', numberOfZerosToAdd)}`;\r\n  };\r\n  /**\r\n   * The result from toFixed can contain an exponent for small numbers (e.g. 1.123e-87).\r\n   * <i> Only handles negative exponents\r\n   */\r\n  const formatNegativeExponentResult = (value, exponentAsNumber, significandAsString) => {\r\n      const negativeExponentAbsoluteValue = Math.abs(exponentAsNumber);\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significandAsString, '.');\r\n      const absoluteIntegerPartOfSignificand = integerPartOfSignificand[0] === '-' ? integerPartOfSignificand.slice(1) : integerPartOfSignificand;\r\n      let outputIntegerPartOfSignificand = absoluteIntegerPartOfSignificand;\r\n      let outputFractionalPartOfSignificand = fractionalPartOfSignificand;\r\n      for (let i = 0; i < negativeExponentAbsoluteValue; i += 1) {\r\n          // Consider using array.shift\r\n          const firstCharInIntegerPart = outputIntegerPartOfSignificand[0] || '';\r\n          outputIntegerPartOfSignificand = outputIntegerPartOfSignificand.slice(0, outputIntegerPartOfSignificand.length - 1);\r\n          outputFractionalPartOfSignificand = (firstCharInIntegerPart || '0') + outputFractionalPartOfSignificand;\r\n      }\r\n      return `${value < 0 ? '-' : ''}${outputIntegerPartOfSignificand || 0}.${outputFractionalPartOfSignificand}`;\r\n  };\r\n  /**\r\n   * Like Number.prototype.toString() but excluding the exponential info for small and big numbers.\r\n   * e.g.\r\n   *     Small numbers:\r\n   *         value: 0.0000000000001234 (1.234e-13)\r\n   *         toString() => \"1.234e-13\"\r\n   *         numberToStringWithoutExponent() => \"0.0000000000001234\"\r\n   *     Big numbers:\r\n   *         value: 1234123412341230000000 (1.234123412341234e+21)\r\n   *         toString() => \"1.234123412341234e+21\"\r\n   *         numberToStringWithoutExponent() => \"1234123412341230000000\"\r\n   */\r\n  const numberToNonExponentialString = (value) => {\r\n      const valueAsString = (value || 0).toString();\r\n      const valueAsStringHasExponentialInfo = valueAsString.indexOf('e') >= 0;\r\n      if (!valueAsStringHasExponentialInfo)\r\n          return valueAsString;\r\n      // If the toString returns an exponential number (e.g. 1.23e+28)\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      return exponentAsNumber >= 0\r\n          ? formatPositiveExponentResult(valueAsString)\r\n          : formatNegativeExponentResult(value, exponentAsNumber, significand);\r\n  };\r\n\r\n  var numberToNonExponentialString$1 = numberToNonExponentialString;\n\n  const addTrailingZerosInFractionalPart = (valueAsString, minimumFractionDigits) => {\r\n      const [integerPart, fractionalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      return `${integerPart}.${fractionalPart + stringRepeat$1('0', minimumFractionDigits - fractionalPart.length)}`;\r\n  };\r\n  /**\r\n   * Implementation of Number.prototype.toFixed() that treats floats more like decimals\r\n   *\r\n   * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n   * problems for accounting- and finance-related software.\r\n   *\r\n   * <!> This function should only receive a finite number, never NaN, Infinity or -Infinity\r\n   * <i> This function should return always a JS string representation of a number, but without exponent.\r\n   * <i> optionalFractionDigits means: from the fractionDigits amount, the ones that are optional.\r\n   */\r\n  const numberToFixed = (finiteNumber, fractionDigits, roundingFunction, optionalFractionDigits) => {\r\n      const valueAsString = numberToNonExponentialString$1(finiteNumber);\r\n      const minimumFractionDigits = fractionDigits - (optionalFractionDigits || 0);\r\n      const fractionalPartOfValueAsString = splitStringInTwoParts$1(valueAsString, '.')[1];\r\n      const targetFractionDigitsAmount = !!fractionalPartOfValueAsString\r\n          ? Math.min(Math.max(fractionalPartOfValueAsString.length, minimumFractionDigits), fractionDigits)\r\n          : minimumFractionDigits;\r\n      const roundedValue = roundNumber$1(finiteNumber, targetFractionDigitsAmount, roundingFunction);\r\n      let output = numberToNonExponentialString$1(roundedValue);\r\n      // Add trailing zeros if needed\r\n      if (!!minimumFractionDigits) {\r\n          output = addTrailingZerosInFractionalPart(output, minimumFractionDigits);\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var numberToFixed$1 = numberToFixed;\n\n  const roundValueAndAddTrailingZeros = (value, patternRules, options) => {\r\n      const { rounding } = options;\r\n      const { minimumFractionDigits, maximumFractionDigits } = patternRules;\r\n      const resolvedRoundingFunction = rounding || Math.round;\r\n      const shouldIncludeDecimalPlaces = minimumFractionDigits > 0 || maximumFractionDigits > 0;\r\n      if (shouldIncludeDecimalPlaces) {\r\n          const optionalDecimalDigitsCount = maximumFractionDigits - minimumFractionDigits;\r\n          return numberToFixed$1(value, maximumFractionDigits, resolvedRoundingFunction, optionalDecimalDigitsCount);\r\n      }\r\n      else {\r\n          return numberToFixed$1(value, 0, resolvedRoundingFunction);\r\n      }\r\n  };\r\n\r\n  var roundValueAndAddTrailingZeros$1 = roundValueAndAddTrailingZeros;\n\n  const replaceDigitsWithNumeralSystem = (numericString, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericString;\r\n      const numericStringLength = numericString.length;\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericString[numericStringIndex];\r\n          output += numeralSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var replaceDigitsWithNumeralSystem$1 = replaceDigitsWithNumeralSystem;\n\n  /**\r\n   * <i> Add or remove leading zeros\r\n   * Expects: a value integer part as string, without the minus sign. And nothing else but a number at the start.\r\n   * Returns:\r\n   *     - The value with the added or removed leading zeros\r\n   */\r\n  const addOrRemoveLeadingZerosToValue = (valueIntegerPartWithoutSign, patternRules) => {\r\n      const { minimumIntegerDigits } = patternRules;\r\n      if (minimumIntegerDigits === 0 && +valueIntegerPartWithoutSign < 1 && +valueIntegerPartWithoutSign > -1) {\r\n          return '';\r\n      }\r\n      return valueIntegerPartWithoutSign.length >= minimumIntegerDigits\r\n          ? valueIntegerPartWithoutSign\r\n          : `${stringRepeat$1('0', minimumIntegerDigits - valueIntegerPartWithoutSign.length)}${valueIntegerPartWithoutSign}`;\r\n  };\r\n\r\n  var addOrRemoveLeadingZerosToValue$1 = addOrRemoveLeadingZerosToValue;\n\n  const addSignInfoToFullFormattedNumber = (fullFormattedValueWithoutSign, isValueNegative, isValueZero, patternRules) => {\r\n      const { negativeParentheses, forceSign } = patternRules;\r\n      let output = fullFormattedValueWithoutSign;\r\n      if (negativeParentheses && isValueNegative) {\r\n          output = output.replace(/'ɵ(nps|npe)'/g, match => match === `'ɵnps'` ? '(' : ')');\r\n      }\r\n      else if (forceSign) {\r\n          output = output.replace(`'ɵs'`, isValueNegative ? '-' : isValueZero ? '' : '+');\r\n      }\r\n      else if (isValueNegative) {\r\n          output = output.replace(`'ɵs'`, '-');\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addSignInfoToFullFormattedNumber$1 = addSignInfoToFullFormattedNumber;\n\n  /**\r\n   * Splits the given number (as string) in the integer and decimal parts.\r\n   * Returns:\r\n   *     [integerPart: string, decimalPart: string]\r\n   * <i> The integer part can potentially contain the number sign (-) if it wasn't removed previously.\r\n   * <i> It should always return [string, string]\r\n   */\r\n  const splitNumberIntegerAndDecimalParts = (valueAsString, patternRules) => {\r\n      const { optionalFractionDigits } = patternRules;\r\n      const [integerPart, decimalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      // Checks whether optionalDecimalPlaces [.] is enabled and the value is an integer (no decimals)\r\n      if (optionalFractionDigits && Number(decimalPart) === 0) {\r\n          return [integerPart, ''];\r\n      }\r\n      return [integerPart, decimalPart];\r\n  };\r\n\r\n  var splitNumberIntegerAndDecimalParts$1 = splitNumberIntegerAndDecimalParts;\n\n  const addThousandsSeparatorToValueIntegerPart = (valueIntegerPartWithLeadingZerosAndWithoutSign, patternRules, options) => {\r\n      const { delimiters, digitGroupingStyle } = options.locale;\r\n      const { grouping } = patternRules;\r\n      if (!grouping || !delimiters.thousands) {\r\n          return valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      }\r\n      const valueAsString = valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      const thousandsSeparator = delimiters.thousands;\r\n      const digitGrouping = !!(digitGroupingStyle === null || digitGroupingStyle === void 0 ? void 0 : digitGroupingStyle.length) ? digitGroupingStyle : [3];\r\n      const restDigitGrouping = [...digitGrouping];\r\n      let output = '';\r\n      let groupingSubIteration = 1;\r\n      for (let i = valueAsString.length - 1; i >= 0; i--) {\r\n          if (groupingSubIteration === restDigitGrouping[0] && i !== 0) {\r\n              output = thousandsSeparator + valueAsString[i] + output;\r\n              if (restDigitGrouping.length > 1)\r\n                  restDigitGrouping.shift();\r\n              groupingSubIteration = 1;\r\n          }\r\n          else {\r\n              output = valueAsString[i] + output;\r\n              groupingSubIteration += 1;\r\n          }\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addThousandsSeparatorToValueIntegerPart$1 = addThousandsSeparatorToValueIntegerPart;\n\n  /**\r\n   * Applies the localized abbreviation unit to the pattern mask\r\n   * <i> If the localized unit is empty (''), it will remove the space between the number and the abbreviation.\r\n   * <i> Replaces the single quotes from the abbreviation, to prevent collision with patternMask escaped text.\r\n   */\r\n  const applyAbbreviationLocalizedUnitToPatternMask = (patternMask, abbreviationLocalizedUnit, hasAbbreviationInPatternMask) => {\r\n      if (!hasAbbreviationInPatternMask)\r\n          return patternMask;\r\n      if (abbreviationLocalizedUnit) {\r\n          /**\r\n           * If it has abbreviation in the rules, and has a valid unit (e.g. K | M | B | T, or\r\n           * other localized one), escapes the single quotes in the localized abbreviation unit and appends to the mask.\r\n           */\r\n          return patternMask.replace(`'ɵa'`, _ => `'${abbreviationLocalizedUnit.replace(/'/g, _ => \"\\\\'\")}'`);\r\n      }\r\n      else {\r\n          // If it has abbreviation in the rules, but it has no unit, removes the space between abbreviation and number\r\n          return patternMask.match(/'ɵn'\\s*'ɵa'/)\r\n              // If abbreviation is before\r\n              ? patternMask.replace(/\\s*'ɵa'/, '')\r\n              // If abbreviation is after\r\n              : patternMask.replace(/'ɵa'\\s*/, '');\r\n      }\r\n  };\r\n\r\n  var applyAbbreviationLocalizedUnitToPatternMask$1 = applyAbbreviationLocalizedUnitToPatternMask;\n\n  const scaleAndRoundValue = (number, patternRules, options) => {\r\n      // If it doesn't have abbreviation, just round the value and add trailing zeros\r\n      if (!patternRules.compact) {\r\n          const roundedValueAsString = roundValueAndAddTrailingZeros$1(number, patternRules, options);\r\n          return [roundedValueAsString, null];\r\n      }\r\n      // If it has abbreviation, scales the value\r\n      const [scaledValue, scaledValueLocalizedUnit] = scaleValueWithAbbreviation$1(number, patternRules, options);\r\n      const roundedScaledValue = +roundValueAndAddTrailingZeros$1(scaledValue, patternRules, options);\r\n      const [rescaledValue, rescaledValueLocalizedUnit] = rescaleRoundedValue$1(+roundedScaledValue, scaledValueLocalizedUnit, patternRules, options);\r\n      const roundedRescaledValueAsStringWithTrailingZeros = roundValueAndAddTrailingZeros$1(rescaledValue, patternRules, options);\r\n      return [roundedRescaledValueAsStringWithTrailingZeros, rescaledValueLocalizedUnit];\r\n  };\r\n  const numberToFormattedNumber = (number, pattern, options) => {\r\n      var _a;\r\n      const patternRules = parsePattern$1(pattern);\r\n      // Ensure always uses a number or default number\r\n      const resolvedValue = isFiniteNumber$1(number) ? number : 0;\r\n      const [valueAsString, localizedAbbreviationUnit] = scaleAndRoundValue(resolvedValue, patternRules, options);\r\n      // Prevents potentially wrong formatting coming from this function\r\n      if (valueAsString === 'NaN')\r\n          return '';\r\n      const isValueNegative = options.signedZero ? number < 0 : +valueAsString < 0;\r\n      const isValueZero = options.signedZero ? number === 0 : +valueAsString === 0;\r\n      const valueAsStringWithoutSign = removeSignIfExists$1(valueAsString);\r\n      const [integerPart, decimalPart] = splitNumberIntegerAndDecimalParts$1(valueAsStringWithoutSign, patternRules);\r\n      const valueIntegerPartWithLeadingZeros = addOrRemoveLeadingZerosToValue$1(integerPart, patternRules);\r\n      const valueIntegerPartWithThousandsSeparator = addThousandsSeparatorToValueIntegerPart$1(valueIntegerPartWithLeadingZeros, patternRules, options);\r\n      const numeralSystemFromLocale = options.locale.numeralSystem;\r\n      const integerPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(valueIntegerPartWithThousandsSeparator, numeralSystemFromLocale);\r\n      const decimalPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(decimalPart, numeralSystemFromLocale);\r\n      const fullNumberWithNumeralSystem = (integerPartWithNumeralSystem\r\n          + (!!decimalPartWithNumeralSystem ? (((_a = options.locale.delimiters) === null || _a === void 0 ? void 0 : _a.decimal) || '.') + decimalPartWithNumeralSystem : ''));\r\n      // Assembling\r\n      const patternMaskWithAbbreviation = applyAbbreviationLocalizedUnitToPatternMask$1(patternRules.patternMask, localizedAbbreviationUnit, patternRules.compact);\r\n      const patternMaskWithNumber = patternMaskWithAbbreviation.replace(`'ɵn'`, _ => `'${fullNumberWithNumeralSystem.replace(/'/g, \"\\\\'\")}'`);\r\n      const patternMaskWithSignInfo = addSignInfoToFullFormattedNumber$1(patternMaskWithNumber, isValueNegative, isValueZero, patternRules);\r\n      const cleanPatternMask = patternMaskWithSignInfo.replace(/'ɵ(nps|npe|s|a|n)'/g, '');\r\n      const fullFormattedValueWithNormalizedText = patternStripAndNormalizeEscapedText(cleanPatternMask);\r\n      return fullFormattedValueWithNormalizedText;\r\n  };\r\n\r\n  var numberToFormattedNumber$1 = numberToFormattedNumber;\n\n  /**\r\n   * Basis point format (BPS)\r\n   * <i> See https://en.wikipedia.org/wiki/Basis_point\r\n   */\r\n  const bpsFormatter = {\r\n      name: 'bps',\r\n      regexps: {\r\n          format: /BPS/,\r\n          unformat: /BPS/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scaledValue = multiplyByPowerOfTen$1(number, 4);\r\n          const patternWithEscapedBPS = patternReplace(pattern, /BPS/, `'ɵBPSɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBPS, options);\r\n          return formatResult.replace('ɵBPSɵ', 'BPS');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?BPS/, ''), options);\r\n          return isFiniteNumber$1(number) ? multiplyByPowerOfTen$1(number, -4) : number;\r\n      },\r\n  };\r\n\r\n  var bpsFormatter$1 = bpsFormatter;\n\n  const timeFormatter = {\r\n      name: 'time',\r\n      regexps: {\r\n          format: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n          unformat: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n      },\r\n      format: (number) => {\r\n          const absoluteValue = Math.abs(number);\r\n          const sign = number < 0 ? '-' : '';\r\n          const hours = truncateNumber$1(absoluteValue / 3600);\r\n          const minutes = truncateNumber$1((absoluteValue - (hours * 3600)) / 60);\r\n          const seconds = truncateNumber$1(absoluteValue - (hours * 3600) - (minutes * 60));\r\n          return `${sign}${hours}:${(minutes < 10 ? '0' : '') + minutes}:${(seconds < 10 ? '0' : '') + seconds}`;\r\n      },\r\n      unformat: (string) => {\r\n          const isNegative = /^ *-/.test(string);\r\n          const stringWithoutSign = string.replace(/^ *-/, '');\r\n          const timeArray = stringWithoutSign.split(':').reverse();\r\n          let seconds = 0;\r\n          seconds += +timeArray[0];\r\n          seconds += +timeArray[1] * 60;\r\n          seconds += (+timeArray[2] || 0) * 3600;\r\n          return isNegative && seconds !== 0 ? -seconds : seconds;\r\n      },\r\n  };\r\n\r\n  var timeFormatter$1 = timeFormatter;\n\n  const decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n  const binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n  const allSuffixes = decimalSuffixes.concat(binarySuffixes.slice(1));\r\n  /** Avoid collision with BPS format @see formats|bps.ts */\r\n  const unformatRegex = `(${allSuffixes.join('|').replace(/B/g, 'B(?!PS)')})`;\r\n  const bytesDecimalScale = unitScale({ base: 'B', scale: toObject$1(decimalSuffixes, (unit, unitIndex) => [unit, Math.pow(1000, unitIndex)]) });\r\n  const bytesBinaryScale = unitScale({ base: 'B', scale: toObject$1(binarySuffixes, (unit, unitIndex) => [unit, Math.pow(1024, unitIndex)]) });\r\n  const bytesFormatter = {\r\n      name: 'bytes',\r\n      regexps: {\r\n          format: /([0\\s]b[bd])|(b[bd][0\\s])/,\r\n          unformat: (string, options) => options.type === 'bytes' ? new RegExp(unformatRegex).test(string) : false,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scale = patternIncludes(pattern, 'bb') ? bytesBinaryScale : bytesDecimalScale;\r\n          const [scaledValue, scaledValueUnit] = scale.toBest(number, 'B');\r\n          const patternWithEscapedBytes = patternReplace(pattern, /b[bd]/, `'ɵbytesɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBytes, options);\r\n          return formatResult.replace('ɵbytesɵ', scaledValueUnit || '');\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const number = formattedStringToNumber$1(string.replace(new RegExp(unformatRegex), ''), options);\r\n          const suffix = ((_a = string.match(unformatRegex)) === null || _a === void 0 ? void 0 : _a[0]) || '';\r\n          const scale = !!bytesBinaryScale.scaleDefinition.scale[suffix] ? bytesBinaryScale : bytesDecimalScale;\r\n          return number ? scale.toBase(number, suffix) : number;\r\n      }\r\n  };\r\n\r\n  var bytesFormatter$1 = bytesFormatter;\n\n  const ordinalFormatter = {\r\n      name: 'ordinal',\r\n      regexps: {\r\n          format: /o/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a, _b;\r\n          const localizedOrdinal = ((_b = (_a = options.locale).ordinal) === null || _b === void 0 ? void 0 : _b.call(_a, number)) || '';\r\n          const patternWithEscapedOrdinal = patternReplace(pattern, /o/, `'ɵordɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedOrdinal, options);\r\n          return formatResult.replace('ɵordɵ', _ => localizedOrdinal);\r\n      }\r\n  };\r\n\r\n  var ordinalFormatter$1 = ordinalFormatter;\n\n  const currencySymbolsMap = {\r\n      EUR: '€',\r\n      USD: '$',\r\n      XCD: 'EC$',\r\n      AUD: 'A$',\r\n      INR: '₹',\r\n      BRL: 'R$',\r\n      CAD: 'CA$',\r\n      XAF: 'FCFA',\r\n      CNY: 'CN¥',\r\n      NZD: 'NZ$',\r\n      XPF: 'CFPF',\r\n      GBP: '£',\r\n      HKD: 'HK$',\r\n      ILS: '₪',\r\n      JPY: '¥',\r\n      KRW: '₩',\r\n      XOF: 'CFA',\r\n      MXN: 'MX$',\r\n      TWD: 'NT$',\r\n      VND: '₫',\r\n  };\r\n  const currencyFormatter = {\r\n      name: 'currency',\r\n      regexps: {\r\n          format: /(\\$)/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a;\r\n          const currencyFromOptions = (_a = options.currency) === null || _a === void 0 ? void 0 : _a.toUpperCase();\r\n          const localizedCurrencySymbol = currencySymbolsMap[currencyFromOptions] || currencyFromOptions || '';\r\n          const patternWithEscapedCurrencySymbol = patternReplace(pattern, /\\$/, `'ɵcurrencyɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedCurrencySymbol, options);\r\n          return formatResult.replace('ɵcurrencyɵ', _ => localizedCurrencySymbol);\r\n      },\r\n  };\r\n\r\n  var currencyFormatter$1 = currencyFormatter;\n\n  const percentageFormatter = {\r\n      name: 'percentage',\r\n      regexps: {\r\n          format: /%!?/,\r\n          unformat: /%/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const hasNotScalePercentageSymbolInPattern = patternIncludes(pattern, '%!');\r\n          const scaledValue = options.scalePercentage && !hasNotScalePercentageSymbolInPattern ? multiplyByPowerOfTen$1(number, 2) : number;\r\n          const patternWithEscapedPercentage = patternReplace(pattern, /%!?/, `'ɵ%ɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedPercentage, options);\r\n          return formatResult.replace('ɵ%ɵ', '%');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?%/, ''), options);\r\n          return number && options.scalePercentage ? multiplyByPowerOfTen$1(number, -2) : number;\r\n      },\r\n  };\r\n\r\n  var percentageFormatter$1 = percentageFormatter;\n\n  const exponentialFormatter = {\r\n      name: 'exponential',\r\n      regexps: {\r\n          format: /[eE][+-][0-9]+/,\r\n          unformat: /[eE][+-][0-9]+/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const exponential = typeof number === 'number' && !isNaNNumber$1(number) ? number.toExponential() : '0e+0';\r\n          const parts = splitStringInTwoParts$1(exponential, 'e');\r\n          const patternWithoutExponential = patternReplace(pattern, /e[+|-]{1}0/i, '');\r\n          const formatResult = numberToFormattedNumber$1(+parts[0], patternWithoutExponential, options);\r\n          return formatResult + 'e' + parts[1];\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const value = formattedStringToNumber$1(string.replace(/e[+-]{1}[0-9]{1,3}/i, ''), options);\r\n          const powerOfTenExponent = +(((_a = string.match(/e([+-]{1}[0-9]{1,3})/i)) === null || _a === void 0 ? void 0 : _a[1]) || '0');\r\n          return isFiniteNumber$1(value) ? multiplyByPowerOfTen$1(value, powerOfTenExponent) : value;\r\n      },\r\n  };\r\n\r\n  var exponentialFormatter$1 = exponentialFormatter;\n\n  const BUILT_IN_FORMATTERS = [\r\n      percentageFormatter$1,\r\n      currencyFormatter$1,\r\n      ordinalFormatter$1,\r\n      timeFormatter$1,\r\n      bytesFormatter$1,\r\n      exponentialFormatter$1,\r\n      bpsFormatter$1,\r\n  ];\r\n\r\n  var BUILT_IN_FORMATTERS$1 = BUILT_IN_FORMATTERS;\n\n  const roundHalfAwayFromZero = (value) => {\r\n      return value >= 0\r\n          ? Math.round(value)\r\n          : (value % 0.5 === 0) ? Math.floor(value) : Math.round(value);\r\n  };\r\n\r\n  var roundHalfAwayFromZero$1 = roundHalfAwayFromZero;\n\n  const areDelimitersValid = (delimiters) => {\r\n      return !!(delimiters === null || delimiters === void 0 ? void 0 : delimiters.decimal)\r\n          && isString$1(delimiters === null || delimiters === void 0 ? void 0 : delimiters.thousands)\r\n          && delimiters.decimal !== delimiters.thousands;\r\n  };\r\n  const resolveOptionsLocale = (optionsLocale) => {\r\n      const defaultLocale = locale$1;\r\n      if (!isObject$1(optionsLocale))\r\n          return defaultLocale;\r\n      return merge(optionsLocale, {\r\n          delimiters: areDelimitersValid(optionsLocale.delimiters) ? optionsLocale.delimiters : defaultLocale.delimiters,\r\n          abbreviations: optionsLocale.abbreviations || defaultLocale.abbreviations,\r\n          ordinal: optionsLocale.ordinal || defaultLocale.ordinal,\r\n      });\r\n  };\r\n  const resolveRoundingOption = (roundingOption) => {\r\n      switch (roundingOption) {\r\n          case 'ceil': return Math.ceil;\r\n          case 'floor': return Math.floor;\r\n          case 'truncate': return truncateNumber$1;\r\n          case 'half-up': return Math.round;\r\n          case 'half-away-from-zero': return roundHalfAwayFromZero$1;\r\n          default: return isFunction$1(roundingOption) ? roundingOption : roundHalfAwayFromZero$1;\r\n      }\r\n  };\r\n  const resolveOptionsFormatters = (optionsFormatters) => {\r\n      if (!optionsFormatters)\r\n          return BUILT_IN_FORMATTERS$1;\r\n      return isFunction$1(optionsFormatters)\r\n          ? optionsFormatters(BUILT_IN_FORMATTERS$1)\r\n          : [...optionsFormatters, ...BUILT_IN_FORMATTERS$1];\r\n  };\r\n  const resolveFormatOptions = (formatOptions) => {\r\n      var _a, _b, _c;\r\n      const options = formatOptions || {};\r\n      const resolvedRoundingFunction = resolveRoundingOption(options.rounding);\r\n      const resolvedLocale = resolveOptionsLocale(options.locale);\r\n      const resolvedFormatters = resolveOptionsFormatters(options.formatters);\r\n      return {\r\n          defaultPattern: options.defaultPattern || '0,0.##########',\r\n          nullFormat: options.nullFormat || '',\r\n          nanFormat: options.nanFormat,\r\n          zeroFormat: options.zeroFormat,\r\n          locale: resolvedLocale,\r\n          rounding: resolvedRoundingFunction,\r\n          type: options.type,\r\n          scalePercentage: (_a = options.scalePercentage) !== null && _a !== void 0 ? _a : true,\r\n          trim: (_b = options.trim) !== null && _b !== void 0 ? _b : true,\r\n          formatters: resolvedFormatters,\r\n          currency: options.currency,\r\n          signedZero: !!options.signedZero,\r\n          nonBreakingSpace: (_c = options.nonBreakingSpace) !== null && _c !== void 0 ? _c : false,\r\n      };\r\n  };\r\n\r\n  var resolveFormatOptions$1 = resolveFormatOptions;\n\n  const getUnformatFunctionIfMatch = (input, resolvedOptions) => {\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.unformat;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(input, resolvedOptions) : !!input.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.unformat;\r\n      }\r\n  };\r\n  const parse$2 = (input, options) => {\r\n      const resolvedOptions = resolveFormatOptions$1(options);\r\n      let value;\r\n      if (isNil$1(input) || isNaNNumber$1(input)) {\r\n          value = null;\r\n      }\r\n      else if (typeof input === 'number') {\r\n          // Handles negative zero\r\n          value = input === 0 ? 0 : input;\r\n      }\r\n      else if (typeof input === 'string') {\r\n          if (resolvedOptions.zeroFormat && input === resolvedOptions.zeroFormat) {\r\n              value = 0;\r\n          }\r\n          else if (resolvedOptions.nullFormat && input === resolvedOptions.nullFormat) {\r\n              value = null;\r\n          }\r\n          else {\r\n              // Removes non-breaking spaces if they exists\r\n              const inputStringWithNormalSpaces = input.replace(/\\u00A0/, ' ');\r\n              const unformatFunctionFromFormatters = getUnformatFunctionIfMatch(inputStringWithNormalSpaces, resolvedOptions);\r\n              const unformatFunction = unformatFunctionFromFormatters || formattedStringToNumber$1;\r\n              value = unformatFunction(inputStringWithNormalSpaces, resolvedOptions);\r\n          }\r\n      }\r\n      else {\r\n          const result = +input;\r\n          value = result === 0 ? result : (result || null);\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var parse$1$1 = parse$2;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * parse('1,250.48')\r\n   * //=> 1250.48\r\n   * parse('10 %')\r\n   * //=> 0.1\r\n   * parse('1 000,582', { locale: fr })\r\n   * //=> 1000.582\r\n   * ```\r\n   * Parse the given numeric-string applying the provided options.\r\n   *\r\n   * options:\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   *\r\n   * @param string string: The numeric-string to parse (e.g. **'10 %'**)\r\n   * @param options options: The options used to parse the numeric-string\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   */\r\n  const parse = (string, options) => {\r\n      return parse$1$1(string, options);\r\n  };\r\n\r\n  var parse$1 = parse;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * round(12.687, 2)\r\n   * //=> 12.69\r\n   * round(12.687)\r\n   * //=> 13\r\n   * round(12.687, 2, Math.floor)\r\n   * //=> 12.68\r\n   * ```\r\n   * Rounds the given number to the specified amount of decimal places.\r\n   *\r\n   * - The **default precision** is 0.\r\n   * - The **default roundingFunction** is Math.round.\r\n   *\r\n   * @param number number: The number to round (e.g. **10.23**)\r\n   * @param precision precision: The desired amount of decimal places (e.g. **2**)\r\n   * @param roundingFunction roundingFunction: The function applied for rounding (e.g. **Math.floor**)\r\n   * */\r\n  const round = (number, precision, roundingFunction) => {\r\n      return roundNumber$1(number, precision, roundingFunction);\r\n  };\r\n\r\n  var round$1 = round;\n\n  const getFormatFunctionIfMatch = (pattern, resolvedOptions) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.format;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(pattern, resolvedOptions) : !!patternWithoutEscapedText.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.format;\r\n      }\r\n  };\r\n  const format$1 = (value, pattern, options) => {\r\n      var _a;\r\n      try {\r\n          const resolvedValue = isString$1(value) ? parseFloat(value) : value;\r\n          const resolvedOptions = resolveFormatOptions$1(options);\r\n          const resolvedPattern = pattern || resolvedOptions.defaultPattern;\r\n          let output;\r\n          if (resolvedValue === Infinity || resolvedValue === -Infinity) {\r\n              output = resolvedValue > 0 ? '∞' : '-∞';\r\n          }\r\n          else if (isNaNNumber$1(resolvedValue)) {\r\n              return isString$1(resolvedOptions.nanFormat)\r\n                  ? resolvedOptions.nanFormat\r\n                  : (isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '');\r\n          }\r\n          else if (isNil$1(resolvedValue)) {\r\n              output = isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '';\r\n          }\r\n          else if (resolvedValue === 0 && isString$1(resolvedOptions.zeroFormat)) {\r\n              output = resolvedOptions.zeroFormat;\r\n          }\r\n          else {\r\n              // <!> Here value should always be a number\r\n              const resolvedValueAsNumber = resolvedValue || 0;\r\n              const formatFunctionFromFormatters = getFormatFunctionIfMatch(resolvedPattern, resolvedOptions);\r\n              const resolvedFormatFunction = formatFunctionFromFormatters || numberToFormattedNumber$1;\r\n              output = resolvedFormatFunction(resolvedValueAsNumber, resolvedPattern, resolvedOptions);\r\n          }\r\n          // Ensures that it always returns an string\r\n          output = isString$1(output) ? output : '';\r\n          // Replaces spaces with non-breaking spaces if needed\r\n          output = resolvedOptions.nonBreakingSpace\r\n              ? output.replace(/ /g, _ => '\\u00A0')\r\n              : output;\r\n          // Trims the output if needed\r\n          output = resolvedOptions.trim ? output.trim() : output;\r\n          return output;\r\n      }\r\n      catch (_error) {\r\n          return ((_a = options) === null || _a === void 0 ? void 0 : _a._errorFormat) || '';\r\n      }\r\n  };\r\n\r\n  var format$1$1 = format$1;\n\n  function format(number, arg2, arg3) {\r\n      const pattern = isString$1(arg2) ? arg2 : null;\r\n      const options = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n      return format$1$1(number, pattern, options);\r\n  }\r\n  const createFormatFunction = (options) => {\r\n      const baseOptions = merge(options, {\r\n          locale: isFunction$1(options.locale) ? options.locale() : options.locale,\r\n      });\r\n      return ((value, arg2, arg3) => {\r\n          const pattern = isString$1(arg2) ? arg2 : null;\r\n          const optionsFromArguments = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n          return format$1$1(value, pattern, merge(baseOptions, optionsFromArguments));\r\n      });\r\n  };\r\n  format.withOptions = createFormatFunction;\n\n  const unique = (arr) => {\r\n      if (!arr)\r\n          return [];\r\n      return arr.filter((value, index, self) => self.indexOf(value) === index);\r\n  };\r\n\r\n  var unique$1 = unique;\n\n  // <i> Extracted from https://stackoverflow.com/questions/12006095/javascript-how-to-check-if-character-is-rtl\r\n  const leftToRightMark = '\\u200e';\r\n  const rtlCharsRanges = '\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\r\n  const rtlDirCheck = new RegExp('^[^' + rtlCharsRanges + ']*?[' + rtlCharsRanges + ']');\r\n  const isRTL = (string) => rtlDirCheck.test(string);\r\n  const appendLeftToRightMarkIfIsRTL = (string) => isRTL(string) ? string + leftToRightMark : string;\r\n  // const languagesWith4DigitsGroupingStyle = ['zh', 'yue', 'ko', 'ja'];\r\n  const languagesWith4DigitsGroupingStyle = []; //***\r\n  const toLocaleStringSupportsOptions = () => {\r\n      return typeof Intl === 'object' && !!Intl && typeof Intl.NumberFormat === 'function';\r\n  };\r\n  const getNumeralSystemDigits = (languageTag) => {\r\n      try {\r\n          const localizedNumber = (1234567890).toLocaleString(languageTag, { useGrouping: false });\r\n          const lookupObject = {};\r\n          const repeatedChar = localizedNumber.split('').find((char) => {\r\n              if (lookupObject[char])\r\n                  return true;\r\n              lookupObject[char] = true;\r\n          });\r\n          const digitsWithoutGroupingDelimiters = repeatedChar\r\n              ? localizedNumber.replace(new RegExp(escapeRegexString$1(repeatedChar || ''), 'g'), '')\r\n              : localizedNumber;\r\n          const digitsAsArray = digitsWithoutGroupingDelimiters.split('');\r\n          const sortedDigits = [digitsAsArray[digitsAsArray.length - 1], ...digitsAsArray.slice(0, -1)];\r\n          return sortedDigits.join('');\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingAndFractionDelimiters = (languageTag, digits) => {\r\n      try {\r\n          const localizedNumber = (12345678.123).toLocaleString(languageTag);\r\n          const localizedNumberWithoutDigits = localizedNumber.replace(new RegExp(`[${escapeRegexString$1(digits)}]`, 'g'), '');\r\n          const [groupingDelimiter = ',', fractionDelimiter = '.'] = unique$1(localizedNumberWithoutDigits.split(''));\r\n          return [groupingDelimiter, fractionDelimiter];\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingStyle = (languageTag, groupingDelimiter) => {\r\n      // <i> Handle '4 digits' grouping style for some asian countries (not CLDR)\r\n      if (languagesWith4DigitsGroupingStyle.some(language => languageTag.indexOf(language) === 0))\r\n          return [4];\r\n      try {\r\n          const result = [];\r\n          let subIterationIndex = 0;\r\n          (100000000000).toLocaleString(languageTag).split('').reverse().forEach((digitOrGroupingDelimiter) => {\r\n              if (digitOrGroupingDelimiter === groupingDelimiter) {\r\n                  result.push(subIterationIndex);\r\n                  subIterationIndex = 0;\r\n              }\r\n              else {\r\n                  subIterationIndex += 1;\r\n              }\r\n          });\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === result[resultIndex - 1])\r\n                  result.pop();\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getAbbreviations = (languageTag, digits, type) => {\r\n      try {\r\n          if (!toLocaleStringSupportsOptions())\r\n              return null;\r\n          const intlFormatOptions = { notation: 'compact', useGrouping: false, compactDisplay: type };\r\n          const [digitOfZero, digitOfOne, digitOfTwo] = digits.split('');\r\n          let abbreviations = '';\r\n          for (let i = 1; i < 50; i++) {\r\n              const abbreviationResultForOne = (+(1 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n              if (new RegExp(`^${digitOfOne}[^${digitOfZero}]+$`).test(abbreviationResultForOne)) {\r\n                  if (type === 'long') {\r\n                      const abbreviationResultForTwo = (+(2 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n                      const abbreviationOne = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      const abbreviationTwo = abbreviationResultForTwo.replace(new RegExp(`${digitOfTwo}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviationOne) + ':::' + appendLeftToRightMarkIfIsRTL(abbreviationTwo);\r\n                  }\r\n                  else {\r\n                      const abbreviation = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviation);\r\n                  }\r\n              }\r\n              else {\r\n                  abbreviations += '|';\r\n              }\r\n          }\r\n          // Remove trailing pipes '|'\r\n          let result = abbreviations;\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === '|')\r\n                  result = result.slice(0, -1);\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const baseGetLocaleFromPlatform = (languageTag) => {\r\n      const resolvedLanguageTag = languageTag || 'en';\r\n      const digits = getNumeralSystemDigits(resolvedLanguageTag);\r\n      const resolvedDigits = digits || '0123456789';\r\n      const delimiters = getGroupingAndFractionDelimiters(resolvedLanguageTag, resolvedDigits);\r\n      const [groupingDelimiter, fractionDelimiter] = !!delimiters && delimiters.length >= 2 ? delimiters : [',', '.'];\r\n      const groupingStyle = getGroupingStyle(resolvedLanguageTag, groupingDelimiter);\r\n      const shortAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'short');\r\n      const longAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'long');\r\n      return {\r\n          _abbreviationsLong: longAbbreviations || locale$1.abbreviations,\r\n          code: resolvedLanguageTag,\r\n          delimiters: { thousands: groupingDelimiter, decimal: fractionDelimiter },\r\n          abbreviations: shortAbbreviations || locale$1.abbreviations,\r\n          digitGroupingStyle: !!(groupingStyle === null || groupingStyle === void 0 ? void 0 : groupingStyle.length) ? groupingStyle : undefined,\r\n          numeralSystem: digits !== '0123456789' ? digits === null || digits === void 0 ? void 0 : digits.split('').map(appendLeftToRightMarkIfIsRTL) : undefined,\r\n          ordinal: locale$1.ordinal,\r\n      };\r\n  };\r\n  const getLocaleFromPlatform$2 = memoize$1(baseGetLocaleFromPlatform);\r\n\r\n  var getLocaleFromPlatform$1$1 = getLocaleFromPlatform$2;\n\n  /**\r\n   * Given a language tag (e.g. '**zh**' | '**es**' | '**fr**' | '**en-IN**' | '**zh-Hans**'), returns a NumerableLocale\r\n   * object extracted from the platform Intl.NumberFormat behavior.\r\n   *\r\n   * This locale object can be used in the numerable functions that support i18n (*format* and *parse*).\r\n   * Example:\r\n   * ```javascript\r\n   * format(12345, '0,0.00', { locale: getLocaleFromPlatform('fr') })\r\n   * ```\r\n   *\r\n   * <i> Take into account that the returned locale is not complete, and some features like\r\n   *     'ordinal formatting' won't work. Use this feature only for simple applications that don't require\r\n   *     full support from numeral, and don't target legacy browsers.\r\n   */\r\n  const getLocaleFromPlatform = (languageTag) => {\r\n      return getLocaleFromPlatform$1$1(languageTag);\r\n  };\r\n\r\n  var getLocaleFromPlatform$1 = getLocaleFromPlatform;\n\n  var numerable = {\n    __proto__: null,\n    format,\n    getLocaleFromPlatform: getLocaleFromPlatform$1,\n    parse: parse$1,\n    round: round$1\n  };\n\n  // Extend\r\n  Object.assign(ew$1, numerable);\n\n})(ew, jQuery, luxon);\n"],"mappings":"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"}